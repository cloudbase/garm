import{f as L,h as oe,e as b,a as y,t as le,s as j}from"../chunks/o8CdT7B0.js";import{i as ne}from"../chunks/ChJfoPF0.js";import{p as ce,o as ue,l as ve,b as me,t as S,g as r,a as ge,$ as fe,s as d,m as c,c as t,u as B,h as U,d as i,r as s,n as q}from"../chunks/DUMcBckj.js";import{i as H,s as pe,a as he}from"../chunks/i7pKks78.js";import{B as be,d as n,c as T,g as K,r as V}from"../chunks/DNkq9lh7.js";import{b as W}from"../chunks/BtzOUN4g.js";import{p as ye}from"../chunks/CdEA5IGF.js";import{g as F}from"../chunks/CYDUEQO4.js";import{a as xe,b as ke}from"../chunks/DbsbjutB.js";import{e as we}from"../chunks/BZiHL9L3.js";var _e=L('<div class="rounded-md bg-red-50 dark:bg-red-900 p-4"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm font-medium text-red-800 dark:text-red-200"> </p></div></div></div>'),$e=L('<div class="mt-6"><div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300 dark:border-gray-600"></div></div> <div class="relative flex justify-center text-sm"><span class="px-2 bg-gray-50 dark:bg-gray-900 text-gray-500 dark:text-gray-400">Or continue with</span></div></div> <div class="mt-6"><button type="button" class="w-full flex justify-center items-center gap-3 py-2.5 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"><svg class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"></path></svg> Sign in with SSO</button></div></div>'),Se=L('<div class="min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"><div class="max-w-md w-full space-y-8"><div><div class="mx-auto h-48 w-auto flex justify-center"><img alt="GARM" class="h-48 w-auto dark:hidden"/> <img alt="GARM" class="h-48 w-auto hidden dark:block"/></div> <h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white">Sign in to GARM</h2> <p class="mt-2 text-center text-sm text-gray-600 dark:text-gray-400">GitHub Actions Runner Manager</p></div> <form class="mt-8 space-y-6"><div class="rounded-md shadow-sm -space-y-px"><div><label for="username" class="sr-only">Username</label> <input id="username" name="username" type="text" required class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm" placeholder="Username"/></div> <div><label for="password" class="sr-only">Password</label> <input id="password" name="password" type="password" required class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm" placeholder="Password"/></div></div> <!> <div><!></div></form> <!></div></div>');function Ge(J,N){ce(N,!1);const[Q,X]=pe(),M=()=>he(xe,"$authStore",Q);let v=c(""),m=c(""),l=c(!1),u=c(""),x=c(!1),z=c(!0);ue(async()=>{ee(),await Y()});async function Y(){try{const e=await K.getOIDCStatus();i(x,e.enabled)}catch{i(x,!1)}finally{i(z,!1)}}function Z(){window.location.href=K.getOIDCLoginUrl()}function ee(){const e=localStorage.getItem("theme");let a=!1;e==="dark"?a=!0:e==="light"?a=!1:a=window.matchMedia("(prefers-color-scheme: dark)").matches,a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}async function A(){if(!r(v)||!r(m)){i(u,"Please enter both username and password");return}i(l,!0),i(u,"");try{await ke.login(r(v),r(m)),F(n("/"))}catch(e){i(u,we(e))}finally{i(l,!1)}}function C(e){e.key==="Enter"&&A()}ve(()=>(M(),n),()=>{M().isAuthenticated&&F(n("/"))}),me(),ne();var k=Se();oe(e=>{fe.title="Login - GARM"});var D=t(k),w=t(D),I=t(w),O=t(I),ae=d(O,2);s(I),q(4),s(w);var g=d(w,2),_=t(g),$=t(_),f=d(t($),2);V(f),s($);var P=d($,2),p=d(t(P),2);V(p),s(P),s(_);var E=d(_,2);{var re=e=>{var a=_e(),o=t(a),h=d(t(o),2),R=t(h),ie=t(R,!0);s(R),s(h),s(o),s(a),S(()=>j(ie,r(u))),y(e,a)};H(E,e=>{r(u)&&e(re)})}var G=d(E,2),te=t(G);be(te,{type:"submit",variant:"primary",size:"md",fullWidth:!0,get disabled(){return r(l)},get loading(){return r(l)},children:(e,a)=>{q();var o=le();S(()=>j(o,r(l)?"Signing in...":"Sign in")),y(e,o)},$$slots:{default:!0}}),s(G),s(g);var se=d(g,2);{var de=e=>{var a=$e(),o=d(t(a),2),h=t(o);s(o),s(a),b("click",h,Z),y(e,a)};H(se,e=>{!r(z)&&r(x)&&e(de)})}s(D),s(k),S((e,a)=>{T(O,"src",e),T(ae,"src",a),f.disabled=r(l),p.disabled=r(l)},[()=>(U(n),B(()=>n("/assets/garm-light.svg"))),()=>(U(n),B(()=>n("/assets/garm-dark.svg")))]),W(f,()=>r(v),e=>i(v,e)),b("keypress",f,C),W(p,()=>r(m),e=>i(m,e)),b("keypress",p,C),b("submit",g,ye(A)),y(J,k),ge(),X()}export{Ge as component};
