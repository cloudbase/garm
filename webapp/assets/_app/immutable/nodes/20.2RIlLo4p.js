import"../chunks/DsnmJJEf.js";import{i as Dt}from"../chunks/C7KraPli.js";import{p as At,o as Lt,l as ve,h as Ut,f as D,j as Rt,a as se,b,c as It,g as e,m as w,t as z,k as s,u as l,$ as Mt,s as o,w as M,B as Je,d as r,r as d,z as H,D as me,e as j,v as m,q as U,i as Ae,y as Ft}from"../chunks/cPTQ2Ibn.js";import{i as T}from"../chunks/DqFqoVWr.js";import{g as Le,d as ge,r as Ye,b as Et}from"../chunks/DB8UsQ0-.js";import{b as Ke}from"../chunks/B-_QCM7E.js";import{p as Bt}from"../chunks/D4Caz1gY.js";import{p as pe}from"../chunks/DtAZK1uo.js";import{g as Qe}from"../chunks/BBTpo6Bp.js";import{A as be}from"../chunks/DCFSsZl6.js";import{t as N}from"../chunks/Bgbd8SZ5.js";import{e as Ue}from"../chunks/BZiHL9L3.js";import{g as Xe,B as xe}from"../chunks/B4-9yhwO.js";import{D as St}from"../chunks/AQT3qBNl.js";import{C as Ht,a as Ze}from"../chunks/CK99y8PI.js";import{i as et}from"../chunks/C98nByjP.js";var jt=D('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-600 dark:text-gray-400">Loading template...</span></div>'),Pt=D('<div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-red-800 dark:text-red-200">Error loading template</h3> <div class="mt-2 text-sm text-red-700 dark:text-red-300"> </div> <div class="mt-4 space-x-3"><!> <!></div></div></div></div>'),zt=D('<form class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Name *</label> <input type="text" id="name" required class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"/></div> <div><label for="description" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Description</label> <input type="text" id="description" class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"/></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><span class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Forge Type</span> <!> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Cannot be changed</p></div> <div><span class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">OS Type</span> <!> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Cannot be changed</p></div></div></form>'),Gt=D('<div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Created</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div>'),Vt=D('<div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Last Updated</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div>'),Wt=D('<dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2"><div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Name</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Description</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Forge Type</dt> <dd class="mt-1"><!></dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">OS Type</dt> <dd class="mt-1"><!></dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Owner</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Template ID</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div> <!> <!></dl>'),Nt=D('<div class="flex items-center space-x-3"><label for="language-select" class="text-sm font-medium text-gray-700 dark:text-gray-300">Language:</label> <select id="language-select" class="px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>Bash</option><option>PowerShell</option><option>Python</option><option>Text</option></select></div>'),Ot=D('<div class="mb-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4"><h4 class="text-sm font-medium text-blue-900 dark:text-blue-100 mb-2">Available Template Variables</h4> <p class="text-xs text-blue-800 dark:text-blue-200 mb-3">Your template can use the following variables using Go template syntax (e.g., <code class="bg-blue-100 dark:bg-blue-800 px-1 rounded"></code>):</p> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-xs"><div><h5 class="font-medium text-blue-900 dark:text-blue-100 mb-1">Runner Info</h5> <ul class="space-y-1 text-blue-800 dark:text-blue-200"><li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RunnerName</code> - Runner name</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RunnerLabels</code> - Comma separated labels</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RunnerUsername</code> - Runner service username</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RunnerGroup</code> - Runner service group</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.GitHubRunnerGroup</code> - GitHub runner group</li></ul></div> <div><h5 class="font-medium text-blue-900 dark:text-blue-100 mb-1">Download & Install</h5> <ul class="space-y-1 text-blue-800 dark:text-blue-200"><li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.FileName</code> - Download file name</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.DownloadURL</code> - Runner download URL</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.TempDownloadToken</code> - Download token</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RepoURL</code> - Repository URL</li></ul></div> <div><h5 class="font-medium text-blue-900 dark:text-blue-100 mb-1">Configuration</h5> <ul class="space-y-1 text-blue-800 dark:text-blue-200"><li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.MetadataURL</code> - Instance metadata URL</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.CallbackURL</code> - Status callback URL</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.CallbackToken</code> - Callback token</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.CABundle</code> - CA certificate bundle</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.EnableBootDebug</code> - Enable debug mode</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.UseJITConfig</code> - Use JIT configuration</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.ExtraContext</code> - Additional context map</li></ul></div></div> <p class="text-xs text-blue-700 dark:text-blue-300 mt-3">ðŸ’¡ <strong>Tip:</strong> Use <code class="bg-blue-100 dark:bg-blue-800 px-1 rounded"></code> for conditional content, or <code class="bg-blue-100 dark:bg-blue-800 px-1 rounded"></code> to iterate over extra context.</p></div>'),qt=D('<div class="flex-1 min-h-0"><!> <p class="mt-2 text-sm text-gray-500 dark:text-gray-400"> </p></div>'),Jt=D('<div class="flex items-center justify-between mb-4"><div></div> <button type="button" class="inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors" title="Copy template content to clipboard"><svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> Copy Code</button></div> <div class="flex-1 min-h-0"><!></div>',1),Yt=D('<!> <div class="flex flex-col h-full space-y-6"><div class="bg-white dark:bg-gray-800 shadow rounded-lg flex-shrink-0"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4">Template Information</h3> <!></div></div> <div class="bg-white dark:bg-gray-800 shadow rounded-lg flex-1 flex flex-col min-h-0"><div class="px-4 py-5 sm:p-6 flex-1 flex flex-col"><div class="flex items-center justify-between mb-4"><h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white">Template Content</h3> <!></div> <!> <!></div></div></div>',1),Kt=D('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800 dark:border-gray-700"><div class="mt-3 text-center"><div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900"><svg class="h-6 w-6 text-red-600 dark:text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.996-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div> <h3 class="text-lg font-medium text-gray-900 dark:text-white mt-4">Delete Template</h3> <div class="mt-2 px-7 py-3"><p class="text-sm text-gray-500 dark:text-gray-400">Are you sure you want to delete the template "<strong> </strong>"? This action cannot be undone.</p></div> <div class="flex justify-center space-x-3 px-4 py-3"><!> <!></div></div></div></div>'),Qt=D("<!> <!> <!>",1);function ga(tt,at){At(at,!1);const fe=w(),ye=w(),he=w();let le=w(!0),t=w(null),O=w(""),_=w(!1),n=w({name:"",description:"",data:new Uint8Array}),u=w(""),X=w("text"),G=w(!1),$=w({name:"",description:""}),P=w(""),_e=w(!1),ne=w(!1);async function Re(){try{if(s(le,!0),s(O,""),s(t,await Le.getTemplate(e(fe))),!e(t))throw new Error("Template not found");if(M(n,e(n).name=e(t).name||""),M(n,e(n).description=e(t).description||""),M($,e($).name=e(t).name||""),M($,e($).description=e(t).description||""),e(t).data)try{if(Array.isArray(e(t).data)){const a=new Uint8Array(e(t).data);s(u,new TextDecoder().decode(a)),s(P,e(u))}else s(u,atob(e(t).data)),s(P,e(u))}catch(a){console.error("Failed to decode template data:",a),s(u,""),s(P,"")}else s(u,""),s(P,"")}catch(a){s(O,Ue(a)),N.add({type:"error",title:"Failed to load template",message:e(O)})}finally{s(le,!1)}}async function Ie(){if(!(!e(t)?.id||!e(he)))try{const a={name:e(n).name,description:e(n).description||void 0,data:Array.from(new TextEncoder().encode(e(u)))},y=await Le.updateTemplate(e(t).id,a);s(t,y),N.add({type:"success",title:"Template updated",message:`Template "${e(n).name}" has been updated successfully.`}),M($,e($).name=e(n).name),M($,e($).description=e(n).description),s(P,e(u)),s(_,!1)}catch(a){const y=Ue(a);N.add({type:"error",title:"Failed to update template",message:y})}}async function rt(){if(e(t)?.id)try{await Le.deleteTemplate(e(t).id),N.add({type:"success",title:"Template deleted",message:`Template "${e(t).name}" has been deleted successfully.`}),Qe(ge("/templates"))}catch(a){const y=Ue(a);N.add({type:"error",title:"Failed to delete template",message:y})}}function Me(){s(_,!0),s(G,!1)}function dt(){return e(n).name!==e($).name||e(n).description!==e($).description||e(u)!==e(P)}function ot(){if(dt()){s(ne,!0);return}Fe()}function Fe(){if(s(_,!1),s(G,!1),pe.url.searchParams.get("edit")==="true"){Qe(ge("/templates"));return}if(e(t))if(M(n,e(n).name=e(t).name||""),M(n,e(n).description=e(t).description||""),e(t).data)try{if(Array.isArray(e(t).data)){const a=new Uint8Array(e(t).data);s(u,new TextDecoder().decode(a))}else s(u,atob(e(t).data))}catch(a){console.error("Failed to decode template data:",a),s(u,"")}else s(u,"")}function st(){s(ne,!1),Fe()}function Ee(a){switch(a){case"github":return{color:"blue",text:"GitHub"};case"gitea":return{color:"green",text:"Gitea"};default:return{color:"gray",text:a||"Unknown"}}}function Be(a){switch(a){case"linux":return{color:"blue",text:"Linux"};case"windows":return{color:"info",text:"Windows"};default:return{color:"gray",text:a||"Unknown"}}}function ke(){if(!e(t)?.data)return"";try{if(Array.isArray(e(t).data)){const a=new Uint8Array(e(t).data);return new TextDecoder().decode(a)}else return atob(e(t).data)}catch(a){return console.error("Failed to decode template data:",a),"Error: Failed to decode template content"}}function Se(a){const A=a.split(`
`)[0]?.trim()||"";return A.startsWith("#!/bin/bash")||A.startsWith("#!/bin/sh")?"bash":A.startsWith("#!/usr/bin/env pwsh")||A.includes("#ps1_sysnative")?"powershell":A.startsWith("#!/usr/bin/env python")||A.startsWith("#!/usr/bin/python")?"python":a.includes("param(")||a.includes("Write-Host")||a.includes("$_")?"powershell":a.includes("def ")||a.includes("import ")||a.includes("print(")?"python":a.includes("echo ")||a.includes("export ")||a.includes("if [")?"bash":"text"}async function lt(a){try{await navigator.clipboard.writeText(a),N.add({type:"success",title:"Copied to clipboard",message:"Template content has been copied to your clipboard."})}catch(y){console.error("Failed to copy to clipboard:",y),N.add({type:"error",title:"Copy failed",message:"Failed to copy content to clipboard. Please try again."})}}Lt(()=>{e(fe)?Re().then(()=>{pe.url.searchParams.get("edit")==="true"&&Me()}):(s(O,"Invalid template ID"),s(le,!1))}),ve(()=>pe,()=>{s(fe,parseInt(pe.params.id||"0"))}),ve(()=>(e(u),e(G)),()=>{e(u)&&!e(G)&&s(X,Se(e(u)))}),ve(()=>(e(n),e($),e(u),e(P)),()=>{s(ye,e(n).name!==e($).name||e(n).description!==e($).description||e(u)!==e(P))}),ve(()=>(e(ye),e(n),e(u)),()=>{s(he,e(ye)&&e(n).name.trim().length>0&&e(u).trim().length>0)}),Ut(),Dt();var He=Qt();Rt(a=>{z(()=>Mt.title=`${e(t),l(()=>e(t)?.name||"Template")??""} - GARM`)});var je=se(He);{var nt=a=>{var y=jt();b(a,y)},it=a=>{var y=Je(),A=se(y);{var ie=F=>{var E=Pt(),q=r(E),V=o(r(q),2),R=o(r(V),2),J=r(R,!0);d(R);var B=o(R,2),Y=r(B);be(Y,{variant:"secondary",size:"sm",$$events:{click:Re},children:(K,ee)=>{H();var te=me("Try Again");b(K,te)},$$slots:{default:!0}});var W=o(Y,2);{let K=m(()=>(U(ge),l(()=>ge("/templates"))));be(W,{variant:"secondary",size:"sm",get href(){return e(K)},children:(ee,te)=>{H();var ae=me("Back to Templates");b(ee,ae)},$$slots:{default:!0}})}d(B),d(V),d(q),d(E),z(()=>j(J,e(O))),b(F,E)},Z=F=>{var E=Je(),q=se(E);{var V=R=>{const J=m(()=>(U(et),l(et))),B=m(()=>(e(t),l(()=>e(t).owner_id==="system"))),Y=m(()=>e(J)||!e(B)),W=m(()=>e(J)||!e(B));var K=Yt(),ee=se(K);{let v=m(()=>(e(t),l(()=>e(t).name||"Unnamed Template"))),i=m(()=>(U(Xe),e(t),l(()=>Xe(e(t).forge_type||"unknown")))),c=m(()=>e(_)?ot:e(Y)?Me:null),g=m(()=>e(_)?Ie:e(W)?()=>s(_e,!0):null),x=m(()=>e(_)?"Close":"Edit"),p=m(()=>e(_)?"Save Changes":"Delete"),f=m(()=>(e(_),"secondary")),I=m(()=>e(_)?"primary":"danger"),S=m(()=>e(_)?!e(he):!1),Q=m(()=>e(_)?"<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 18L18 6M6 6l12 12'/>":"<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z'/>"),re=m(()=>e(_)?"<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h8a2 2 0 002-2V9a2 2 0 00-2-2h-3m0 0V5a2 2 0 00-2-2H9a2 2 0 00-2 2v2m0 0h4'/>":"<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16'/>");St(ee,{get title(){return e(v)},subtitle:"View and manage template details",get forgeIcon(){return e(i)},get onEdit(){return e(c)},get onDelete(){return e(g)},get editLabel(){return e(x)},get deleteLabel(){return e(p)},get editVariant(){return e(f)},get deleteVariant(){return e(I)},get deleteDisabled(){return e(S)},get editIcon(){return e(Q)},get deleteIcon(){return e(re)}})}var te=o(ee,2),ae=r(te),ze=r(ae),mt=o(r(ze),2);{var gt=v=>{var i=zt(),c=r(i),g=r(c),x=o(r(g),2);Ye(x),d(g);var p=o(g,2),f=o(r(p),2);Ye(f),d(p),d(c);var I=o(c,2),S=r(I),Q=o(r(S),2);{var re=C=>{const L=m(()=>(e(t),l(()=>Ee(e(t).forge_type))));xe(C,{get variant(){return U(e(L)),l(()=>e(L).color)},get text(){return U(e(L)),l(()=>e(L).text)}})};T(Q,C=>{e(t),l(()=>e(t).forge_type)&&C(re)})}H(2),d(S);var ce=o(S,2),de=o(r(ce),2);{var ue=C=>{const L=m(()=>(e(t),l(()=>Be(e(t).os_type))));xe(C,{get variant(){return U(e(L)),l(()=>e(L).color)},get text(){return U(e(L)),l(()=>e(L).text)}})};T(de,C=>{e(t),l(()=>e(t).os_type)&&C(ue)})}H(2),d(ce),d(I),d(i),Ke(x,()=>e(n).name,C=>M(n,e(n).name=C)),Ke(f,()=>e(n).description,C=>M(n,e(n).description=C)),Ae("submit",i,Bt(Ie)),b(v,i)},pt=v=>{var i=Wt(),c=r(i),g=o(r(c),2),x=r(g,!0);d(g),d(c);var p=o(c,2),f=o(r(p),2),I=r(f,!0);d(f),d(p);var S=o(p,2),Q=o(r(S),2),re=r(Q);{var ce=k=>{const h=m(()=>(e(t),l(()=>Ee(e(t).forge_type))));xe(k,{get variant(){return U(e(h)),l(()=>e(h).color)},get text(){return U(e(h)),l(()=>e(h).text)}})};T(re,k=>{e(t),l(()=>e(t).forge_type)&&k(ce)})}d(Q),d(S);var de=o(S,2),ue=o(r(de),2),C=r(ue);{var L=k=>{const h=m(()=>(e(t),l(()=>Be(e(t).os_type))));xe(k,{get variant(){return U(e(h)),l(()=>e(h).color)},get text(){return U(e(h)),l(()=>e(h).text)}})};T(C,k=>{e(t),l(()=>e(t).os_type)&&k(L)})}d(ue),d(de);var Te=o(de,2),Ne=o(r(Te),2),kt=r(Ne,!0);d(Ne),d(Te);var $e=o(Te,2),Oe=o(r($e),2),wt=r(Oe,!0);d(Oe),d($e);var qe=o($e,2);{var Tt=k=>{var h=Gt(),oe=o(r(h),2),Ce=r(oe,!0);d(oe),d(h),z(De=>j(Ce,De),[()=>(e(t),l(()=>new Date(e(t).created_at).toLocaleDateString()))]),b(k,h)};T(qe,k=>{e(t),l(()=>e(t).created_at)&&k(Tt)})}var $t=o(qe,2);{var Ct=k=>{var h=Vt(),oe=o(r(h),2),Ce=r(oe,!0);d(oe),d(h),z(De=>j(Ce,De),[()=>(e(t),l(()=>new Date(e(t).updated_at).toLocaleDateString()))]),b(k,h)};T($t,k=>{e(t),l(()=>e(t).updated_at)&&k(Ct)})}d(i),z(()=>{j(x,(e(t),l(()=>e(t).name||"Unnamed Template"))),j(I,(e(t),l(()=>e(t).description||"No description"))),j(kt,(e(t),l(()=>e(t).owner_id==="system"?"System":e(t).owner_id||"Unknown"))),j(wt,(e(t),l(()=>e(t).id)))}),b(v,i)};T(mt,v=>{e(_)?v(gt):v(pt,!1)})}d(ze),d(ae);var Ge=o(ae,2),Ve=r(Ge),we=r(Ve),bt=o(r(we),2);{var xt=v=>{var i=Nt(),c=o(r(i),2);z(()=>{e(X),Ft(()=>{e(G)})});var g=r(c);g.value=g.__value="bash";var x=o(g);x.value=x.__value="powershell";var p=o(x);p.value=p.__value="python";var f=o(p);f.value=f.__value="text",d(c),d(i),Et(c,()=>e(X),I=>s(X,I)),Ae("change",c,()=>s(G,!0)),b(v,i)};T(bt,v=>{e(_)&&v(xt)})}d(we);var We=o(we,2);{var ft=v=>{var i=Ot(),c=o(r(i),2),g=o(r(c));g.textContent="{{ .RunnerName }}",H(),d(c);var x=o(c,4),p=o(r(x),3);p.textContent="{{if .CABundle}}...{{end}}";var f=o(p,2);f.textContent="{{range $key, $value := .ExtraContext}}{{$key}}: {{$value}}{{end}}",H(),d(x),d(i),b(v,i)};T(We,v=>{e(_)&&v(ft)})}var yt=o(We,2);{var ht=v=>{var i=qt(),c=r(i);{let p=m(()=>!e(G));Ze(c,{get language(){return e(X)},get autoDetect(){return e(p)},enableTemplateCompletion:!0,minHeight:"400px",placeholder:"Enter your template script content here...",get value(){return e(u)},set value(f){s(u,f)},$$events:{change:f=>s(u,f.detail.value)},$$legacy:!0})}var g=o(c,2),x=r(g);d(g),d(i),z(()=>j(x,`Template content should be a ${e(t),l(()=>e(t).os_type==="windows"?"PowerShell":"bash")??""} script for runner installation and configuration on ${e(t),l(()=>e(t).os_type)??""}.`)),b(v,i)},_t=v=>{var i=Jt(),c=se(i),g=o(r(c),2);d(c);var x=o(c,2),p=r(x);{let f=m(()=>l(ke)),I=m(()=>l(()=>Se(ke())));Ze(p,{get value(){return e(f)},get language(){return e(I)},readonly:!0,minHeight:"400px"})}d(x),Ae("click",g,()=>lt(ke())),b(v,i)};T(yt,v=>{e(_)?v(ht):v(_t,!1)})}d(Ve),d(Ge),d(te),b(R,K)};T(q,R=>{e(t)&&R(V)},!0)}b(F,E)};T(A,F=>{e(O)&&!e(t)?F(ie):F(Z,!1)},!0)}b(a,y)};T(je,a=>{e(le)?a(nt):a(it,!1)})}var Pe=o(je,2);{var ct=a=>{var y=Kt(),A=r(y),ie=r(A),Z=o(r(ie),4),F=r(Z),E=o(r(F)),q=r(E,!0);d(E),H(),d(F),d(Z);var V=o(Z,2),R=r(V);be(R,{variant:"secondary",$$events:{click:()=>s(_e,!1)},children:(B,Y)=>{H();var W=me("Cancel");b(B,W)},$$slots:{default:!0}});var J=o(R,2);be(J,{variant:"danger",$$events:{click:rt},children:(B,Y)=>{H();var W=me("Delete");b(B,W)},$$slots:{default:!0}}),d(V),d(ie),d(A),d(y),z(()=>j(q,(e(t),l(()=>e(t).name)))),b(a,y)};T(Pe,a=>{e(_e)&&e(t)&&a(ct)})}var ut=o(Pe,2);{var vt=a=>{Ht(a,{title:"Unsaved Changes",message:"You have unsaved changes. Are you sure you want to discard them?",confirmText:"Discard Changes",cancelText:"Stay on Page",variant:"warning",$$events:{close:()=>s(ne,!1),confirm:st}})};T(ut,a=>{e(ne)&&a(vt)})}b(tt,He),It()}export{ga as component};
