import"../chunks/DsnmJJEf.js";import{i as kt}from"../chunks/TJn6xDN9.js";import{p as wt,g as e,o as Ct,l as Q,h as Et,f as z,i as _,j as Rt,a as be,b as F,c as Ut,m as c,n as Lt,$ as Pt,d as o,v as Be,s as r,t as Ue,u as O,k as s,w as u,r as i,q as _e,e as ge,x as Se,z as j}from"../chunks/DniTuB_0.js";import{i as me,s as Mt,a as Tt}from"../chunks/DbNhg6mG.js";import{h as At,r as x,c as Ve,s as Oe,g as oe}from"../chunks/CKHGi7RD.js";import{b as h,a as We}from"../chunks/CCQwxxp9.js";import{p as Ke}from"../chunks/D4Caz1gY.js";import{P as $t}from"../chunks/DCRHjgMG.js";import{F as Bt}from"../chunks/BhGOQVom.js";import{A as Je}from"../chunks/DqVlvb4K.js";import{e as Dt,a as Qe}from"../chunks/Dlk7qPpN.js";import{t as fe}from"../chunks/CBJzOE8U.js";import{g as De,c as Gt,a as It,p as Ft}from"../chunks/YbkgTiK_.js";import{e as Ge}from"../chunks/BZiHL9L3.js";import{D as jt,G as Ie,A as zt}from"../chunks/DSa_5ZRu.js";import"../chunks/Bgk7vDU7.js";import{E as qt}from"../chunks/C_6p2WjA.js";import{T as Le}from"../chunks/IQoiABaf.js";var Ht=z('<div class="flex items-center justify-between"><div class="flex-1 min-w-0"><div class="block"><p class="text-sm font-medium text-gray-900 dark:text-white truncate"> </p> <p class="text-sm text-gray-500 dark:text-gray-400 truncate mt-1"> </p> <div class="flex items-center mt-2"><!> <span class="ml-2 text-xs text-gray-500 dark:text-gray-400 capitalize"> </span></div></div></div> <div class="flex space-x-2 ml-4"><!> <!></div></div>'),Nt=z('<div><label for="api_base_url" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">API Base URL <span class="text-red-500">*</span></label> <input type="url" id="api_base_url" required autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="https://api.github.com or https://github.example.com/api/v3"/></div> <div><label for="upload_base_url" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Upload Base URL</label> <input type="url" id="upload_base_url" autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="https://uploads.github.com"/></div>',1),St=z('<div><label for="api_base_url" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">API Base URL <span class="text-xs text-gray-500">(optional)</span></label> <input type="url" id="api_base_url" autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="https://gitea.example.com/api/v1 (leave empty to use Base URL)"/> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">If empty, Base URL will be used as API Base URL</p></div> <div><div class="flex items-center mb-1"><label for="tools_metadata_url" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Tools Metadata URL <span class="text-xs text-gray-500">(optional)</span></label> <div class="ml-2"><!></div></div> <input type="url" id="tools_metadata_url" autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="https://gitea.com/api/v1/repos/gitea/act_runner/releases"/> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Leave empty to use default Gitea releases URL</p></div> <div class="flex items-center"><input id="use_internal_tools_metadata" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="use_internal_tools_metadata" class="ml-2 block text-sm font-medium text-gray-700 dark:text-gray-300">Use Internal Tools Metadata</label> <div class="ml-2"><!></div></div>',1),Vt=z('<div class="fixed inset-0 flex items-center justify-center z-50" role="dialog" aria-modal="true"><button class="fixed inset-0 w-full h-full bg-black/30 dark:bg-black/50 cursor-default" aria-label="Close modal"></button> <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-screen overflow-y-auto relative z-10" role="document"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"><div><h3 class="text-lg font-semibold text-gray-900 dark:text-white">Add Endpoint</h3> <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Connect to GitHub or Gitea for runner management</p></div> <button class="text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-100 cursor-pointer" aria-label="Close modal"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="p-6 space-y-4"><!> <div><label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Endpoint Name <span class="text-red-500">*</span></label> <input type="text" id="name" required autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"/></div> <div><label for="description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description</label> <textarea id="description" rows="2" autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="Brief description of this endpoint"></textarea></div> <div><label for="base_url" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Base URL <span class="text-red-500">*</span></label> <input type="url" id="base_url" required autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"/></div> <!> <div class="space-y-3 border-t border-gray-200 dark:border-gray-700 pt-4"><label for="ca_cert_file" class="block text-sm font-medium text-gray-700 dark:text-gray-300">CA Certificate Bundle (Optional)</label> <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center hover:border-blue-400 dark:hover:border-blue-400 transition-colors"><input type="file" id="ca_cert_file" accept=".pem,.crt,.cer,.cert" class="hidden"/> <div class="space-y-2"><svg class="mx-auto h-8 w-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm text-gray-600 dark:text-gray-400"><button type="button" class="text-gray-900 dark:text-white hover:text-gray-700 dark:hover:text-gray-300 hover:underline cursor-pointer">Choose a file</button> or drag and drop</p> <p class="text-xs text-gray-500 dark:text-gray-400">PEM, CRT, CER, CERT files only</p></div></div></div> <div class="flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 cursor-pointer">Cancel</button> <button type="submit">Create Endpoint</button></div></form></div></div>'),Ot=z('<div><label for="edit_api_base_url" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">API Base URL <span class="text-red-500">*</span></label> <input type="url" id="edit_api_base_url" required autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"/></div> <div><label for="edit_upload_base_url" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Upload Base URL</label> <input type="url" id="edit_upload_base_url" autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"/></div>',1),Wt=z('<div><label for="edit_api_base_url" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">API Base URL <span class="text-xs text-gray-500">(optional)</span></label> <input type="url" id="edit_api_base_url" autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"/> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">If empty, Base URL will be used as API Base URL</p></div> <div><div class="flex items-center mb-1"><label for="edit_tools_metadata_url" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Tools Metadata URL <span class="text-xs text-gray-500">(optional)</span></label> <div class="ml-2"><!></div></div> <input type="url" id="edit_tools_metadata_url" autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="https://gitea.com/api/v1/repos/gitea/act_runner/releases"/> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Leave empty to use default Gitea releases URL</p></div> <div class="flex items-center"><input id="edit_use_internal_tools_metadata" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="edit_use_internal_tools_metadata" class="ml-2 block text-sm font-medium text-gray-700 dark:text-gray-300">Use Internal Tools Metadata</label> <div class="ml-2"><!></div></div>',1),Kt=z('<div class="fixed inset-0 flex items-center justify-center z-50" role="dialog" aria-modal="true"><button class="fixed inset-0 w-full h-full bg-black/30 dark:bg-black/50 cursor-default" aria-label="Close modal"></button> <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-screen overflow-y-auto relative z-10" role="document"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"><div><h3 class="text-lg font-semibold text-gray-900 dark:text-white"> </h3> <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Update endpoint configuration</p></div> <button class="text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-100 cursor-pointer" aria-label="Close modal"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="p-6 space-y-4"><div><label for="edit_name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Endpoint Name <span class="text-red-500">*</span></label> <input type="text" id="edit_name" required autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"/></div> <div><label for="edit_description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description</label> <textarea id="edit_description" rows="2" autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"></textarea></div> <div><label for="edit_base_url" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Base URL <span class="text-red-500">*</span></label> <input type="url" id="edit_base_url" required autocomplete="off" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"/></div> <!> <div class="space-y-3 border-t border-gray-200 dark:border-gray-700 pt-4"><label for="edit_ca_cert_file" class="block text-sm font-medium text-gray-700 dark:text-gray-300">CA Certificate Bundle (Optional)</label> <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center hover:border-blue-400 dark:hover:border-blue-400 transition-colors"><input type="file" id="edit_ca_cert_file" accept=".pem,.crt,.cer,.cert" class="hidden"/> <div class="space-y-2"><svg class="mx-auto h-8 w-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm text-gray-600 dark:text-gray-400"><button type="button" class="text-gray-900 dark:text-white hover:text-gray-700 dark:hover:text-gray-300 hover:underline cursor-pointer">Choose a file</button> or drag and drop</p> <p class="text-xs text-gray-500 dark:text-gray-400">PEM, CRT, CER, CERT files only</p></div></div></div> <div class="flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 cursor-pointer">Cancel</button> <button type="submit">Update Endpoint</button></div></form></div></div>'),Jt=z('<div class="fixed inset-0 flex items-center justify-center z-50" role="dialog" aria-modal="true"><button class="fixed inset-0 w-full h-full bg-black/30 dark:bg-black/50 cursor-default" aria-label="Close modal"></button> <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-xl w-full mx-4 relative z-10" role="document"><div class="px-6 py-4"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div> <div class="ml-3"><h3 class="text-lg font-medium text-gray-900 dark:text-white">Delete Endpoint</h3> <p class="mt-2 text-sm text-gray-500 dark:text-gray-300"> </p></div></div></div> <div class="px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 cursor-pointer">Cancel</button> <button type="button" class="px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 cursor-pointer">Delete</button></div></div></div>'),Qt=z('<div class="space-y-6"><!> <!></div> <!> <!> <!>',1);function ga(Xe,Ye){wt(Ye,!1);const[Ze,et]=Mt(),W=()=>Tt(Dt,"$eagerCache",Ze),Pe=c(),K=c(),Fe=c(),ie=c();let ve=c(!0),X=c([]),ye=c(""),xe=c(""),$=c(1),Y=c(25),Z=c(1),he=c(!1),ke=c(!1),we=c(!1),q=c("github"),g=c(null),M=c(null),t=c({name:"",description:"",endpoint_type:"",base_url:"",api_base_url:"",upload_base_url:"",ca_cert_bundle:"",tools_metadata_url:"",use_internal_tools_metadata:!1}),m={...e(t)};Ct(async()=>{try{s(ve,!0);const a=await Qe.getEndpoints();a&&Array.isArray(a)&&s(X,a)}catch(a){console.error("Failed to load endpoints:",a),s(ye,a instanceof Error?a.message:"Failed to load endpoints")}finally{s(ve,!1)}});async function tt(){try{await Qe.retryResource("endpoints")}catch(a){console.error("Retry failed:",a)}}const at=[{key:"name",title:"Name",cellComponent:Ie,cellProps:{field:"name"}},{key:"description",title:"Description",cellComponent:Ie,cellProps:{field:"description"}},{key:"api_url",title:"API URL",cellComponent:Ie,cellProps:{field:"api_base_url",fallbackField:"base_url"}},{key:"forge_type",title:"Forge Type",cellComponent:qt},{key:"actions",title:"Actions",align:"right",cellComponent:zt}],rt={entityType:"endpoint",primaryText:{field:"name",isClickable:!1},secondaryText:{field:"description"},customInfo:[{icon:a=>De(a?.endpoint_type||"unknown"),text:a=>a?.api_base_url||"Unknown"}],actions:[{type:"edit",handler:a=>Me(a)},{type:"delete",handler:a=>Te(a)}]};function ot(a){s(xe,a.detail.term),s($,1)}function it(a){s($,a.detail.page)}function st(a){const l=Gt(a.detail.perPage);s(Y,l.newPerPage),s($,l.newCurrentPage)}function lt(a){Me(a.detail.item)}function nt(a){Te(a.detail.item)}function dt(){s(q,"github"),Ae(),u(t,e(t).endpoint_type="github"),s(he,!0)}function ut(a){s(q,a.detail),Ae(),u(t,e(t).endpoint_type=a.detail)}function Me(a){s(g,a),s(t,{name:a.name||"",description:a.description||"",endpoint_type:a.endpoint_type||"",base_url:a.base_url||"",api_base_url:a.api_base_url||"",upload_base_url:a.upload_base_url||"",ca_cert_bundle:typeof a.ca_cert_bundle=="string"?a.ca_cert_bundle:"",tools_metadata_url:a.tools_metadata_url||"",use_internal_tools_metadata:a.use_internal_tools_metadata||!1}),m={...e(t)},s(ke,!0)}function Te(a){s(M,a),s(we,!0)}function Ae(){s(t,{name:"",description:"",endpoint_type:"",base_url:"",api_base_url:"",upload_base_url:"",ca_cert_bundle:"",tools_metadata_url:"",use_internal_tools_metadata:!1}),m={...e(t)}}function ct(a){a.key==="Escape"&&(e(he)||e(ke)||e(we))&&k()}function k(){s(he,!1),s(ke,!1),s(we,!1),s(q,"github"),s(g,null),s(M,null),Ae()}function pt(){const a={};if(e(t).description!==m.description&&(e(t).description.trim()!==""||m.description!=="")&&(a.description=e(t).description.trim()),e(t).base_url!==m.base_url&&e(t).base_url.trim()!==""&&(a.base_url=e(t).base_url.trim()),e(t).api_base_url!==m.api_base_url&&(e(t).api_base_url.trim()!==""||m.api_base_url!=="")&&(a.api_base_url=e(t).api_base_url.trim()),e(g)?.endpoint_type==="github"&&e(t).upload_base_url!==m.upload_base_url&&(e(t).upload_base_url.trim()!==""||m.upload_base_url!=="")&&(a.upload_base_url=e(t).upload_base_url.trim()),e(t).ca_cert_bundle!==m.ca_cert_bundle)if(e(t).ca_cert_bundle!=="")try{const l=atob(e(t).ca_cert_bundle);a.ca_cert_bundle=Array.from(l,p=>p.charCodeAt(0))}catch{m.ca_cert_bundle!==""&&(a.ca_cert_bundle=[])}else m.ca_cert_bundle!==""&&(a.ca_cert_bundle=[]);return e(g)?.endpoint_type==="gitea"&&(e(t).tools_metadata_url!==m.tools_metadata_url&&(a.tools_metadata_url=e(t).tools_metadata_url.trim()),e(t).use_internal_tools_metadata!==m.use_internal_tools_metadata&&(a.use_internal_tools_metadata=e(t).use_internal_tools_metadata)),a}async function bt(){try{const a={name:e(t).name,description:e(t).description,endpoint_type:e(t).endpoint_type,base_url:e(t).base_url,api_base_url:e(t).api_base_url,upload_base_url:e(t).upload_base_url};if(e(t).endpoint_type==="gitea"&&(e(t).tools_metadata_url.trim()!==""&&(a.tools_metadata_url=e(t).tools_metadata_url.trim()),a.use_internal_tools_metadata=e(t).use_internal_tools_metadata),e(t).ca_cert_bundle&&e(t).ca_cert_bundle.trim()!=="")try{const l=atob(e(t).ca_cert_bundle);a.ca_cert_bundle=Array.from(l,p=>p.charCodeAt(0))}catch{}e(t).endpoint_type==="github"?await oe.createGithubEndpoint(a):await oe.createGiteaEndpoint(a),fe.success("Endpoint Created",`Endpoint ${e(t).name} has been created successfully.`),k()}catch(a){s(ye,Ge(a))}}async function _t(){if(e(g))try{const a=pt();if(Object.keys(a).length===0){fe.info("No Changes","No fields were modified."),k();return}e(g).endpoint_type==="github"?await oe.updateGithubEndpoint(e(g).name,a):await oe.updateGiteaEndpoint(e(g).name,a),fe.success("Endpoint Updated",`Endpoint ${e(g).name} has been updated successfully.`),k()}catch(a){s(ye,Ge(a))}}async function gt(){if(e(M)){try{e(M).endpoint_type==="github"?await oe.deleteGithubEndpoint(e(M).name):await oe.deleteGiteaEndpoint(e(M).name),fe.success("Endpoint Deleted",`Endpoint ${e(M).name} has been deleted successfully.`)}catch(a){const l=Ge(a);fe.error("Delete Failed",l)}k()}}function je(a){const p=a.target.files?.[0];if(!p){u(t,e(t).ca_cert_bundle="");return}const w=new FileReader;w.onload=n=>{const f=n.target?.result;u(t,e(t).ca_cert_bundle=btoa(f))},w.readAsText(p)}Q(()=>(e(X),W()),()=>{(!e(X).length||W().loaded.endpoints)&&s(X,W().endpoints)}),Q(()=>W(),()=>{s(ve,W().loading.endpoints)}),Q(()=>W(),()=>{s(Pe,W().errorMessages.endpoints)}),Q(()=>(e(X),e(xe)),()=>{s(K,It(e(X),e(xe)))}),Q(()=>(e(Z),e(K),e(Y),e($)),()=>{s(Z,Math.ceil(e(K).length/e(Y))),e($)>e(Z)&&e(Z)>0&&s($,e(Z))}),Q(()=>(e(K),e($),e(Y)),()=>{s(Fe,Ft(e(K),e($),e(Y)))}),Q(()=>e(t),()=>{s(ie,!(!e(t).name||!e(t).base_url||e(t).endpoint_type==="github"&&!e(t).api_base_url))}),Et(),kt();var ze=Qt();_("keydown",Lt,ct),Rt(a=>{Pt.title="Endpoints - GARM"});var $e=be(ze),qe=o($e);$t(qe,{title:"Endpoints",description:"Manage your GitHub and Gitea endpoints for runner management.",actionLabel:"Add Endpoint",$$events:{action:dt}});var mt=r(qe,2);{let a=Be(()=>e(Pe)||e(ye)),l=Be(()=>!!e(Pe));jt(mt,{get columns(){return at},get data(){return e(Fe)},get loading(){return e(ve)},get error(){return e(a)},get searchTerm(){return e(xe)},searchPlaceholder:"Search endpoints by name, description, or URL...",get currentPage(){return e($)},get perPage(){return e(Y)},get totalPages(){return e(Z)},get totalItems(){return e(K),O(()=>e(K).length)},itemName:"endpoints",emptyIconType:"settings",get showRetry(){return e(l)},get mobileCardConfig(){return rt},$$events:{search:ot,pageChange:it,perPageChange:st,retry:tt,edit:lt,delete:nt},$$slots:{"mobile-card":(p,w)=>{const n=Be(()=>w.item);var f=Ht(),C=o(f),T=o(C),L=o(T),R=o(L,!0);i(L);var v=r(L,2),B=o(v,!0);i(v);var A=r(v,2),D=o(A);At(D,()=>(_e(De),_e(e(n)),O(()=>De(e(n).endpoint_type||"","w-5 h-5"))));var G=r(D,2),ee=o(G,!0);i(G),i(A),i(T),i(C);var J=r(C,2),H=o(J);Je(H,{action:"edit",size:"sm",title:"Edit endpoint",ariaLabel:"Edit endpoint",$$events:{click:()=>Me(e(n))}});var te=r(H,2);Je(te,{action:"delete",size:"sm",title:"Delete endpoint",ariaLabel:"Delete endpoint",$$events:{click:()=>Te(e(n))}}),i(J),i(f),Ue(()=>{ge(R,(_e(e(n)),O(()=>e(n).name))),ge(B,(_e(e(n)),O(()=>e(n).description))),ge(ee,(_e(e(n)),O(()=>e(n).endpoint_type)))}),F(p,f)}}})}i($e);var He=r($e,2);{var ft=a=>{var l=Vt(),p=o(l),w=r(p,2),n=o(w),f=r(o(n),2);i(n);var C=r(n,2),T=o(C);Bt(T,{get selectedForgeType(){return e(q)},set selectedForgeType(b){s(q,b)},$$events:{select:ut},$$legacy:!0});var L=r(T,2),R=r(o(L),2);x(R),i(L);var v=r(L,2),B=r(o(v),2);Se(B),i(v);var A=r(v,2),D=r(o(A),2);x(D),i(A);var G=r(A,2);{var ee=b=>{var N=Nt(),d=be(N),P=r(o(d),2);x(P),i(d);var y=r(d,2),U=r(o(y),2);x(U),i(y),h(P,()=>e(t).api_base_url,E=>u(t,e(t).api_base_url=E)),h(U,()=>e(t).upload_base_url,E=>u(t,e(t).upload_base_url=E)),F(b,N)},J=b=>{var N=St(),d=be(N),P=r(o(d),2);x(P),j(2),i(d);var y=r(d,2),U=o(y),E=r(o(U),2),S=o(E);Le(S,{title:"Tools Metadata URL",content:"URL where GARM checks for act_runner binary downloads and release information. Defaults to https://gitea.com/api/v1/repos/gitea/act_runner/releases if not specified. Use a custom URL to point to your own tools repository or mirror.",position:"top",width:"w-80"}),i(E),i(U);var I=r(U,2);x(I),j(2),i(y);var Re=r(y,2),re=o(Re);x(re);var ue=r(re,4),ce=o(ue);Le(ce,{title:"Internal Tools Metadata",content:"When enabled, GARM uses built-in URLs for nightly act_runner binaries instead of calling the external tools metadata URL. This is useful in air-gapped environments where runner images already include the binaries and don't need to download them.",position:"top",width:"w-80"}),i(ue),i(Re),h(P,()=>e(t).api_base_url,V=>u(t,e(t).api_base_url=V)),h(I,()=>e(t).tools_metadata_url,V=>u(t,e(t).tools_metadata_url=V)),We(re,()=>e(t).use_internal_tools_metadata,V=>u(t,e(t).use_internal_tools_metadata=V)),F(b,N)};me(G,b=>{e(q)==="github"?b(ee):b(J,!1)})}var H=r(G,2),te=r(o(H),2),ae=o(te),se=r(ae,2),le=r(o(se),2),Ce=o(le);j(),i(le),j(2),i(se),i(te),i(H);var ne=r(H,2),Ee=o(ne),de=r(Ee,2);i(ne),i(C),i(w),i(l),Ue(()=>{Ve(R,"placeholder",e(q)==="github"?"e.g., github-enterprise or github-com":"e.g., gitea-main or my-gitea"),Ve(D,"placeholder",e(q)==="github"?"https://github.com or https://github.example.com":"https://gitea.example.com"),de.disabled=!e(ie),Oe(de,1,`px-4 py-2 text-sm font-medium text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors
							${e(ie)?"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 cursor-pointer":"bg-gray-400 cursor-not-allowed"}`)}),_("click",p,k),_("click",f,k),h(R,()=>e(t).name,b=>u(t,e(t).name=b)),h(B,()=>e(t).description,b=>u(t,e(t).description=b)),h(D,()=>e(t).base_url,b=>u(t,e(t).base_url=b)),_("change",ae,je),_("click",Ce,()=>document.getElementById("ca_cert_file")?.click()),_("click",Ee,k),_("submit",C,Ke(bt)),F(a,l)};me(He,a=>{e(he)&&a(ft)})}var Ne=r(He,2);{var vt=a=>{var l=Kt(),p=o(l),w=r(p,2),n=o(w),f=o(n),C=o(f),T=o(C);i(C),j(2),i(f);var L=r(f,2);i(n);var R=r(n,2),v=o(R),B=r(o(v),2);x(B),i(v);var A=r(v,2),D=r(o(A),2);Se(D),i(A);var G=r(A,2),ee=r(o(G),2);x(ee),i(G);var J=r(G,2);{var H=d=>{var P=Ot(),y=be(P),U=r(o(y),2);x(U),i(y);var E=r(y,2),S=r(o(E),2);x(S),i(E),h(U,()=>e(t).api_base_url,I=>u(t,e(t).api_base_url=I)),h(S,()=>e(t).upload_base_url,I=>u(t,e(t).upload_base_url=I)),F(d,P)},te=d=>{var P=Wt(),y=be(P),U=r(o(y),2);x(U),j(2),i(y);var E=r(y,2),S=o(E),I=r(o(S),2),Re=o(I);Le(Re,{title:"Tools Metadata URL",content:"URL where GARM checks for act_runner binary downloads and release information. Defaults to https://gitea.com/api/v1/repos/gitea/act_runner/releases if not specified. Use a custom URL to point to your own tools repository or mirror.",position:"top",width:"w-80"}),i(I),i(S);var re=r(S,2);x(re),j(2),i(E);var ue=r(E,2),ce=o(ue);x(ce);var V=r(ce,4),ht=o(V);Le(ht,{title:"Internal Tools Metadata",content:"When enabled, GARM uses built-in URLs for nightly act_runner binaries instead of calling the external tools metadata URL. This is useful in air-gapped environments where runner images already include the binaries and don't need to download them.",position:"top",width:"w-80"}),i(V),i(ue),h(U,()=>e(t).api_base_url,pe=>u(t,e(t).api_base_url=pe)),h(re,()=>e(t).tools_metadata_url,pe=>u(t,e(t).tools_metadata_url=pe)),We(ce,()=>e(t).use_internal_tools_metadata,pe=>u(t,e(t).use_internal_tools_metadata=pe)),F(d,P)};me(J,d=>{e(g),O(()=>e(g).endpoint_type==="github")?d(H):d(te,!1)})}var ae=r(J,2),se=r(o(ae),2),le=o(se),Ce=r(le,2),ne=r(o(Ce),2),Ee=o(ne);j(),i(ne),j(2),i(Ce),i(se),i(ae);var de=r(ae,2),b=o(de),N=r(b,2);i(de),i(R),i(w),i(l),Ue(()=>{ge(T,`Edit ${e(g),O(()=>e(g).endpoint_type==="github"?"GitHub":"Gitea")??""} Endpoint`),N.disabled=!e(ie),Oe(N,1,`px-4 py-2 text-sm font-medium text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors
							${e(ie)?"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 cursor-pointer":"bg-gray-400 cursor-not-allowed"}`)}),_("click",p,k),_("click",L,k),h(B,()=>e(t).name,d=>u(t,e(t).name=d)),h(D,()=>e(t).description,d=>u(t,e(t).description=d)),h(ee,()=>e(t).base_url,d=>u(t,e(t).base_url=d)),_("change",le,je),_("click",Ee,()=>document.getElementById("edit_ca_cert_file")?.click()),_("click",b,k),_("submit",R,Ke(_t)),F(a,l)};me(Ne,a=>{e(ke)&&e(g)&&a(vt)})}var yt=r(Ne,2);{var xt=a=>{var l=Jt(),p=o(l),w=r(p,2),n=o(w),f=o(n),C=r(o(f),2),T=r(o(C),2),L=o(T);i(T),i(C),i(f),i(n);var R=r(n,2),v=o(R),B=r(v,2);i(R),i(w),i(l),Ue(()=>ge(L,`Are you sure you want to delete the endpoint "${e(M),O(()=>e(M).name)??""}"? This action cannot be undone.`)),_("click",p,k),_("click",v,k),_("click",B,gt),F(a,l)};me(yt,a=>{e(we)&&e(M)&&a(xt)})}F(Xe,ze),Ut(),et()}export{ga as component};
