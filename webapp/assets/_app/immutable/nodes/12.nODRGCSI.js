import{c as _t,a as K,e as I,b as x,l as kt,t as se,f as ne,g as wt,s as T,r as gt}from"../chunks/CxOx-TIJ.js";import{i as $t}from"../chunks/3NxSoY2_.js";import{p as Pt,B as At,l as Ue,h as S,b as Nt,d as f,g as e,e as We,c as n,s as o,t as H,a as Tt,m,w as G,F as B,j as r,i as v,r as l,v as Rt,o as Lt,x as Ht,f as Gt,n as F,k as L}from"../chunks/DzFKsO_V.js";import{p as Te,i as Fe}from"../chunks/B_jyf0qs.js";import{e as mt,i as ft}from"../chunks/CdXRaxkX.js";import{w as z}from"../chunks/DoJxysSt.js";import{B as q,b as qt,g as Ye,r as Ze,d as Je,k as Kt,s as Vt}from"../chunks/BguOOs3x.js";import{b as je}from"../chunks/BVM1034P.js";import{p as vt}from"../chunks/CdEA5IGF.js";import{l as Xt}from"../chunks/BAcG6-Ep.js";import"../chunks/BzzAh3Be.js";import"../chunks/C14okzlM.js";import{P as Wt}from"../chunks/DTko0dwG.js";import"../chunks/Ct5kWObc.js";import{D as Yt,E as Zt,G as bt,T as Jt,A as Qt}from"../chunks/C2FKJqnN.js";import{M as ht}from"../chunks/Pgjt70l7.js";import{t as Q}from"../chunks/li_-Mkq2.js";import{e as Ie}from"../chunks/BZiHL9L3.js";import{D as ea}from"../chunks/DL1RlOO9.js";import{f as xt,a as yt}from"../chunks/aK-A9Gop.js";import{w as ta}from"../chunks/DSHGoHxX.js";P[B]="src/lib/components/BackendPagination.svelte";var aa=K(wt('<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>'),P[B],[[110,4,[[111,5]]]]),ra=K(wt('<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>'),P[B],[[123,4,[[124,5]]]]),oa=K(ne('<div class="flex items-center justify-between border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 px-4 py-3 sm:px-6"><div class="flex flex-1 justify-between sm:hidden"><!> <!></div> <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"><div class="flex items-center gap-4"><p class="text-sm text-gray-700 dark:text-gray-300">Showing <span class="font-medium"> </span> to <span class="font-medium"> </span> of <span class="font-medium"> </span> </p> <div class="flex items-center gap-2"><label for="page-size" class="text-sm text-gray-700 dark:text-gray-300">Show:</label> <select id="page-size" class="rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white py-1 pl-2 pr-8 text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"><option>10</option><option>25</option><option>50</option><option>100</option></select></div></div> <div class="flex items-center gap-2"><!> <span class="text-sm text-gray-700 dark:text-gray-300">Page <span class="font-medium"> </span> of <span class="font-medium"> </span></span> <!></div></div></div>'),P[B],[[55,0,[[56,1],[74,1,[[75,2,[[76,3,[[78,4],[80,4],[82,4]]],[85,3,[[86,4],[89,4,[[96,5],[97,5],[98,5],[99,5]]]]]]],[103,2,[[114,3,[[115,9],[115,59]]]]]]]]]]);function P(Qe,V){_t(new.target),Pt(V,!1,P);const j=m(),X=m(),le=m(),E=m();let u=Te(V,"currentPage",8,1),$=Te(V,"totalPages",8,1),W=Te(V,"totalItems",8,0),O=Te(V,"pageSize",12,25),M=Te(V,"loading",8,!1),Ae=Te(V,"itemName",8,"items");const _=At();function fe(){e(X)&&!M()&&(_("pageChange",{page:u()-1}),u()-2>0&&_("prefetch",{page:u()-2}))}function ie(){e(j)&&!M()&&(_("pageChange",{page:u()+1}),u()+2<=$()&&_("prefetch",{page:u()+2}))}function et(w){const C=w.target,re=parseInt(C.value);_("pageSizeChange",{pageSize:re})}Ue(()=>(S(u()),S($())),()=>{r(j,u()<$())}),Ue(()=>S(u()),()=>{r(X,u()>1)}),Ue(()=>(S(W()),S(u()),S(O())),()=>{r(le,v(W(),0)?0:(u()-1)*O()+1)}),Ue(()=>(S(u()),S(O()),S(W())),()=>{r(E,Math.min(u()*O(),W()))}),Ue(()=>(S(u()),S($()),S(M())),()=>{u()<$()&&!M()&&_("prefetch",{page:u()+1})}),Nt(),$t();var ee=oa(),Y=n(ee),te=n(Y);{let w=We(()=>!e(X)||M());f(()=>q(te,{variant:"secondary",size:"sm",get disabled(){return e(w)},$$events:{click:fe},children:z(P,(C,re)=>{G();var R=se("Previous");x(C,R)}),$$slots:{default:!0}}),"component",P,57,2,{componentTag:"Button"})}var k=o(te,2);{let w=We(()=>!e(j)||M());f(()=>q(k,{variant:"secondary",size:"sm",get disabled(){return e(w)},$$events:{click:ie},children:z(P,(C,re)=>{G();var R=se("Next");x(C,R)}),$$slots:{default:!0}}),"component",P,65,2,{componentTag:"Button"})}l(Y);var de=o(Y,2),ae=n(de),i=n(ae),A=o(n(i)),y=n(A,!0);l(A);var g=o(A,2),tt=n(g,!0);l(g);var ve=o(g,2),at=n(ve,!0);l(ve);var N=o(ve);l(i);var Ne=o(i,2),ce=o(n(Ne),2);H(()=>{O(),Rt(()=>{M()})});var Me=n(ce);Me.value=Me.__value=10;var be=o(Me);be.value=be.__value=25;var he=o(be);he.value=he.__value=50;var Re=o(he);Re.value=Re.__value=100,l(ce),l(Ne),l(ae);var Le=o(ae,2),He=n(Le);{let w=We(()=>!e(X)||M());f(()=>q(He,{variant:"secondary",size:"sm",get disabled(){return e(w)},$$events:{click:fe},children:z(P,(C,re)=>{var R=aa();x(C,R)}),$$slots:{default:!0}}),"component",P,104,3,{componentTag:"Button"})}var Ce=o(He,2),De=o(n(Ce)),rt=n(De,!0);l(De);var Ge=o(De,2),ot=n(Ge,!0);l(Ge),l(Ce);var pe=o(Ce,2);{let w=We(()=>!e(j)||M());f(()=>q(pe,{variant:"secondary",size:"sm",get disabled(){return e(w)},$$events:{click:ie},children:z(P,(C,re)=>{var R=ra();x(C,R)}),$$slots:{default:!0}}),"component",P,117,3,{componentTag:"Button"})}return l(Le),l(de),l(ee),H(()=>{T(y,e(le)),T(tt,e(E)),T(at,W()),T(N,` ${Ae()??""}`),ce.disabled=M(),T(rt,u()),T(ot,$())}),qt(ce,O),I("change",ce,et),x(Qe,ee),Tt({...kt()})}d[B]="src/routes/objects/+page.svelte";var sa=K(ne('<div class="mt-3 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"> </div>'),d[B],[[670,2]]),na=K(ne('<span class="inline-flex items-center gap-1 px-2 py-1 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 rounded-md"> <button type="button" class="inline-flex items-center justify-center w-4 h-4 text-blue-700 dark:text-blue-300 hover:text-blue-900 dark:hover:text-blue-100 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800 disabled:opacity-50"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></span>'),d[B],[[758,7,[[760,8,[[767,9,[[768,10]]]]]]]]),la=K(ne('<div><div class="flex justify-between mb-2"><span class="text-sm font-medium text-gray-700 dark:text-gray-300">Uploading...</span> <span class="text-sm font-medium text-gray-700 dark:text-gray-300"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"><div class="bg-blue-600 h-2.5 rounded-full transition-all duration-300"></div></div></div>'),d[B],[[808,5,[[809,6,[[810,7],[811,7]]],[813,6,[[814,7]]]]]]),ia=K(ne('<div class="max-w-2xl w-full p-6"><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Upload New Object</h3> <form class="space-y-4"><div><label for="upload-file-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">File Name</label> <input id="upload-file-name" type="text" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm" placeholder="my-file.bin"/></div> <div><label for="upload-file-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">File</label> <div class="flex items-center gap-3"><input id="upload-file-input" type="file" class="hidden"/> <!> <span class="text-sm text-gray-600 dark:text-gray-400"> </span></div></div> <div><label for="upload-file-tags" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tags</label> <div class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 min-h-[42px] flex flex-wrap gap-2 items-center"><!> <input id="upload-file-tags" type="text" class="flex-1 min-w-[120px] outline-none bg-transparent text-gray-900 dark:text-white text-sm"/></div> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Press Space or Enter to add a tag. Press Backspace to remove the last tag.</p></div> <div><label for="upload-file-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description (optional)</label> <textarea id="upload-file-description" maxlength="8192" rows="3" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm resize-y" placeholder="Add a description for this file..."></textarea> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400"> </p></div> <!> <div class="flex justify-end space-x-3 pt-4"><!> <!></div></form></div>'),d[B],[[708,2,[[709,3],[711,3,[[712,4,[[713,5],[716,5]]],[726,4,[[727,5],[730,5,[[731,6],[746,6]]]]],[752,4,[[753,5],[756,5,[[773,6]]],[784,5]]],[789,4,[[790,5],[793,5],[802,5]]],[819,4]]]]]]),da=K(ne('<span class="inline-flex items-center gap-1 px-2 py-1 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 rounded-md"> <button type="button" class="inline-flex items-center justify-center w-4 h-4 text-blue-700 dark:text-blue-300 hover:text-blue-900 dark:hover:text-blue-100 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></span>'),d[B],[[867,7,[[869,8,[[875,9,[[876,10]]]]]]]]),ca=K(ne('<div class="max-w-2xl w-full p-6"><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Update Object</h3> <form class="space-y-4"><div><label for="update-file-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">File Name</label> <input id="update-file-name" type="text" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"/></div> <div><label for="update-file-tags" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tags</label> <div class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 min-h-[42px] flex flex-wrap gap-2 items-center"><!> <input id="update-file-tags" type="text" class="flex-1 min-w-[120px] outline-none bg-transparent text-gray-900 dark:text-white text-sm"/></div> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Press Space or Enter to add a tag. Press Backspace to remove the last tag.</p></div> <div><label for="update-file-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description (optional)</label> <textarea id="update-file-description" maxlength="8192" rows="3" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm resize-y" placeholder="Add a description for this file..."></textarea> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400"> </p></div> <div class="flex justify-end space-x-3 pt-4"><!> <!></div></form></div>'),d[B],[[845,2,[[846,3],[848,3,[[849,4,[[850,5],[853,5]]],[861,4,[[862,5],[865,5,[[881,6]]],[891,5]]],[896,4,[[897,5],[900,5],[908,5]]],[913,4]]]]]]),pa=K(ne(`<!> <div class="mb-6"><button class="text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 dark:hover:text-indigo-300 flex items-center cursor-pointer"><svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> What's this? <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div> <!> <!> <!> <!>`,1),d[B],[[655,0,[[656,1,[[660,2,[[661,3]]],[664,2,[[665,3]]]]]]]]);function d(Qe,V){_t(new.target),Pt(V,!1,d);let j=m([]),X=m(!0),le=m(""),E=m(""),u=m(1),$=m(25),W=m(1),O=m(0),M=1;const Ae="garm_objects_page_size";let _=new Map;const fe=300*1e3;let ie=null;const et=500;let ee=m(!1),Y=m(!1),te=m(!1),k=m(null),de=m(!1),ae=null,i=m({name:"",file:null,tags:[],description:""}),A=m(0),y=m(!1),g=m({name:"",tags:[],description:""});function tt(t){if(v(t.operation,"create"))N();else if(v(t.operation,"update")){const a=t.payload;r(j,e(j).map(s=>v(s.id,a.id)?a:s))}else if(v(t.operation,"delete")){const a=t.payload.id||t.payload;r(j,e(j).filter(s=>v(s.id,a,!1))),r(O,Math.max(0,e(O)-1))}}Lt(async()=>{const t=localStorage.getItem(Ae);if(t){const a=parseInt(t,10);!isNaN(a)&&a>0&&r($,a)}(await F(N()))(),ae=ta.subscribeToEntity("file_object",["create","update","delete"],tt)}),Ht(()=>{ae&&(ae(),ae=null)});function ve(t,a,s=e($)){return`${t}-${a||"all"}-${s}`}function at(){const t=Date.now();for(const[a,s]of _.entries())t-s.timestamp>fe&&_.delete(a)}async function N(t=!1){try{r(X,!t),r(le,"");const a=e(E).trim()?e(E).trim().replace(/\s+/g,","):void 0,s=ve(e(u),a);if(t){const p=_.get(s);if(p&&Date.now()-p.timestamp<fe){r(j,p.results),r(X,!1);return}}const c=(await F(Ye.listFileObjects(a,e(u),e($))))();r(j,c.results||[]),r(W,c.pages||1),r(O,c.total_count||0),_.set(s,{results:e(j),timestamp:Date.now()}),at()}catch(a){r(le,Ie(a)),Q.add({type:"error",title:"Failed to load objects",message:e(le)})}finally{r(X,!1)}}async function Ne(t){if(t<1||t>e(W))return;const a=e(E).trim()?e(E).trim().replace(/\s+/g,","):void 0,s=ve(t,a),c=_.get(s);if(!(c&&Date.now()-c.timestamp<fe))try{const p=(await F(Ye.listFileObjects(a,t,e($))))();_.set(s,{results:p.results||[],timestamp:Date.now()})}catch(p){console.debug(...Xt("debug","Prefetch failed for page",t,p))}}async function ce(){if(e(k)?.id)try{(await F(Ye.deleteFileObject(e(k).id.toString())))(),Q.add({type:"success",title:"Object deleted",message:`Object "${e(k).name}" has been deleted successfully.`}),r(ee,!1),r(k,null),(await F(N()))()}catch(t){const a=Ie(t);Q.add({type:"error",title:"Failed to delete object",message:a})}}function Me(){r(i,{name:"",file:null,tags:[],description:""}),r(A,0),r(Y,!0)}function be(t){r(k,t),r(g,{name:t.name||"",tags:t.tags||[],description:t.description||""}),r(te,!0)}function he(t){r(k,t),r(ee,!0)}async function Re(){if(!e(i).file||!e(i).name.trim()){Q.add({type:"error",title:"Validation error",message:"Please provide a file name and select a file to upload."});return}try{r(y,!0),r(A,0),new FormData().append("file",e(i).file);const a=new XMLHttpRequest;a.upload.addEventListener("progress",s=>{s.lengthComputable&&r(A,Math.round(s.loaded/s.total*100))}),(await F(new Promise((s,c)=>{a.addEventListener("load",async()=>{a.status>=200&&a.status<300?s():c(new Error(`Upload failed with status ${a.status}`))}),a.addEventListener("error",()=>{c(new Error("Upload failed"))});const p=localStorage.getItem("token"),U=window.location.origin;a.open("POST",`${U}/api/v1/objects/`),p&&a.setRequestHeader("Authorization",`Bearer ${p}`),a.setRequestHeader("X-File-Name",e(i).name),e(i).tags.length>0&&a.setRequestHeader("X-Tags",e(i).tags.join(",")),e(i).description.trim()&&a.setRequestHeader("X-File-Description",e(i).description.trim()),a.send(e(i).file)})))(),Q.add({type:"success",title:"Upload successful",message:`File "${e(i).name}" has been uploaded successfully.`}),r(Y,!1),(await F(N()))()}catch(t){const a=Ie(t);Q.add({type:"error",title:"Upload failed",message:a})}finally{r(y,!1),r(A,0)}}async function Le(){if(e(k)?.id)try{(await F(Ye.updateFileObject(e(k).id.toString(),{name:e(g).name||void 0,tags:e(g).tags,description:e(g).description||void 0})))(),Q.add({type:"success",title:"Object updated",message:"Object has been updated successfully."}),r(te,!1),r(k,null),(await F(N()))()}catch(t){const a=Ie(t);Q.add({type:"error",title:"Failed to update object",message:a})}}async function He(t){try{const s=`${window.location.origin}/api/v1/objects/${t.id}/download`,c=(await F(fetch(s,{method:"HEAD",credentials:"include"})))();if(!c.ok){const U=(await F(c.text()))();throw new Error(U||`Download failed with status ${c.status}`)}const p=document.createElement("a");p.href=s,p.download=t.name||"download",document.body.appendChild(p),p.click(),document.body.removeChild(p)}catch(a){const s=Ie(a);Q.add({type:"error",title:"Download failed",message:s})}}function Ce(t){const a=t.detail.term,s=e(E).length>0,c=a.length>0;r(E,a),ie&&clearTimeout(ie),ie=setTimeout(()=>{!s&&c?(M=e(u),r(u,1)):s&&!c?r(u,M):c&&r(u,1),_.clear(),N(),ie=null},et)}function De(t){r(u,t.detail.page),N(!0)}function rt(t){r($,t.detail.pageSize),localStorage.setItem(Ae,e($).toString()),r(u,1),_.clear(),N()}function Ge(t){Ne(t.detail.page)}function ot(t){const a=t.target;a.files&&a.files[0]&&(L(i,e(i).file=a.files[0]),L(i,e(i).name=a.files[0].name))}let pe=m(""),w=m("");function C(t,a){const c=t.target.value.trim();if((v(t.key," ")||v(t.key,"Enter"))&&c)t.preventDefault(),R(c,a),v(a,"upload")?r(pe,""):r(w,"");else if(v(t.key,"Backspace")&&!c){t.preventDefault();const p=v(a,"upload")?e(i).tags:e(g).tags;p.length>0&&st(p.length-1,a)}}function re(t){const a=v(t,"upload")?e(pe).trim():e(w).trim();a&&(R(a,t),v(t,"upload")?r(pe,""):r(w,""))}function R(t,a){const s=t.trim().toLowerCase();s&&(v(a,"upload")?e(i).tags.includes(s)||L(i,e(i).tags=[...e(i).tags,s]):e(g).tags.includes(s)||L(g,e(g).tags=[...e(g).tags,s]))}function st(t,a){v(a,"upload")?L(i,e(i).tags=e(i).tags.filter((s,c)=>v(c,t,!1))):L(g,e(g).tags=e(g).tags.filter((s,c)=>v(c,t,!1)))}const jt=[{key:"name",title:"Name",cellComponent:Zt,cellProps:{entityType:"object"}},{key:"size",title:"Size",cellComponent:bt,cellProps:{getValue:t=>xt(t.size||0)}},{key:"tags",title:"Tags",cellComponent:Jt,hideOnMobile:!0,cellProps:{tags:[]}},{key:"updated_at",title:"Last Modified",hideOnMobile:!0,cellComponent:bt,cellProps:{getValue:t=>yt(t.updated_at)}},{key:"actions",title:"Actions",align:"right",width:"min",cellComponent:Qt,cellProps:{actions:[{type:"custom",label:"Download",action:"download",title:"Download",ariaLabel:"Download object"},{type:"edit",action:"edit",title:"Update",ariaLabel:"Update object"},{type:"delete",action:"delete",title:"Delete",ariaLabel:"Delete object"}]}}],Mt=`
This feature allows you to use GARM as a simple, private internal-use object storage system. The primary goal of this is to allow users to store provider binaries, agent binaries, runner tools and any other type of files needed for a functional GARM deployment.

Files are stored in the database as blobs. You do not need to configure additional storage.

It is not meant to be used to serve files outside of the needs of GARM and it does not implement S3, nor will it ever.
	`.trim(),Ct={entityType:"repository",primaryText:{field:"name",isClickable:!0,href:"/objects/{id}"},secondaryText:{field:"description",computedValue:t=>{const a=t.description||"No description";return a.length>100?a.substring(0,100)+"...":a}},customInfo:[{icon:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />',text:t=>xt(t.size||0)},{icon:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />',text:t=>yt(t.updated_at)}],actions:[{type:"edit",handler:be},{type:"delete",handler:he}]};$t();var lt=pa(),it=Gt(lt);f(()=>Wt(it,{title:"Object Storage",description:"Manage files stored in GARM's internal object storage",$$slots:{actions:(t,a)=>{f(()=>q(t,{variant:"primary",icon:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />',$$events:{click:Me},children:z(d,(s,c)=>{G();var p=se("Upload New Object");x(s,p)}),$$slots:{default:!0}}),"component",d,644,2,{componentTag:"Button"})}}}),"component",d,639,0,{componentTag:"PageHeader"});var nt=o(it,2),qe=n(nt),Dt=o(n(qe),2);l(qe);var St=o(qe,2);{var zt=t=>{var a=sa(),s=n(a,!0);l(a),H(()=>T(s,Mt)),x(t,a)};f(()=>Fe(St,t=>{e(de)&&t(zt)}),"if",d,669,1)}l(nt);var dt=o(nt,2);f(()=>Yt(dt,{get columns(){return jt},get data(){return e(j)},get loading(){return e(X)},get error(){return e(le)},itemName:"objects",emptyIconType:"document",showSearch:!0,searchType:"backend",searchPlaceholder:"Search by name or tags...",searchHelpText:"",showPagination:!0,get paginationComponent(){return P},get currentPage(){return e(u)},get totalPages(){return e(W)},get totalItems(){return e(O)},get perPage(){return e($)},get mobileCardConfig(){return Ct},get searchTerm(){return e(E)},set searchTerm(t){r(E,t)},$$events:{search:Ce,pageChange:De,pageSizeChange:rt,prefetch:Ge,edit:t=>be(t.detail.item),delete:t=>he(t.detail.item),action:t=>v(t.detail.type,"download")&&He(t.detail.item)},$$legacy:!0}),"component",d,677,0,{componentTag:"DataTable"});var ct=o(dt,2);{var Bt=t=>{f(()=>ht(t,{$$events:{close:()=>!e(y)&&r(Y,!1)},children:z(d,(a,s)=>{var c=ia(),p=o(n(c),2),U=n(p),xe=o(n(U),2);Ze(xe),l(U);var ue=o(U,2),Se=o(n(ue),2),ye=n(Se),oe=o(ye,2);f(()=>q(oe,{type:"button",variant:"secondary",get disabled(){return e(y)},$$events:{click:()=>document.getElementById("upload-file-input")?.click()},children:z(d,(b,J)=>{G();var D=se("Choose File");x(b,D)}),$$slots:{default:!0}}),"component",d,738,6,{componentTag:"Button"});var _e=o(oe,2),ze=n(_e,!0);l(_e),l(Se),l(ue);var ke=o(ue,2),Ke=o(n(ke),2),Be=n(Ke);f(()=>mt(Be,1,()=>e(i).tags,ft,(b,J,D)=>{var $e=na(),Xe=n($e),Pe=o(Xe);l($e),H(()=>{T(Xe,`${e(J)??""} `),Pe.disabled=e(y),Je(Pe,"aria-label",`Remove tag ${e(J)??""}`)}),I("click",Pe,()=>st(D,"upload")),x(b,$e)}),"each",d,757,6);var Z=o(Be,2);Ze(Z),l(Ke),G(2),l(ke);var Ee=o(ke,2),h=o(n(Ee),2);gt(h);var ge=o(h,2),me=n(ge);l(ge),l(Ee);var we=o(Ee,2);{var Ve=b=>{var J=la(),D=n(J),$e=o(n(D),2),Xe=n($e);l($e),l(D);var Pe=o(D,2),It=n(Pe);l(Pe),l(J),H(()=>{T(Xe,`${e(A)??""}%`),Kt(It,`width: ${e(A)??""}%`)}),x(b,J)};f(()=>Fe(we,b=>{e(y)&&b(Ve)}),"if",d,807,4)}var Oe=o(we,2),ut=n(Oe);f(()=>q(ut,{type:"button",variant:"secondary",get disabled(){return e(y)},$$events:{click:()=>r(Y,!1)},children:z(d,(b,J)=>{G();var D=se("Cancel");x(b,D)}),$$slots:{default:!0}}),"component",d,820,5,{componentTag:"Button"});var Ft=o(ut,2);f(()=>q(Ft,{type:"submit",variant:"primary",get disabled(){return e(y)},get loading(){return e(y)},children:z(d,(b,J)=>{G();var D=se();H(()=>T(D,e(y)?"Uploading...":"Upload")),x(b,D)}),$$slots:{default:!0}}),"component",d,828,5,{componentTag:"Button"}),l(Oe),l(p),l(c),H(()=>{xe.disabled=e(y),ye.disabled=e(y),T(ze,e(i).file?e(i).file.name:"No file chosen"),Z.disabled=e(y),Je(Z,"placeholder",v(e(i).tags.length,0)?"Type and press space to add tags...":""),h.disabled=e(y),T(me,`${e(i).description.length??""} / 8192 characters`)}),je(xe,()=>e(i).name,b=>L(i,e(i).name=b)),I("change",ye,ot),je(Z,()=>e(pe),b=>r(pe,b)),I("keydown",Z,b=>C(b,"upload")),I("blur",Z,()=>re("upload")),je(h,()=>e(i).description,b=>L(i,e(i).description=b)),I("submit",p,vt(Re)),x(a,c)}),$$slots:{default:!0}}),"component",d,707,1,{componentTag:"Modal"})};f(()=>Fe(ct,t=>{e(Y)&&t(Bt)}),"if",d,706,0)}var pt=o(ct,2);{var Et=t=>{f(()=>ht(t,{$$events:{close:()=>r(te,!1)},children:z(d,(a,s)=>{var c=ca(),p=o(n(c),2),U=n(p),xe=o(n(U),2);Ze(xe),l(U);var ue=o(U,2),Se=o(n(ue),2),ye=n(Se);f(()=>mt(ye,1,()=>e(g).tags,ft,(h,ge,me)=>{var we=da(),Ve=n(we),Oe=o(Ve);l(we),H(()=>{T(Ve,`${e(ge)??""} `),Je(Oe,"aria-label",`Remove tag ${e(ge)??""}`)}),I("click",Oe,()=>st(me,"update")),x(h,we)}),"each",d,866,6);var oe=o(ye,2);Ze(oe),l(Se),G(2),l(ue);var _e=o(ue,2),ze=o(n(_e),2);gt(ze);var ke=o(ze,2),Ke=n(ke);l(ke),l(_e);var Be=o(_e,2),Z=n(Be);f(()=>q(Z,{type:"button",variant:"secondary",$$events:{click:()=>r(te,!1)},children:z(d,(h,ge)=>{G();var me=se("Cancel");x(h,me)}),$$slots:{default:!0}}),"component",d,914,5,{componentTag:"Button"});var Ee=o(Z,2);f(()=>q(Ee,{type:"submit",variant:"primary",children:z(d,(h,ge)=>{G();var me=se("Update");x(h,me)}),$$slots:{default:!0}}),"component",d,921,5,{componentTag:"Button"}),l(Be),l(p),l(c),H(()=>{Je(oe,"placeholder",v(e(g).tags.length,0)?"Type and press space to add tags...":""),T(Ke,`${e(g).description.length??""} / 8192 characters`)}),je(xe,()=>e(g).name,h=>L(g,e(g).name=h)),je(oe,()=>e(w),h=>r(w,h)),I("keydown",oe,h=>C(h,"update")),I("blur",oe,()=>re("update")),je(ze,()=>e(g).description,h=>L(g,e(g).description=h)),I("submit",p,vt(Le)),x(a,c)}),$$slots:{default:!0}}),"component",d,844,1,{componentTag:"Modal"})};f(()=>Fe(pt,t=>{e(te)&&e(k)&&t(Et)}),"if",d,843,0)}var Ot=o(pt,2);{var Ut=t=>{f(()=>ea(t,{title:"Delete Object",get message(){return`Are you sure you want to delete the object '${e(k).name??""}'? This action cannot be undone.`},$$events:{confirm:ce,close:()=>{r(ee,!1),r(k,null)}}}),"component",d,935,1,{componentTag:"DeleteModal"})};f(()=>Fe(Ot,t=>{e(ee)&&e(k)&&t(Ut)}),"if",d,934,0)}return H(()=>Vt(Dt,0,`w-4 h-4 ml-1 transform ${e(de)?"rotate-180":""}`)),I("click",qe,()=>r(de,!e(de))),x(Qe,lt),Tt({...kt()})}export{d as component};
