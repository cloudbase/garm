import"../chunks/DsnmJJEf.js";import{i as It}from"../chunks/B3Pzt0F_.js";import{p as jt,g as e,o as Gt,l as Q,a as Ut,f as E,e as f,h as qt,b as Fe,c as $,d as zt,$ as Bt,m as b,s as n,i as St,j as i,k as a,r as o,u,n as ye,q as Le,t as se,v as W,w as tt,x as Lt,y as _,z as X}from"../chunks/D8EpLgQ1.js";import{i as G,s as Nt,a as Kt}from"../chunks/5WA7h8uK.js";import{e as Vt,i as Ht}from"../chunks/u94nIB4-.js";import{h as Rt,r as L,s as Ie,b as Yt,a as Ot,g as ve}from"../chunks/CiE1LlKV.js";import{b as N,a as Jt}from"../chunks/C6k1Q4We.js";import{p as rt}from"../chunks/D4Caz1gY.js";import{P as Qt}from"../chunks/CO4LUyTP.js";import{F as Wt}from"../chunks/CNMHKIIK.js";import{D as Xt,A as at,G as it,a as Zt}from"../chunks/C9DJVOi1.js";import{e as er,a as Ne}from"../chunks/wyaP0EDu.js";import{t as je}from"../chunks/BEkVdVE1.js";import{f as tr,p as rr,g as Ke,B as ot,c as ar}from"../chunks/BGVHQGl-.js";import"../chunks/CoIRRsD9.js";import{E as ir}from"../chunks/CGpPw4EW.js";import{S as or}from"../chunks/BE4wujub.js";var nr=E('<div class="flex items-center justify-between"><div class="flex-1 min-w-0"><div class="block"><p class="text-sm font-medium text-gray-900 dark:text-white truncate"> </p> <p class="text-sm text-gray-500 dark:text-gray-400 truncate mt-1"> </p> <div class="flex items-center mt-2 space-x-3"><div class="flex items-center"><!> <span class="ml-1 text-xs text-gray-500 dark:text-gray-400"> </span></div></div></div></div> <div class="flex items-center space-x-3 ml-4"><!> <div class="flex space-x-2"><!> <!></div></div></div>'),dr=E("<option> </option>"),sr=E('<p class="text-xs text-gray-500 dark:text-gray-400 mt-1"> </p>'),lr=E('<p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Gitea only supports PAT authentication</p>'),cr=E('<div><label for="oauth2_token" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Personal Access Token <span class="text-red-500">*</span></label> <input type="password" id="oauth2_token" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx"/></div>'),ur=E('<div><label for="app_id" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">App ID <span class="text-red-500">*</span></label> <input type="text" id="app_id" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="123456"/></div> <div><label for="installation_id" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">App Installation ID <span class="text-red-500">*</span></label> <input type="text" id="installation_id" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="12345678"/></div> <div><label for="private_key" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Private Key <span class="text-red-500">*</span></label> <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center hover:border-blue-400 dark:hover:border-blue-400 transition-colors"><input type="file" id="private_key" accept=".pem,.key" class="hidden"/> <div class="space-y-2"><svg class="mx-auto h-8 w-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm text-gray-600 dark:text-gray-400"><button type="button" class="text-gray-900 dark:text-white hover:text-gray-700 dark:hover:text-gray-300 hover:underline cursor-pointer">Choose a file</button> or drag and drop</p> <p class="text-xs text-gray-500 dark:text-gray-400">PEM, KEY files only</p></div></div></div>',1),pr=E('<div class="fixed inset-0 flex items-center justify-center z-50" role="dialog" aria-modal="true"><button class="fixed inset-0 w-full h-full bg-black/30 dark:bg-black/50 cursor-default" aria-label="Close modal"></button> <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 max-h-screen overflow-y-auto relative z-10" role="document"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"><div><h3 class="text-lg font-semibold text-gray-900 dark:text-white">Add Credentials</h3> <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Create new authentication credentials</p></div> <button class="text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-100 cursor-pointer" aria-label="Close modal"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="p-6 space-y-4"><!> <div><label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Credentials Name <span class="text-red-500">*</span></label> <input type="text" id="name" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="e.g., my-github-credentials"/></div> <div><label for="description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description <span class="text-red-500">*</span></label> <textarea id="description" rows="2" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="Brief description of these credentials"></textarea></div> <div><label for="endpoint" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Endpoint <span class="text-red-500">*</span></label> <select id="endpoint" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"><option>Select an endpoint</option><!></select> <!></div> <div role="group" aria-labelledby="auth-type-heading"><div id="auth-type-heading" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Authentication Type <span class="text-red-500">*</span></div> <div class="flex space-x-4"><button type="button">PAT</button> <button type="button">App</button></div> <!></div> <!> <!> <div class="flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 cursor-pointer">Cancel</button> <button type="submit">Create Credentials</button></div></form></div></div>'),gr=E('<div><label for="edit_oauth2_token" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">New Personal Access Token <span class="text-red-500">*</span></label> <input type="password" id="edit_oauth2_token" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="Enter new token"/></div>'),br=E('<div><label for="edit_app_id" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">App ID <span class="text-red-500">*</span></label> <input type="text" id="edit_app_id" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="Enter new App ID"/></div> <div><label for="edit_installation_id" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">App Installation ID <span class="text-red-500">*</span></label> <input type="text" id="edit_installation_id" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white" placeholder="Enter new Installation ID"/></div> <div><label for="edit_private_key" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Private Key <span class="text-red-500">*</span></label> <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center hover:border-blue-400 dark:hover:border-blue-400 transition-colors"><input type="file" id="edit_private_key" accept=".pem,.key" class="hidden"/> <div class="space-y-2"><svg class="mx-auto h-8 w-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm text-gray-600 dark:text-gray-400"><button type="button" class="text-gray-900 dark:text-white hover:text-gray-700 dark:hover:text-gray-300 hover:underline cursor-pointer">Choose a new file</button> or drag and drop</p> <p class="text-xs text-gray-500 dark:text-gray-400">PEM, KEY files only. Upload new private key.</p></div></div></div>',1),yr=E("<!> <!>",1),vr=E('<div class="fixed inset-0 flex items-center justify-center z-50" role="dialog" aria-modal="true"><button class="fixed inset-0 w-full h-full bg-black/30 dark:bg-black/50 cursor-default" aria-label="Close modal"></button> <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-screen overflow-y-auto relative z-10" role="document"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"><div><h3 class="text-lg font-semibold text-gray-900 dark:text-white">Edit Credentials</h3> <p class="text-sm text-gray-600 dark:text-gray-400 mt-1"> </p></div> <button class="text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-100 cursor-pointer" aria-label="Close modal"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="p-6 space-y-4"><div><label for="edit_name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Credentials Name <span class="text-red-500">*</span></label> <input type="text" id="edit_name" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"/></div> <div><label for="edit_description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description <span class="text-red-500">*</span></label> <textarea id="edit_description" rows="2" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"></textarea></div> <div><label for="edit-endpoint" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Endpoint</label> <input type="text" id="edit-endpoint" disabled class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"/> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Endpoint cannot be changed after creation</p></div> <div><span class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Authentication Type</span> <div class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-600"><span class="text-sm font-medium text-gray-700 dark:text-gray-300"> </span></div> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Authentication type cannot be changed after creation</p></div> <div class="border-t border-gray-200 dark:border-gray-700 pt-4"><div class="flex items-center"><input id="change_credentials_checkbox" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="change_credentials_checkbox" class="ml-2 block text-sm font-medium text-gray-700 dark:text-gray-300">I want to change credentials</label></div> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Check this box to update authentication credentials</p></div> <!> <div class="flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 cursor-pointer">Cancel</button> <button type="submit">Update Credentials</button></div></form></div></div>'),fr=E('<div class="fixed inset-0 flex items-center justify-center z-50" role="dialog" aria-modal="true"><button class="fixed inset-0 w-full h-full bg-black/30 dark:bg-black/50 cursor-default" aria-label="Close modal"></button> <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-xl w-full mx-4 relative z-10" role="document"><div class="px-6 py-4"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div> <div class="ml-3"><h3 class="text-lg font-medium text-gray-900 dark:text-white">Delete Credentials</h3> <p class="mt-2 text-sm text-gray-500 dark:text-gray-300"> </p></div></div></div> <div class="px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 cursor-pointer">Cancel</button> <button type="button" class="px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 cursor-pointer">Delete</button></div></div></div>'),mr=E('<div class="space-y-6"><!> <!></div> <!> <!> <!>',1);function Ur(nt,dt){jt(dt,!1);const[st,lt]=Nt(),U=()=>Kt(er,"$eagerCache",st),Ge=b(),Z=b(),Ve=b(),Ue=b(),p={PAT:"pat",APP:"app"};let we=b(!0),le=b([]),J=b([]),fe=b(""),Ce=b(""),K=b(1),ce=b(25),ue=b(1),Pe=b(!1),Ae=b(!1),Te=b(!1),D=b(p.PAT),g=b(null),M=b(null),r=b({name:"",description:"",endpoint:"",auth_type:p.PAT,oauth2_token:"",app_id:"",installation_id:"",private_key_bytes:""}),$e={...e(r)},ee=b(!1);function ct(t){t.key==="Escape"&&(e(Pe)||e(Ae)||e(Te))&&P()}Gt(async()=>{try{n(we,!0);const[t,s]=await Promise.all([Ne.getCredentials(),Ne.getEndpoints()]);t&&Array.isArray(t)&&n(le,t),s&&Array.isArray(s)&&n(J,s)}catch(t){console.error("Failed to load credentials:",t),n(fe,t instanceof Error?t.message:"Failed to load credentials")}finally{n(we,!1)}});async function ut(){try{await Ne.retryResource("credentials")}catch(t){console.error("Retry failed:",t)}}async function pt(){He(),n(Pe,!0),n(x,"github")}let x=b("");function gt(t){n(x,t.detail),_(r,e(r).auth_type=p.PAT),n(D,p.PAT)}async function qe(t){n(g,t),n(r,{name:t.name||"",description:t.description||"",endpoint:t.endpoint?.name||"",auth_type:t["auth-type"]||p.PAT,oauth2_token:"",app_id:"",installation_id:"",private_key_bytes:""}),n(D,t["auth-type"]||p.PAT),$e={...e(r)},n(ee,!1),n(Ae,!0)}function ze(t){n(M,t),n(Te,!0)}function He(){n(r,{name:"",description:"",endpoint:"",auth_type:p.PAT,oauth2_token:"",app_id:"",installation_id:"",private_key_bytes:""}),$e={...e(r)},n(D,p.PAT),n(ee,!1)}function P(){n(Pe,!1),n(Ae,!1),n(Te,!1),n(g,null),n(M,null),n(x,""),He()}function Re(t){n(D,t),_(r,e(r).auth_type=t)}function bt(){const t={};if(e(r).name!==$e.name&&e(r).name.trim()!==""&&(t.name=e(r).name.trim()),e(r).description!==$e.description&&e(r).description.trim()!==""&&(t.description=e(r).description.trim()),e(ee)&&e(g))if(e(g)["auth-type"]===p.PAT)e(r).oauth2_token.trim()!==""&&(t.pat={oauth2_token:e(r).oauth2_token.trim()});else{const s={};let y=!1;if(e(r).app_id.trim()!==""&&(s.app_id=parseInt(e(r).app_id.trim()),y=!0),e(r).installation_id.trim()!==""&&(s.installation_id=parseInt(e(r).installation_id.trim()),y=!0),e(r).private_key_bytes!=="")try{const m=atob(e(r).private_key_bytes);s.private_key_bytes=Array.from(m,l=>l.charCodeAt(0)),y=!0}catch{}y&&(t.app=s)}return t}async function yt(){try{if(e(x)==="github")await ve.createGithubCredentials(e(r));else if(e(x)==="gitea")await ve.createGiteaCredentials(e(r));else throw new Error("Please select a forge type");je.success("Credentials Created",`Credentials ${e(r).name} have been created successfully.`),P()}catch(t){n(fe,t instanceof Error?t.message:"Failed to create credentials")}}async function vt(){if(!(!e(g)||!e(g).id))try{const t=bt();if(Object.keys(t).length===0){je.info("No Changes","No fields were modified."),P();return}e(g).forge_type==="github"?await ve.updateGithubCredentials(e(g).id,t):await ve.updateGiteaCredentials(e(g).id,t),je.success("Credentials Updated",`Credentials ${e(g)?.name||"Unknown"} have been updated successfully.`),P()}catch(t){n(fe,t instanceof Error?t.message:"Failed to update credentials")}}async function ft(){if(!(!e(M)||!e(M).id))try{e(M).forge_type==="github"?await ve.deleteGithubCredentials(e(M).id):await ve.deleteGiteaCredentials(e(M).id),je.success("Credentials Deleted",`Credentials ${e(M)?.name||"Unknown"} have been deleted successfully.`),P()}catch(t){n(fe,t instanceof Error?t.message:"Failed to delete credentials")}}function Ye(t){const y=t.target.files?.[0];if(!y){_(r,e(r).private_key_bytes="");return}const m=new FileReader;m.onload=l=>{const h=l.target?.result;_(r,e(r).private_key_bytes=btoa(h))},m.readAsText(y)}function Oe(){return!e(r).name||!e(r).description||!e(r).endpoint?!1:e(r).auth_type===p.PAT?!!e(r).oauth2_token:!!e(r).app_id&&!!e(r).installation_id&&!!e(r).private_key_bytes}function Je(){return!e(r).name.trim()||!e(r).description.trim()?!1:e(ee)&&e(g)?e(g)["auth-type"]===p.PAT?!!e(r).oauth2_token.trim():!!e(r).app_id.trim()&&!!e(r).installation_id.trim()&&!!e(r).private_key_bytes:!0}function mt(t){return e(J).find(y=>y.name===t)?.endpoint_type||""}function xt(t){return mt(t)==="gitea"}const _t=[{key:"name",title:"Name",cellComponent:it,cellProps:{field:"name"}},{key:"description",title:"Description",cellComponent:it,cellProps:{field:"description",type:"description"}},{key:"endpoint",title:"Endpoint",cellComponent:ir},{key:"auth_type",title:"Auth Type",cellComponent:or,cellProps:{statusType:"custom",statusField:"auth-type"}},{key:"actions",title:"Actions",align:"right",cellComponent:Zt}],ht={entityType:"credential",primaryText:{field:"name",isClickable:!1},secondaryText:{field:"description"},customInfo:[{icon:t=>Ke(t?.forge_type||"unknown"),text:t=>t?.endpoint?.name||"Unknown"}],badges:[{type:"auth",field:"auth-type"}],actions:[{type:"edit",handler:t=>qe(t)},{type:"delete",handler:t=>ze(t)}]};function kt(t){n(Ce,t.detail.term),n(K,1)}function wt(t){n(K,t.detail.page)}function Ct(t){const s=ar(t.detail.perPage);n(ce,s.newPerPage),n(K,s.newCurrentPage)}function Pt(t){qe(t.detail.item)}function At(t){ze(t.detail.item)}Q(()=>(e(le),U()),()=>{(!e(le).length||U().loaded.credentials)&&n(le,U().credentials)}),Q(()=>U(),()=>{n(we,U().loading.credentials)}),Q(()=>U(),()=>{n(Ge,U().errorMessages.credentials)}),Q(()=>(e(J),U()),()=>{(!e(J).length||U().loaded.endpoints)&&n(J,U().endpoints)}),Q(()=>(e(le),e(Ce)),()=>{n(Z,tr(e(le),e(Ce)))}),Q(()=>(e(ue),e(Z),e(ce),e(K)),()=>{n(ue,Math.ceil(e(Z).length/e(ce))),e(K)>e(ue)&&e(ue)>0&&n(K,e(ue))}),Q(()=>(e(Z),e(K),e(ce)),()=>{n(Ve,rr(e(Z),e(K),e(ce)))}),Q(()=>(e(x),e(J)),()=>{n(Ue,e(x)?e(J).filter(t=>t.endpoint_type===e(x)):e(J))}),Ut(),It();var Qe=mr();f("keydown",St,ct),qt(t=>{Bt.title="Credentials - GARM"});var Be=Fe(Qe),We=i(Be);Qt(We,{title:"Credentials",description:"Manage authentication credentials for your GitHub and Gitea endpoints.",actionLabel:"Add Credentials",$$events:{action:pt}});var Tt=a(We,2);{let t=Le(()=>e(Ge)||e(fe)),s=Le(()=>!!e(Ge));Xt(Tt,{get columns(){return _t},get data(){return e(Ve)},get loading(){return e(we)},get error(){return e(t)},get searchTerm(){return e(Ce)},searchPlaceholder:"Search credentials by name, description, or endpoint...",get currentPage(){return e(K)},get perPage(){return e(ce)},get totalPages(){return e(ue)},get totalItems(){return e(Z),u(()=>e(Z).length)},itemName:"credentials",emptyIconType:"key",get showRetry(){return e(s)},get mobileCardConfig(){return ht},$$events:{search:kt,pageChange:wt,perPageChange:Ct,retry:ut,edit:Pt,delete:At},$$slots:{"mobile-card":(y,m)=>{const l=Le(()=>m.item);var h=nr(),A=i(h),q=i(A),F=i(q),I=i(F,!0);o(F);var k=a(F,2),V=i(k,!0);o(k);var z=a(k,2),B=i(z),S=i(B);Rt(S,()=>(ye(Ke),ye(e(l)),u(()=>Ke(e(l).forge_type||"unknown"))));var te=a(S,2),re=i(te,!0);o(te),o(B),o(z),o(q),o(A);var ae=a(A,2),H=i(ae);{var ie=j=>{ot(j,{variant:"success",text:"PAT"})},R=j=>{ot(j,{variant:"info",text:"App"})};G(H,j=>{ye(e(l)),u(()=>(e(l)["auth-type"]||"pat")==="pat")?j(ie):j(R,!1)})}var Y=a(H,2),oe=i(Y);at(oe,{action:"edit",size:"sm",title:"Edit credentials",ariaLabel:"Edit credentials",$$events:{click:()=>qe(e(l))}});var pe=a(oe,2);at(pe,{action:"delete",size:"sm",title:"Delete credentials",ariaLabel:"Delete credentials",$$events:{click:()=>ze(e(l))}}),o(Y),o(ae),o(h),se(()=>{W(I,(ye(e(l)),u(()=>e(l).name))),W(V,(ye(e(l)),u(()=>e(l).description))),W(re,(ye(e(l)),u(()=>e(l).endpoint?.name||"Unknown")))}),$(y,h)}}})}o(Be);var Xe=a(Be,2);{var $t=t=>{var s=pr(),y=i(s),m=a(y,2),l=i(m),h=a(i(l),2);o(l);var A=a(l,2),q=i(A);Wt(q,{get selectedForgeType(){return e(x)},set selectedForgeType(d){n(x,d)},$$events:{select:gt},$$legacy:!0});var F=a(q,2),I=a(i(F),2);L(I),o(F);var k=a(F,2),V=a(i(k),2);tt(V),o(k);var z=a(k,2),B=a(i(z),2);se(()=>{e(r),Lt(()=>{e(Ue)})});var S=i(B);S.value=S.__value="";var te=a(S);Vt(te,1,()=>e(Ue),Ht,(d,c)=>{var v=dr(),C=i(v);o(v);var T={};se(()=>{W(C,`${e(c),u(()=>e(c).name)??""} (${e(c),u(()=>e(c).endpoint_type)??""})`),T!==(T=(e(c),u(()=>e(c).name)))&&(v.value=(v.__value=(e(c),u(()=>e(c).name)))??"")}),$(d,v)}),o(B);var re=a(B,2);{var ae=d=>{var c=sr(),v=i(c);o(c),se(()=>W(v,`Showing only ${e(x)??""} endpoints`)),$(d,c)};G(re,d=>{e(x)&&d(ae)})}o(z);var H=a(z,2),ie=a(i(H),2),R=i(ie),Y=a(R,2);o(ie);var oe=a(ie,2);{var pe=d=>{var c=lr();$(d,c)};G(oe,d=>{e(x)==="gitea"&&d(pe)})}o(H);var j=a(H,2);{var Ee=d=>{var c=cr(),v=a(i(c),2);L(v),o(c),N(v,()=>e(r).oauth2_token,C=>_(r,e(r).oauth2_token=C)),$(d,c)};G(j,d=>{e(D),u(()=>e(D)===p.PAT)&&d(Ee)})}var me=a(j,2);{var De=d=>{var c=ur(),v=Fe(c),C=a(i(v),2);L(C),o(v);var T=a(v,2),O=a(i(T),2);L(O),o(T);var de=a(T,2),ge=a(i(de),2),_e=i(ge),he=a(_e,2),ke=a(i(he),2),Me=i(ke);X(),o(ke),X(2),o(he),o(ge),o(de),N(C,()=>e(r).app_id,be=>_(r,e(r).app_id=be)),N(O,()=>e(r).installation_id,be=>_(r,e(r).installation_id=be)),f("change",_e,Ye),f("click",Me,()=>document.getElementById("private_key")?.click()),$(d,c)};G(me,d=>{e(D),u(()=>e(D)===p.APP)&&d(De)})}var w=a(me,2),ne=i(w),xe=a(ne,2);o(w),o(A),o(m),o(s),se((d,c,v)=>{Ie(R,1,`flex-1 py-2 px-4 text-sm font-medium rounded-md border focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer
								${e(D),u(()=>e(D)===p.PAT?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600")??""}
								${d??""}`),Y.disabled=e(x)==="gitea",Ie(Y,1,`flex-1 py-2 px-4 text-sm font-medium rounded-md border focus:outline-none focus:ring-2 focus:ring-blue-500
								${e(D),u(()=>e(D)===p.APP?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600")??""}
								${e(x)==="gitea"?"opacity-50 cursor-not-allowed":"cursor-pointer"}`),xe.disabled=c,Ie(xe,1,`px-4 py-2 text-sm font-medium text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors
							${v??""}`)},[()=>(e(r),u(()=>(e(r).endpoint&&xt(e(r).endpoint),""))),()=>u(()=>!Oe()),()=>u(()=>Oe()?"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 cursor-pointer":"bg-gray-400 cursor-not-allowed")]),f("click",y,P),f("click",h,P),N(I,()=>e(r).name,d=>_(r,e(r).name=d)),N(V,()=>e(r).description,d=>_(r,e(r).description=d)),Yt(B,()=>e(r).endpoint,d=>_(r,e(r).endpoint=d)),f("click",R,()=>Re(p.PAT)),f("click",Y,()=>Re(p.APP)),f("click",ne,P),f("submit",A,rt(yt)),$(t,s)};G(Xe,t=>{e(Pe)&&t($t)})}var Ze=a(Xe,2);{var Et=t=>{var s=vr(),y=i(s),m=a(y,2),l=i(m),h=i(l),A=a(i(h),2),q=i(A);o(A),o(h);var F=a(h,2);o(l);var I=a(l,2),k=i(I),V=a(i(k),2);L(V),o(k);var z=a(k,2),B=a(i(z),2);tt(B),o(z);var S=a(z,2),te=a(i(S),2);L(te),X(2),o(S);var re=a(S,2),ae=a(i(re),2),H=i(ae),ie=i(H,!0);o(H),o(ae),X(2),o(re);var R=a(re,2),Y=i(R),oe=i(Y);L(oe),X(2),o(Y),X(2),o(R);var pe=a(R,2);{var j=w=>{var ne=yr(),xe=Fe(ne);{var d=C=>{var T=gr(),O=a(i(T),2);L(O),o(T),N(O,()=>e(r).oauth2_token,de=>_(r,e(r).oauth2_token=de)),$(C,T)};G(xe,C=>{e(g),u(()=>e(g)["auth-type"]===p.PAT)&&C(d)})}var c=a(xe,2);{var v=C=>{var T=br(),O=Fe(T),de=a(i(O),2);L(de),o(O);var ge=a(O,2),_e=a(i(ge),2);L(_e),o(ge);var he=a(ge,2),ke=a(i(he),2),Me=i(ke),be=a(Me,2),et=a(i(be),2),Ft=i(et);X(),o(et),X(2),o(be),o(ke),o(he),N(de,()=>e(r).app_id,Se=>_(r,e(r).app_id=Se)),N(_e,()=>e(r).installation_id,Se=>_(r,e(r).installation_id=Se)),f("change",Me,Ye),f("click",Ft,()=>document.getElementById("edit_private_key")?.click()),$(C,T)};G(c,C=>{e(g),u(()=>e(g)["auth-type"]===p.APP)&&C(v)})}$(w,ne)};G(pe,w=>{e(ee)&&w(j)})}var Ee=a(pe,2),me=i(Ee),De=a(me,2);o(Ee),o(I),o(m),o(s),se((w,ne)=>{W(q,`Update credentials for ${e(g),u(()=>e(g)?.name||"Unknown")??""}`),Ot(te,(e(r),u(()=>e(r).endpoint))),W(ie,(e(g),u(()=>(e(g)?.["auth-type"]||p.PAT)===p.PAT?"Personal Access Token (PAT)":"GitHub App"))),De.disabled=w,Ie(De,1,`px-4 py-2 text-sm font-medium text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors
							${ne??""}`)},[()=>u(()=>!Je()),()=>u(()=>Je()?"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 cursor-pointer":"bg-gray-400 cursor-not-allowed")]),f("click",y,P),f("click",F,P),N(V,()=>e(r).name,w=>_(r,e(r).name=w)),N(B,()=>e(r).description,w=>_(r,e(r).description=w)),Jt(oe,()=>e(ee),w=>n(ee,w)),f("click",me,P),f("submit",I,rt(vt)),$(t,s)};G(Ze,t=>{e(Ae)&&e(g)&&t(Et)})}var Dt=a(Ze,2);{var Mt=t=>{var s=fr(),y=i(s),m=a(y,2),l=i(m),h=i(l),A=a(i(h),2),q=a(i(A),2),F=i(q);o(q),o(A),o(h),o(l);var I=a(l,2),k=i(I),V=a(k,2);o(I),o(m),o(s),se(()=>W(F,`Are you sure you want to delete the credentials "${e(M),u(()=>e(M)?.name||"Unknown")??""}"? This action cannot be undone.`)),f("click",y,P),f("click",k,P),f("click",V,ft),$(t,s)};G(Dt,t=>{e(Te)&&e(M)&&t(Mt)})}$(nt,Qe),zt(),lt()}export{Ur as component};
