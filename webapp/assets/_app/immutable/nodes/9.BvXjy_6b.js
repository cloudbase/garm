import"../chunks/DsnmJJEf.js";import{i as Te}from"../chunks/B3Pzt0F_.js";import{p as Ue,o as Le,A as Oe,l as Pe,a as Ve,f as g,h as ze,b as O,t as f,c as v,d as Re,g as t,m as M,s as p,u as i,$ as qe,j as s,r as a,k as r,v as c,B as Et,n as b,e as Fe,q as Tt,D as Ut}from"../chunks/D8EpLgQ1.js";import{i as _,s as Ge,a as He}from"../chunks/5WA7h8uK.js";import{w as We,e as Lt,i as Ot}from"../chunks/u94nIB4-.js";import{c as nt,g as Pt,s as Vt}from"../chunks/CiE1LlKV.js";import{b as Je}from"../chunks/BAg1iRPq.js";import{p as Ke}from"../chunks/C96GqrwO.js";import{g as zt}from"../chunks/Bzeu4r49.js";import{b as $}from"../chunks/Cn7-wHKT.js";import{D as Qe}from"../chunks/KQ2xQpA3.js";import{g as P,f as V}from"../chunks/ow_oMtSd.js";import{s as Rt,b as A,B as qt,d as Ft}from"../chunks/BGVHQGl-.js";import{e as Xe}from"../chunks/BZiHL9L3.js";var Ye=g('<div class="bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-800 rounded-md p-4"><div class="flex"><div class="ml-3"><h3 class="text-sm font-medium text-red-800 dark:text-red-200">Error</h3> <div class="mt-2 text-sm text-red-700 dark:text-red-300"> </div></div></div></div>'),Ze=g('<div class="bg-white dark:bg-gray-800 shadow rounded-lg"><div class="px-6 py-4 text-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">Loading instance details...</p></div></div>'),ta=g('<a class="text-gray-900 dark:text-white hover:text-gray-700 dark:hover:text-gray-300 hover:underline"> </a>'),ea=g('<a class="text-gray-900 dark:text-white hover:text-gray-700 dark:hover:text-gray-300 hover:underline"> </a>'),aa=g('<span class="text-gray-400 dark:text-gray-500">-</span>'),sa=g('<div class="flex justify-between"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Updated At:</dt> <dd class="text-sm text-gray-900 dark:text-white"> </dd></div>'),ra=g('<div class="flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded"><span class="font-mono text-gray-900 dark:text-white"> </span> <!></div>'),da=g('<div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">Network Addresses:</dt> <dd class="text-sm space-y-1"></dd></div>'),ia=g('<div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Network Addresses:</dt> <dd class="text-sm text-gray-500 dark:text-gray-400 italic">No addresses available</dd></div>'),na=g('<div class="flex justify-between"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">OS Type:</dt> <dd class="text-sm text-gray-900 dark:text-white"> </dd></div>'),oa=g('<div class="flex justify-between"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">OS Name:</dt> <dd class="text-sm text-gray-900 dark:text-white"> </dd></div>'),la=g('<div class="flex justify-between"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">OS Version:</dt> <dd class="text-sm text-gray-900 dark:text-white"> </dd></div>'),va=g('<div class="flex justify-between"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">OS Architecture:</dt> <dd class="text-sm text-gray-900 dark:text-white"> </dd></div>'),xa=g('<div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"><div class="flex justify-between items-start"><p class="text-sm text-gray-900 dark:text-white flex-1 mr-4"> </p> <div class="flex items-center space-x-2 flex-shrink-0"><!> <span class="text-xs text-gray-500 dark:text-gray-400"><!></span></div></div></div>'),ca=g('<div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6"><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Status Messages</h3> <div class="space-y-3 max-h-96 overflow-y-auto scroll-smooth"></div></div>'),ma=g('<div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6"><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Status Messages</h3> <div class="text-center py-8"><svg class="w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm text-gray-500 dark:text-gray-400">No status messages available</p></div></div>'),ga=g('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"><div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white">Instance Information</h3> <div class="flex items-center space-x-3"><button class="px-4 py-2 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-lg font-medium text-sm cursor-pointer">Delete Instance</button></div></div> <dl class="space-y-3"><div class="flex justify-between"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">ID:</dt> <dd class="text-sm font-mono text-gray-900 dark:text-white break-all"> </dd></div> <div class="flex justify-between"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Name:</dt> <dd class="text-sm text-gray-900 dark:text-white"> </dd></div> <div class="flex justify-between"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Provider ID:</dt> <dd class="text-sm font-mono text-gray-900 dark:text-white break-all"> </dd></div> <div class="flex justify-between"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Provider:</dt> <dd class="text-sm text-gray-900 dark:text-white"> </dd></div> <div class="flex justify-between"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Pool/Scale Set:</dt> <dd class="text-sm font-mono text-gray-900 dark:text-white break-all"><!></dd></div> <div class="flex justify-between"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Agent ID:</dt> <dd class="text-sm font-mono text-gray-900 dark:text-white"> </dd></div> <div class="flex justify-between"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Created At:</dt> <dd class="text-sm text-gray-900 dark:text-white"> </dd></div> <!></dl></div> <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6"><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Status & Network</h3> <dl class="space-y-3"><div class="flex justify-between items-center"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Instance Status:</dt> <dd class="text-sm"><span> </span></dd></div> <div class="flex justify-between items-center"><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Runner Status:</dt> <dd class="text-sm"><span> </span></dd></div> <!> <!> <!> <!> <!></dl></div></div> <!>',1),_a=g('<div class="bg-white dark:bg-gray-800 shadow rounded-lg"><div class="px-6 py-8 text-center text-gray-500 dark:text-gray-400">Instance not found.</div></div>'),ua=g('<div class="space-y-6"><nav class="flex" aria-label="Breadcrumb"><ol class="inline-flex items-center space-x-1 md:space-x-3"><li class="inline-flex items-center"><a class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"><svg class="w-3 h-3 mr-2.5" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg> Instances</a></li> <li><div class="flex items-center"><svg class="w-6 h-6 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg> <span class="text-sm font-medium text-gray-500 dark:text-gray-400 ml-1 md:ml-2"> </span></div></li></ol></nav> <!> <!></div> <!>',1);function $a(Gt,Ht){Ue(Ht,!1);const[Wt,Jt]=Ge(),ot=()=>He(Ke,"$page",Wt),z=M();let e=M(null),R=M(!0),B=M(""),N=M(!1),C=null,E=M();async function Kt(){if(t(z))try{p(R,!0),p(B,""),p(e,await Pt.getInstance(t(z)))}catch(o){p(B,o instanceof Error?o.message:"Failed to load instance")}finally{p(R,!1)}}async function Qt(){if(t(e)){try{await Pt.deleteInstance(t(e).name),zt(`${$}/instances`)}catch(o){p(B,Xe(o))}p(N,!1)}}function Xt(o){if(t(e))if(o.operation==="update"&&o.payload.id===t(e).id){const h=t(e).status_messages?.length||0,j={...t(e),...o.payload},S=j.status_messages?.length||0;p(e,j),S>h&&setTimeout(()=>{Rt(t(E))},100)}else o.operation==="delete"&&(o.payload.id||o.payload)===t(e).id&&zt(`${$}/instances`)}Le(()=>{Kt().then(()=>{t(e)?.status_messages?.length&&setTimeout(()=>{Rt(t(E))},100)}),C=We.subscribeToEntity("instance",["update","delete"],Xt)}),Oe(()=>{C&&(C(),C=null)}),Pe(()=>ot(),()=>{p(z,decodeURIComponent(ot().params.id||""))}),Ve(),Te();var lt=ua();ze(o=>{f(()=>qe.title=`${t(e),i(()=>t(e)?`${t(e).name} - Instance Details`:"Instance Details")??""} - GARM`)});var q=O(lt),F=s(q),vt=s(F),G=s(vt),Yt=s(G);a(G);var xt=r(G,2),ct=s(xt),mt=r(s(ct),2),Zt=s(mt,!0);a(mt),a(ct),a(xt),a(vt),a(F);var gt=r(F,2);{var te=o=>{var h=Ye(),j=s(h),S=s(j),T=r(s(S),2),I=s(T,!0);a(T),a(S),a(j),a(h),f(()=>c(I,t(B))),v(o,h)};_(gt,o=>{t(B)&&o(te)})}var ee=r(gt,2);{var ae=o=>{var h=Ze();v(o,h)},se=o=>{var h=Et(),j=O(h);{var S=I=>{var U=ga(),H=O(U),W=s(H),J=s(W),_t=r(s(J),2),ie=s(_t);a(_t),a(J);var ut=r(J,2),K=s(ut),ft=r(s(K),2),ne=s(ft,!0);a(ft),a(K);var Q=r(K,2),yt=r(s(Q),2),oe=s(yt,!0);a(yt),a(Q);var X=r(Q,2),pt=r(s(X),2),le=s(pt,!0);a(pt),a(X);var Y=r(X,2),ht=r(s(Y),2),ve=s(ht,!0);a(ht),a(Y);var Z=r(Y,2),kt=r(s(Z),2),xe=s(kt);{var ce=d=>{var n=ta(),l=s(n,!0);a(n),f(()=>{nt(n,"href",`${$??""}/pools/${t(e),i(()=>t(e).pool_id)??""}`),c(l,(t(e),i(()=>t(e).pool_id)))}),v(d,n)},me=d=>{var n=Et(),l=O(n);{var m=u=>{var y=ea(),D=s(y,!0);a(y),f(()=>{nt(y,"href",`${$??""}/scalesets/${t(e),i(()=>t(e).scale_set_id)??""}`),c(D,(t(e),i(()=>t(e).scale_set_id)))}),v(u,y)},x=u=>{var y=aa();v(u,y)};_(l,u=>{t(e),i(()=>t(e).scale_set_id)?u(m):u(x,!1)},!0)}v(d,n)};_(xe,d=>{t(e),i(()=>t(e).pool_id)?d(ce):d(me,!1)})}a(kt),a(Z);var tt=r(Z,2),bt=r(s(tt),2),ge=s(bt,!0);a(bt),a(tt);var et=r(tt,2),wt=r(s(et),2),_e=s(wt,!0);a(wt),a(et);var ue=r(et,2);{var fe=d=>{var n=sa(),l=r(s(n),2),m=s(l,!0);a(l),a(n),f(x=>c(m,x),[()=>(b(A),t(e),i(()=>A(t(e).updated_at)))]),v(d,n)};_(ue,d=>{t(e),i(()=>t(e).updated_at&&t(e).updated_at!==t(e).created_at)&&d(fe)})}a(ut),a(W);var It=r(W,2),jt=r(s(It),2),at=s(jt),Dt=r(s(at),2),st=s(Dt),ye=s(st,!0);a(st),a(Dt),a(at);var rt=r(at,2),St=r(s(rt),2),dt=s(St),pe=s(dt,!0);a(dt),a(St),a(rt);var Mt=r(rt,2);{var he=d=>{var n=da(),l=r(s(n),2);Lt(l,5,()=>(t(e),i(()=>t(e).addresses)),Ot,(m,x)=>{var u=ra(),y=s(u),D=s(y,!0);a(y);var it=r(y,2);{let L=Tt(()=>(t(x),i(()=>t(x).type||"Unknown")));qt(it,{variant:"info",get text(){return t(L)}})}a(u),f(()=>c(D,(t(x),i(()=>t(x).address)))),v(m,u)}),a(l),a(n),v(d,n)},ke=d=>{var n=ia();v(d,n)};_(Mt,d=>{t(e),i(()=>t(e).addresses&&t(e).addresses.length>0)?d(he):d(ke,!1)})}var At=r(Mt,2);{var be=d=>{var n=na(),l=r(s(n),2),m=s(l,!0);a(l),a(n),f(()=>c(m,(t(e),i(()=>t(e).os_type)))),v(d,n)};_(At,d=>{t(e),i(()=>t(e).os_type)&&d(be)})}var Bt=r(At,2);{var we=d=>{var n=oa(),l=r(s(n),2),m=s(l,!0);a(l),a(n),f(()=>c(m,(t(e),i(()=>t(e).os_name)))),v(d,n)};_(Bt,d=>{t(e),i(()=>t(e).os_name)&&d(we)})}var $t=r(Bt,2);{var Ie=d=>{var n=la(),l=r(s(n),2),m=s(l,!0);a(l),a(n),f(()=>c(m,(t(e),i(()=>t(e).os_version)))),v(d,n)};_($t,d=>{t(e),i(()=>t(e).os_version)&&d(Ie)})}var je=r($t,2);{var De=d=>{var n=va(),l=r(s(n),2),m=s(l,!0);a(l),a(n),f(()=>c(m,(t(e),i(()=>t(e).os_arch)))),v(d,n)};_(je,d=>{t(e),i(()=>t(e).os_arch)&&d(De)})}a(jt),a(It),a(H);var Se=r(H,2);{var Me=d=>{var n=ca(),l=r(s(n),2);Lt(l,5,()=>(t(e),i(()=>t(e).status_messages)),Ot,(m,x)=>{var u=xa(),y=s(u),D=s(y),it=s(D,!0);a(D);var L=r(D,2),Nt=s(L);{var Be=k=>{const w=Tt(()=>(b(Ft),t(x),i(()=>Ft(t(x).event_level))));qt(k,{get variant(){return b(t(w)),i(()=>t(w).variant)},get text(){return b(t(w)),i(()=>t(w).text)}})};_(Nt,k=>{t(x),i(()=>t(x).event_level)&&k(Be)})}var Ct=r(Nt,2),$e=s(Ct);{var Ne=k=>{var w=Ut();f(Ee=>c(w,Ee),[()=>(b(A),t(x),i(()=>A(t(x).created_at)))]),v(k,w)},Ce=k=>{var w=Ut("Unknown date");v(k,w)};_($e,k=>{t(x),i(()=>t(x).created_at)?k(Ne):k(Ce,!1)})}a(Ct),a(L),a(y),a(u),f(()=>c(it,(t(x),i(()=>t(x).message)))),v(m,u)}),a(l),Je(l,m=>p(E,m),()=>t(E)),a(n),v(d,n)},Ae=d=>{var n=ma();v(d,n)};_(Se,d=>{t(e),i(()=>t(e).status_messages&&t(e).status_messages.length>0)?d(Me):d(Ae,!1)})}f((d,n,l,m,x)=>{c(ne,(t(e),i(()=>t(e).id))),c(oe,(t(e),i(()=>t(e).name))),c(le,(t(e),i(()=>t(e).provider_id))),c(ve,(t(e),i(()=>t(e).provider_name||"Unknown"))),c(ge,(t(e),i(()=>t(e).agent_id||"Not assigned"))),c(_e,d),Vt(st,1,`inline-flex px-2 py-1 text-xs font-semibold rounded-full ring-1 ring-inset ${n??""}`),c(ye,l),Vt(dt,1,`inline-flex px-2 py-1 text-xs font-semibold rounded-full ring-1 ring-inset ${m??""}`),c(pe,x)},[()=>(b(A),t(e),i(()=>A(t(e).created_at))),()=>(b(P),t(e),i(()=>P(t(e).status||"unknown"))),()=>(b(V),t(e),i(()=>V(t(e).status||"unknown"))),()=>(b(P),t(e),i(()=>P(t(e).runner_status||"unknown"))),()=>(b(V),t(e),i(()=>V(t(e).runner_status||"unknown")))]),Fe("click",ie,()=>p(N,!0)),v(I,U)},T=I=>{var U=_a();v(I,U)};_(j,I=>{t(e)?I(S):I(T,!1)},!0)}v(o,h)};_(ee,o=>{t(R)?o(ae):o(se,!1)})}a(q);var re=r(q,2);{var de=o=>{Qe(o,{title:"Delete Instance",message:"Are you sure you want to delete this instance? This action cannot be undone.",get itemName(){return t(e),i(()=>t(e).name)},$$events:{close:()=>p(N,!1),confirm:Qt}})};_(re,o=>{t(N)&&t(e)&&o(de)})}f(()=>{nt(Yt,"href",`${$}/instances`),c(Zt,(t(e),i(()=>t(e)?t(e).name:"Instance Details")))}),v(Gt,lt),Re(),Jt()}export{$a as component};
