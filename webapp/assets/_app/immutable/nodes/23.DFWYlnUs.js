import{c as St,a as E,h as Ht,b as w,l as Pt,f as M,d as et,t as tt,s as G,e as Re}from"../chunks/CxOx-TIJ.js";import{i as jt}from"../chunks/3NxSoY2_.js";import{p as Gt,o as Nt,l as ye,b as Vt,f as le,d as u,a as Wt,g as e,m as C,t as z,s as r,F as I,i as A,j as s,u as l,$ as zt,n as he,k as S,c as o,r as d,w as X,e as b,h as R,y as N,v as Ot}from"../chunks/DzFKsO_V.js";import{i as $}from"../chunks/B_jyf0qs.js";import{w as at}from"../chunks/DoJxysSt.js";import{c as ie,g as Fe,r as rt,b as qt}from"../chunks/BguOOs3x.js";import{b as ot}from"../chunks/BVM1034P.js";import{p as Jt}from"../chunks/CdEA5IGF.js";import{l as ce}from"../chunks/BAcG6-Ep.js";import{p as _e}from"../chunks/CH-vk5qo.js";import{g as Be}from"../chunks/BzzAh3Be.js";import{A as dt}from"../chunks/Ct5kWObc.js";import{t as P}from"../chunks/li_-Mkq2.js";import{e as Se}from"../chunks/BZiHL9L3.js";import{B as ke}from"../chunks/1CdJgrM6.js";import{D as Yt}from"../chunks/BLYRAgBX.js";import{C as Kt,a as nt}from"../chunks/g1bAVjVL.js";import{D as Qt}from"../chunks/DL1RlOO9.js";import{i as st}from"../chunks/C98nByjP.js";import{g as lt}from"../chunks/JkzpcrZD.js";import{w as Xt}from"../chunks/DSHGoHxX.js";n[I]="src/routes/templates/[id]/+page.svelte";var Zt=E(M('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-600 dark:text-gray-400">Loading template...</span></div>'),n[I],[[412,1,[[413,2],[414,2]]]]),ea=E(M('<div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-red-800 dark:text-red-200">Error loading template</h3> <div class="mt-2 text-sm text-red-700 dark:text-red-300"> </div> <div class="mt-4 space-x-3"><!> <!></div></div></div></div>'),n[I],[[417,1,[[418,2,[[419,3,[[420,4,[[421,5]]]]],[424,3,[[425,4],[428,4],[431,4]]]]]]]]),ta=E(M('<form class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Name *</label> <input type="text" id="name" required class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"/></div> <div><label for="description" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Description</label> <input type="text" id="description" class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"/></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><span class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Forge Type</span> <!> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Cannot be changed</p></div> <div><span class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">OS Type</span> <!> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Cannot be changed</p></div></div></form>'),n[I],[[474,5,[[475,6,[[476,7,[[477,8],[480,8]]],[489,7,[[490,8],[493,8]]]]],[502,6,[[503,7,[[504,8],[511,8]]],[514,7,[[515,8],[522,8]]]]]]]]),aa=E(M('<div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Created</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div>'),n[I],[[571,7,[[572,8],[573,8]]]]),ra=E(M('<div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Last Updated</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div>'),n[I],[[580,7,[[581,8],[582,8]]]]),oa=E(M('<dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2"><div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Name</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Description</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Forge Type</dt> <dd class="mt-1"><!></dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">OS Type</dt> <dd class="mt-1"><!></dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Owner</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Template ID</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div> <!> <!></dl>'),n[I],[[527,5,[[528,6,[[529,7],[530,7]]],[533,6,[[534,7],[535,7]]],[538,6,[[539,7],[540,7]]],[548,6,[[549,7],[550,7]]],[558,6,[[559,7],[560,7]]],[565,6,[[566,7],[567,7]]]]]]),da=E(M('<div class="flex items-center space-x-3"><label for="language-select" class="text-sm font-medium text-gray-700 dark:text-gray-300">Language:</label> <select id="language-select" class="px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>Bash</option><option>PowerShell</option><option>Python</option><option>Text</option></select></div>'),n[I],[[600,6,[[601,7],[604,7,[[610,8],[611,8],[612,8],[613,8]]]]]]),na=E(M('<div class="mb-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4"><h4 class="text-sm font-medium text-blue-900 dark:text-blue-100 mb-2">Available Template Variables</h4> <p class="text-xs text-blue-800 dark:text-blue-200 mb-3">Your template can use the following variables using Go template syntax (e.g., <code class="bg-blue-100 dark:bg-blue-800 px-1 rounded"></code>):</p> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-xs"><div><h5 class="font-medium text-blue-900 dark:text-blue-100 mb-1">Runner Info</h5> <ul class="space-y-1 text-blue-800 dark:text-blue-200"><li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RunnerName</code> - Runner name</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RunnerLabels</code> - Comma separated labels</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RunnerUsername</code> - Runner service username</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RunnerGroup</code> - Runner service group</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.GitHubRunnerGroup</code> - GitHub runner group</li></ul></div> <div><h5 class="font-medium text-blue-900 dark:text-blue-100 mb-1">Download & Install</h5> <ul class="space-y-1 text-blue-800 dark:text-blue-200"><li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.FileName</code> - Download file name</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.DownloadURL</code> - Runner download URL</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.TempDownloadToken</code> - Download token</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RepoURL</code> - Repository URL</li></ul></div> <div><h5 class="font-medium text-blue-900 dark:text-blue-100 mb-1">Configuration</h5> <ul class="space-y-1 text-blue-800 dark:text-blue-200"><li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.MetadataURL</code> - Instance metadata URL</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.CallbackURL</code> - Status callback URL</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.CallbackToken</code> - Callback token</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.CABundle</code> - CA certificate bundle</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.EnableBootDebug</code> - Enable debug mode</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.UseJITConfig</code> - Use JIT configuration</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.ExtraContext</code> - Additional context map</li></ul></div></div> <p class="text-xs text-blue-700 dark:text-blue-300 mt-3">ðŸ’¡ <strong>Tip:</strong> Use <code class="bg-blue-100 dark:bg-blue-800 px-1 rounded"></code> for conditional content, or <code class="bg-blue-100 dark:bg-blue-800 px-1 rounded"></code> to iterate over extra context.</p></div>'),n[I],[[621,5,[[622,6],[625,6,[[626,85]]],[628,6,[[629,7,[[630,8],[631,8,[[632,9,[[632,13]]],[633,9,[[633,13]]],[634,9,[[634,13]]],[635,9,[[635,13]]],[636,9,[[636,13]]]]]]],[639,7,[[640,8],[641,8,[[642,9,[[642,13]]],[643,9,[[643,13]]],[644,9,[[644,13]]],[645,9,[[645,13]]]]]]],[648,7,[[649,8],[650,8,[[651,9,[[651,13]]],[652,9,[[652,13]]],[653,9,[[653,13]]],[654,9,[[654,13]]],[655,9,[[655,13]]],[656,9,[[656,13]]],[657,9,[[657,13]]]]]]]]],[661,6,[[662,10],[662,36],[662,158]]]]]]),sa=E(M('<div class="flex-1 min-h-0"><!> <p class="mt-2 text-sm text-gray-500 dark:text-gray-400"> </p></div>'),n[I],[[668,5,[[679,6]]]]),la=E(M('<div class="flex items-center justify-between mb-4"><div></div> <button type="button" class="inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors" title="Copy template content to clipboard"><svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> Copy Code</button></div> <div class="flex-1 min-h-0"><!></div>',1),n[I],[[684,5,[[685,6],[686,6,[[692,7,[[693,8]]]]]]],[698,5]]),ia=E(M('<!> <div class="flex flex-col h-full space-y-6"><div class="bg-white dark:bg-gray-800 shadow rounded-lg flex-shrink-0"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4">Template Information</h3> <!></div></div> <div class="bg-white dark:bg-gray-800 shadow rounded-lg flex-1 flex flex-col min-h-0"><div class="px-4 py-5 sm:p-6 flex-1 flex flex-col"><div class="flex items-center justify-between mb-4"><h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white">Template Content</h3> <!></div> <!> <!></div></div></div>',1),n[I],[[465,1,[[467,2,[[468,3,[[469,4]]]]],[593,2,[[594,3,[[595,4,[[596,5]]]]]]]]]]),ca=E(M("<!> <!> <!>",1),n[I],[]);function n(it,ct){St(new.target),Gt(ct,!1,n);const ue=C(),we=C(),Te=C();let me=C(!0),t=C(null),O=C(""),k=C(!1),c=C({name:"",description:"",data:new Uint8Array}),g=C(""),Z=C("text"),V=C(!1),D=C({name:"",description:""}),j=C(""),Ce=C(!1),pe=C(!1);async function $e(){try{if(s(me,!0),s(O,""),s(t,(await he(Fe.getTemplate(e(ue))))()),!e(t))throw new Error("Template not found");if(S(c,e(c).name=e(t).name||""),S(c,e(c).description=e(t).description||""),S(D,e(D).name=e(t).name||""),S(D,e(D).description=e(t).description||""),e(t).data)try{if(Array.isArray(e(t).data)){const a=new Uint8Array(e(t).data);s(g,new TextDecoder().decode(a)),s(j,e(g))}else s(g,atob(e(t).data)),s(j,e(g))}catch(a){console.error(...ce("error","Failed to decode template data:",a)),s(g,""),s(j,"")}else s(g,""),s(j,"")}catch(a){s(O,Se(a)),P.add({type:"error",title:"Failed to load template",message:e(O)})}finally{s(me,!1)}}async function Ae(){if(!(!e(t)?.id||!e(Te)))try{const a={name:e(c).name,description:e(c).description||void 0,data:Array.from(new TextEncoder().encode(e(g)))};(await he(Fe.updateTemplate(e(t).id,a)))(),P.add({type:"success",title:"Template updated",message:`Template "${e(c).name}" has been updated successfully.`}),S(D,e(D).name=e(c).name),S(D,e(D).description=e(c).description),s(j,e(g))}catch(a){const i=Se(a);P.add({type:"error",title:"Failed to update template",message:i})}}async function ut(){if(e(t)?.id)try{(await he(Fe.deleteTemplate(e(t).id)))(),P.add({type:"success",title:"Template deleted",message:`Template "${e(t).name}" has been deleted successfully.`}),Be(ie("/templates"))}catch(a){const i=Se(a);P.add({type:"error",title:"Failed to delete template",message:i})}}function He(){s(k,!0),s(V,!1)}function mt(){return A(e(c).name,e(D).name,!1)||A(e(c).description,e(D).description,!1)||A(e(g),e(j),!1)}function pt(){if(mt()){s(pe,!0);return}Pe()}function Pe(){if(s(k,!1),s(V,!1),A(_e.url.searchParams.get("edit"),"true")){Be(ie("/templates"));return}if(e(t))if(S(c,e(c).name=e(t).name||""),S(c,e(c).description=e(t).description||""),e(t).data)try{if(Array.isArray(e(t).data)){const a=new Uint8Array(e(t).data);s(g,new TextDecoder().decode(a))}else s(g,atob(e(t).data))}catch(a){console.error(...ce("error","Failed to decode template data:",a)),s(g,"")}else s(g,"")}function gt(){s(pe,!1),Pe()}function je(a){switch(a){case"github":return{color:"blue",text:"GitHub"};case"gitea":return{color:"green",text:"Gitea"};default:return{color:"gray",text:a||"Unknown"}}}function Ge(a){switch(a){case"linux":return{color:"blue",text:"Linux"};case"windows":return{color:"info",text:"Windows"};default:return{color:"gray",text:a||"Unknown"}}}function De(){if(!e(t)?.data)return"";try{if(Array.isArray(e(t).data)){const a=new Uint8Array(e(t).data);return new TextDecoder().decode(a)}else return atob(e(t).data)}catch(a){return console.error(...ce("error","Failed to decode template data:",a)),"Error: Failed to decode template content"}}function Ne(a){const F=a.split(`
`)[0]?.trim()||"";return F.startsWith("#!/bin/bash")||F.startsWith("#!/bin/sh")?"bash":F.startsWith("#!/usr/bin/env pwsh")||F.includes("#ps1_sysnative")?"powershell":F.startsWith("#!/usr/bin/env python")||F.startsWith("#!/usr/bin/python")?"python":a.includes("param(")||a.includes("Write-Host")||a.includes("$_")?"powershell":a.includes("def ")||a.includes("import ")||a.includes("print(")?"python":a.includes("echo ")||a.includes("export ")||a.includes("if [")?"bash":"text"}async function vt(a){try{navigator.clipboard&&navigator.clipboard.writeText?((await he(navigator.clipboard.writeText(a)))(),P.add({type:"success",title:"Copied to clipboard",message:"Template content has been copied to your clipboard."})):Ve(a)}catch(i){console.error(...ce("error","Failed to copy to clipboard:",i)),Ve(a)}}function Ve(a){try{const i=document.createElement("textarea");i.value=a,i.style.position="fixed",i.style.left="-999999px",i.style.top="-999999px",document.body.appendChild(i),i.focus(),i.select();const F=document.execCommand("copy");if(document.body.removeChild(i),F)P.add({type:"success",title:"Copied to clipboard",message:"Template content has been copied to your clipboard."});else throw new Error("Copy command failed")}catch(i){console.error(...ce("error","Fallback copy failed:",i)),P.add({type:"error",title:"Copy failed",message:"Unable to copy to clipboard. Please manually select and copy the content."})}}Nt(()=>{if(e(ue))return $e().then(()=>{A(_e.url.searchParams.get("edit"),"true")&&He()}),Xt.subscribeToEntity("template",["update","delete"],i=>{i.payload&&A(i.payload.id,e(ue))&&(A(i.operation,"update")?e(k)?s(t,i.payload):$e():A(i.operation,"delete")&&(P.add({type:"info",title:"Template deleted",message:`Template "${e(t)?.name||"Unknown"}" has been deleted.`}),Be(ie("/templates"))))});s(O,"Invalid template ID"),s(me,!1)}),ye(()=>_e,()=>{s(ue,parseInt(_e.params.id||"0"))}),ye(()=>(e(g),e(V)),()=>{e(g)&&!e(V)&&s(Z,Ne(e(g)))}),ye(()=>(e(c),e(D),e(g),e(j)),()=>{s(we,A(e(c).name,e(D).name,!1)||A(e(c).description,e(D).description,!1)||A(e(g),e(j),!1))}),ye(()=>(e(we),e(c),e(g)),()=>{s(Te,e(we)&&e(c).name.trim().length>0&&e(g).trim().length>0)}),Vt(),jt();var We=ca();Ht(a=>{z(()=>zt.title=`${e(t),l(()=>e(t)?.name||"Template")??""} - GARM`)});var ze=le(We);{var bt=a=>{var i=Zt();w(a,i)},ft=a=>{var i=et(),F=le(i);{var _t=q=>{var J=ea(),ge=o(J),ve=r(o(ge),2),W=r(o(ve),2),ee=o(W,!0);d(W);var Y=r(W,2),te=o(Y);u(()=>dt(te,{variant:"secondary",size:"sm",$$events:{click:$e},children:at(n,(K,ae)=>{X();var re=tt("Try Again");w(K,re)}),$$slots:{default:!0}}),"component",n,432,5,{componentTag:"ActionButton"});var be=r(te,2);{let K=b(()=>(R(ie),l(()=>ie("/templates"))));u(()=>dt(be,{variant:"secondary",size:"sm",get href(){return e(K)},children:at(n,(ae,re)=>{X();var oe=tt("Back to Templates");w(ae,oe)}),$$slots:{default:!0}}),"component",n,435,5,{componentTag:"ActionButton"})}d(Y),d(ve),d(ge),d(J),z(()=>G(ee,e(O))),w(q,J)},kt=q=>{var J=et(),ge=le(J);{var ve=W=>{const ee=N(b(()=>(R(st),l(st))),"isAdmin");e(ee);const Y=N(b(()=>(e(t),l(()=>A(e(t).owner_id,"system")))),"isSystemTemplate");e(Y);const te=N(b(()=>e(ee)||!e(Y)),"canEdit");e(te);const be=N(b(()=>e(ee)||!e(Y)),"canDelete");e(be);var K=ia(),ae=le(K);{let v=b(()=>(e(t),l(()=>e(t).name||"Unnamed Template"))),m=b(()=>(R(lt),e(t),l(()=>lt(e(t).forge_type||"unknown")))),p=b(()=>e(k)?pt:e(te)?He:null),f=b(()=>e(k)?Ae:e(be)?()=>s(Ce,!0):null),h=b(()=>e(k)?"Close":"Edit"),x=b(()=>e(k)?"Save Changes":"Delete"),_=b(()=>(e(k),"secondary")),B=b(()=>e(k)?"primary":"danger"),H=b(()=>e(k)?!e(Te):!1),Q=b(()=>e(k)?"<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 18L18 6M6 6l12 12'/>":"<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z'/>"),de=b(()=>e(k)?"<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h8a2 2 0 002-2V9a2 2 0 00-2-2h-3m0 0V5a2 2 0 00-2-2H9a2 2 0 00-2 2v2m0 0h4'/>":"<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16'/>");u(()=>Yt(ae,{get title(){return e(v)},subtitle:"View and manage template details",get forgeIcon(){return e(m)},get onEdit(){return e(p)},get onDelete(){return e(f)},get editLabel(){return e(h)},get deleteLabel(){return e(x)},get editVariant(){return e(_)},get deleteVariant(){return e(B)},get deleteDisabled(){return e(H)},get editIcon(){return e(Q)},get deleteIcon(){return e(de)}}),"component",n,449,1,{componentTag:"DetailHeader"})}var re=r(ae,2),oe=o(re),qe=o(oe),wt=r(o(qe),2);{var Tt=v=>{var m=ta(),p=o(m),f=o(p),h=r(o(f),2);rt(h),d(f);var x=r(f,2),_=r(o(x),2);rt(_),d(x),d(p);var B=r(p,2),H=o(B),Q=r(o(H),2);{var de=L=>{const U=N(b(()=>(e(t),l(()=>je(e(t).forge_type)))),"badgeInfo");e(U),u(()=>ke(L,{get variant(){return R(e(U)),l(()=>e(U).color)},get text(){return R(e(U)),l(()=>e(U).text)}}),"component",n,509,9,{componentTag:"Badge"})};u(()=>$(Q,L=>{e(t),l(()=>e(t).forge_type)&&L(de)}),"if",n,507,8)}X(2),d(H);var fe=r(H,2),ne=r(o(fe),2);{var xe=L=>{const U=N(b(()=>(e(t),l(()=>Ge(e(t).os_type)))),"badgeInfo");e(U),u(()=>ke(L,{get variant(){return R(e(U)),l(()=>e(U).color)},get text(){return R(e(U)),l(()=>e(U).text)}}),"component",n,520,9,{componentTag:"Badge"})};u(()=>$(ne,L=>{e(t),l(()=>e(t).os_type)&&L(xe)}),"if",n,518,8)}X(2),d(fe),d(B),d(m),ot(h,()=>e(c).name,L=>S(c,e(c).name=L)),ot(_,()=>e(c).description,L=>S(c,e(c).description=L)),Re("submit",m,Jt(Ae)),w(v,m)},Ct=v=>{var m=oa(),p=o(m),f=r(o(p),2),h=o(f,!0);d(f),d(p);var x=r(p,2),_=r(o(x),2),B=o(_,!0);d(_),d(x);var H=r(x,2),Q=r(o(H),2),de=o(Q);{var fe=T=>{const y=N(b(()=>(e(t),l(()=>je(e(t).forge_type)))),"badgeInfo");e(y),u(()=>ke(T,{get variant(){return R(e(y)),l(()=>e(y).color)},get text(){return R(e(y)),l(()=>e(y).text)}}),"component",n,543,9,{componentTag:"Badge"})};u(()=>$(de,T=>{e(t),l(()=>e(t).forge_type)&&T(fe)}),"if",n,541,8)}d(Q),d(H);var ne=r(H,2),xe=r(o(ne),2),L=o(xe);{var U=T=>{const y=N(b(()=>(e(t),l(()=>Ge(e(t).os_type)))),"badgeInfo");e(y),u(()=>ke(T,{get variant(){return R(e(y)),l(()=>e(y).color)},get text(){return R(e(y)),l(()=>e(y).text)}}),"component",n,553,9,{componentTag:"Badge"})};u(()=>$(L,T=>{e(t),l(()=>e(t).os_type)&&T(U)}),"if",n,551,8)}d(xe),d(ne);var Ue=r(ne,2),Qe=r(o(Ue),2),Et=o(Qe,!0);d(Qe),d(Ue);var Ie=r(Ue,2),Xe=r(o(Ie),2),Mt=o(Xe,!0);d(Xe),d(Ie);var Ze=r(Ie,2);{var Rt=T=>{var y=aa(),se=r(o(y),2),Ee=o(se,!0);d(se),d(y),z(Me=>G(Ee,Me),[()=>(e(t),l(()=>new Date(e(t).created_at).toLocaleDateString()))]),w(T,y)};u(()=>$(Ze,T=>{e(t),l(()=>e(t).created_at)&&T(Rt)}),"if",n,570,6)}var Ft=r(Ze,2);{var Bt=T=>{var y=ra(),se=r(o(y),2),Ee=o(se,!0);d(se),d(y),z(Me=>G(Ee,Me),[()=>(e(t),l(()=>new Date(e(t).updated_at).toLocaleDateString()))]),w(T,y)};u(()=>$(Ft,T=>{e(t),l(()=>e(t).updated_at)&&T(Bt)}),"if",n,579,6)}d(m),z(()=>{G(h,(e(t),l(()=>e(t).name||"Unnamed Template"))),G(B,(e(t),l(()=>e(t).description||"No description"))),G(Et,(e(t),l(()=>A(e(t).owner_id,"system")?"System":e(t).owner_id||"Unknown"))),G(Mt,(e(t),l(()=>e(t).id)))}),w(v,m)};u(()=>$(wt,v=>{e(k)?v(Tt):v(Ct,!1)}),"if",n,473,4)}d(qe),d(oe);var Je=r(oe,2),Ye=o(Je),Le=o(Ye),$t=r(o(Le),2);{var At=v=>{var m=da(),p=r(o(m),2);z(()=>{e(Z),Ot(()=>{e(V)})});var f=o(p);f.value=f.__value="bash";var h=r(f);h.value=h.__value="powershell";var x=r(h);x.value=x.__value="python";var _=r(x);_.value=_.__value="text",d(p),d(m),qt(p,()=>e(Z),B=>s(Z,B)),Re("change",p,()=>s(V,!0)),w(v,m)};u(()=>$($t,v=>{e(k)&&v(At)}),"if",n,599,5)}d(Le);var Ke=r(Le,2);{var Dt=v=>{var m=na(),p=r(o(m),2),f=r(o(p));f.textContent="{{ .RunnerName }}",X(),d(p);var h=r(p,4),x=r(o(h),3);x.textContent="{{if .CABundle}}...{{end}}";var _=r(x,2);_.textContent="{{range $key, $value := .ExtraContext}}{{$key}}: {{$value}}{{end}}",X(),d(h),d(m),w(v,m)};u(()=>$(Ke,v=>{e(k)&&v(Dt)}),"if",n,619,4)}var Lt=r(Ke,2);{var Ut=v=>{var m=sa(),p=o(m);{let x=b(()=>!e(V));u(()=>nt(p,{get language(){return e(Z)},get autoDetect(){return e(x)},enableTemplateCompletion:!0,minHeight:"400px",placeholder:"Enter your template script content here...",get value(){return e(g)},set value(_){s(g,_)},$$events:{change:_=>s(g,_.detail.value),save:Ae},$$legacy:!0}),"component",n,669,6,{componentTag:"CodeEditor"})}var f=r(p,2),h=o(f);d(f),d(m),z(()=>G(h,`Template content should be a ${e(t),l(()=>A(e(t).os_type,"windows")?"PowerShell":"bash")??""} script for runner installation and configuration on ${e(t),l(()=>e(t).os_type)??""}.`)),w(v,m)},It=v=>{var m=la(),p=le(m),f=r(o(p),2);d(p);var h=r(p,2),x=o(h);{let _=b(()=>l(De)),B=b(()=>l(()=>Ne(De())));u(()=>nt(x,{get value(){return e(_)},get language(){return e(B)},readonly:!0,minHeight:"400px"}),"component",n,699,6,{componentTag:"CodeEditor"})}d(h),Re("click",f,()=>vt(De())),w(v,m)};u(()=>$(Lt,v=>{e(k)?v(Ut):v(It,!1)}),"if",n,667,4)}d(Ye),d(Je),d(re),w(W,K)};u(()=>$(ge,W=>{e(t)&&W(ve)},!0),"if",n,442,0)}w(q,J)};u(()=>$(F,q=>{e(O)&&!e(t)?q(_t):q(kt,!1)},!0),"if",n,416,0)}w(a,i)};u(()=>$(ze,a=>{e(me)?a(bt):a(ft,!1)}),"if",n,411,0)}var Oe=r(ze,2);{var xt=a=>{u(()=>Qt(a,{title:"Delete Template",message:"Are you sure you want to delete this template? This action cannot be undone.",get itemName(){return e(t),l(()=>e(t).name)},$$events:{close:()=>s(Ce,!1),confirm:ut}}),"component",n,714,1,{componentTag:"DeleteModal"})};u(()=>$(Oe,a=>{e(Ce)&&e(t)&&a(xt)}),"if",n,713,0)}var yt=r(Oe,2);{var ht=a=>{u(()=>Kt(a,{title:"Unsaved Changes",message:"You have unsaved changes. Are you sure you want to discard them?",confirmText:"Discard Changes",cancelText:"Stay on Page",variant:"warning",$$events:{close:()=>s(pe,!1),confirm:gt}}),"component",n,725,1,{componentTag:"ConfirmationModal"})};u(()=>$(yt,a=>{e(pe)&&a(ht)}),"if",n,724,0)}return w(it,We),Wt({...Pt()})}export{n as component};
