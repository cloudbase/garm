import"../chunks/DsnmJJEf.js";import{i as tt}from"../chunks/TJn6xDN9.js";import{p as at,l as oe,q as z,g as e,m as g,h as vt,A as Tt,a as bt,b as v,c as rt,k as r,u as ut,f as C,d as l,r as o,t as E,e as w,s,E as zt,z as W,D as se,v as He,y as Et,C as ht,i as H,o as Ot,B as Ut,x as pt,w as V}from"../chunks/DniTuB_0.js";import{p as ue,i as te}from"../chunks/DbNhg6mG.js";import{e as Xe,i as Ve}from"../chunks/Ck5PkeSc.js";import{B as Y,b as At,g as Ge,s as Ft,r as qe,c as Ke,k as It}from"../chunks/DD3srElq.js";import{b as ye}from"../chunks/CCQwxxp9.js";import{p as gt}from"../chunks/D4Caz1gY.js";import"../chunks/DeKGyprh.js";import"../chunks/BSR16q_V.js";import{P as Bt}from"../chunks/BlYHwhWl.js";import{D as Rt,G as mt,A as Lt}from"../chunks/QtGwBUod.js";import{M as ft}from"../chunks/PC4wJWhj.js";import{t as ee}from"../chunks/CBJzOE8U.js";import{e as Ee}from"../chunks/BZiHL9L3.js";import{D as Nt}from"../chunks/B6XSaEl0.js";import{E as Ht}from"../chunks/D3pbRQAB.js";import{f as Gt,a as qt}from"../chunks/aK-A9Gop.js";import{w as Kt}from"../chunks/DmHFwzWx.js";var Xt=C('<span class="text-gray-500 dark:text-gray-400">-</span>'),Vt=C('<span class="inline-flex items-center px-2 py-0.5 text-xs font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 rounded-md"> </span>'),Wt=C('<span class="inline-flex items-center px-2 py-0.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md"> </span>'),Yt=C('<span class="inline-flex items-center px-2 py-0.5 text-xs font-medium text-blue-200 bg-blue-800/50 rounded-md"> </span>'),Zt=C('<div class="absolute left-0 top-full mt-2 z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none"><div class="bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-md px-3 py-2 max-w-sm shadow-lg"><div class="font-semibold mb-1">All tags:</div> <div class="flex flex-wrap gap-1"></div></div></div>'),Jt=C('<div class="flex flex-wrap gap-1 items-center group relative"><!> <!> <!></div>');function Qt(_e,O){at(O,!1);const m=g(),S=g(),U=g();let M=ue(O,"item",8);const c=3;oe(()=>z(M()),()=>{r(m,M()?.tags||[])}),oe(()=>e(m),()=>{r(S,e(m).slice(0,c))}),oe(()=>e(m),()=>{r(U,Math.max(0,e(m).length-c))}),vt(),tt();var k=Tt(),B=bt(k);{var D=R=>{var b=Xt();v(R,b)},P=R=>{var b=Jt(),Z=l(b);Xe(Z,1,()=>e(S),Ve,(y,f)=>{var $=Vt(),T=l($,!0);o($),E(()=>w(T,e(f))),v(y,$)});var G=s(Z,2);{var ke=y=>{var f=Wt(),$=l(f);o(f),E(()=>w($,`+${e(U)??""} more`)),v(y,f)};te(G,y=>{e(U)>0&&y(ke)})}var q=s(G,2);{var L=y=>{var f=Zt(),$=l(f),T=s(l($),2);Xe(T,5,()=>e(m),Ve,(n,A)=>{var h=Yt(),p=l(h,!0);o(h),E(()=>w(p,e(A))),v(n,h)}),o(T),o($),o(f),v(y,f)};te(q,y=>{e(m),ut(()=>e(m).length>c)&&y(L)})}o(b),v(R,b)};te(B,R=>{e(m),ut(()=>!e(m)||e(m).length===0)?R(D):R(P,!1)})}v(_e,k),rt()}var ea=ht('<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>'),ta=ht('<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>'),aa=C('<div class="flex items-center justify-between border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 px-4 py-3 sm:px-6"><div class="flex flex-1 justify-between sm:hidden"><!> <!></div> <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"><div class="flex items-center gap-4"><p class="text-sm text-gray-700 dark:text-gray-300">Showing <span class="font-medium"> </span> to <span class="font-medium"> </span> of <span class="font-medium"> </span> </p> <div class="flex items-center gap-2"><label for="page-size" class="text-sm text-gray-700 dark:text-gray-300">Show:</label> <select id="page-size" class="rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white py-1 pl-2 pr-8 text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"><option>10</option><option>25</option><option>50</option><option>100</option></select></div></div> <div class="flex items-center gap-2"><!> <span class="text-sm text-gray-700 dark:text-gray-300">Page <span class="font-medium"> </span> of <span class="font-medium"> </span></span> <!></div></div></div>');function ra(_e,O){at(O,!1);const m=g(),S=g(),U=g(),M=g();let c=ue(O,"currentPage",8,1),k=ue(O,"totalPages",8,1),B=ue(O,"totalItems",8,0),D=ue(O,"pageSize",12,25),P=ue(O,"loading",8,!1),R=ue(O,"itemName",8,"items");const b=zt();function Z(){e(S)&&!P()&&(b("pageChange",{page:c()-1}),c()-2>0&&b("prefetch",{page:c()-2}))}function G(){e(m)&&!P()&&(b("pageChange",{page:c()+1}),c()+2<=k()&&b("prefetch",{page:c()+2}))}function ke(j){const F=j.target,ae=parseInt(F.value);b("pageSizeChange",{pageSize:ae})}oe(()=>(z(c()),z(k())),()=>{r(m,c()<k())}),oe(()=>z(c()),()=>{r(S,c()>1)}),oe(()=>(z(B()),z(c()),z(D())),()=>{r(U,B()===0?0:(c()-1)*D()+1)}),oe(()=>(z(c()),z(D()),z(B())),()=>{r(M,Math.min(c()*D(),B()))}),oe(()=>(z(c()),z(k()),z(P())),()=>{c()<k()&&!P()&&b("prefetch",{page:c()+1})}),vt(),tt();var q=aa(),L=l(q),y=l(L);{let j=He(()=>!e(S)||P());Y(y,{variant:"secondary",size:"sm",get disabled(){return e(j)},$$events:{click:Z},children:(F,ae)=>{W();var X=se("Previous");v(F,X)},$$slots:{default:!0}})}var f=s(y,2);{let j=He(()=>!e(m)||P());Y(f,{variant:"secondary",size:"sm",get disabled(){return e(j)},$$events:{click:G},children:(F,ae)=>{W();var X=se("Next");v(F,X)},$$slots:{default:!0}})}o(L);var $=s(L,2),T=l($),n=l(T),A=s(l(n)),h=l(A,!0);o(A);var p=s(A,2),We=l(p,!0);o(p);var pe=s(p,2),Ye=l(pe,!0);o(pe);var K=s(pe);o(n);var Oe=s(n,2),le=s(l(Oe),2);E(()=>{D(),Et(()=>{P()})});var we=l(le);we.value=we.__value=10;var $e=s(we);$e.value=$e.__value=25;var Pe=s($e);Pe.value=Pe.__value=50;var Ue=s(Pe);Ue.value=Ue.__value=100,o(le),o(Oe),o(T);var Ae=s(T,2),Fe=l(Ae);{let j=He(()=>!e(S)||P());Y(Fe,{variant:"secondary",size:"sm",get disabled(){return e(j)},$$events:{click:Z},children:(F,ae)=>{var X=ea();v(F,X)},$$slots:{default:!0}})}var je=s(Fe,2),Se=s(l(je)),Ze=l(Se,!0);o(Se);var Ie=s(Se,2),Je=l(Ie,!0);o(Ie),o(je);var ie=s(je,2);{let j=He(()=>!e(m)||P());Y(ie,{variant:"secondary",size:"sm",get disabled(){return e(j)},$$events:{click:G},children:(F,ae)=>{var X=ta();v(F,X)},$$slots:{default:!0}})}o(Ae),o($),o(q),E(()=>{w(h,e(U)),w(We,e(M)),w(Ye,B()),w(K,` ${R()??""}`),le.disabled=P(),w(Ze,c()),w(Je,k())}),At(le,D),H("change",le,ke),v(_e,q),rt()}var sa=C('<div class="mt-3 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"> </div>'),oa=C('<span class="inline-flex items-center gap-1 px-2 py-1 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 rounded-md"> <button type="button" class="inline-flex items-center justify-center w-4 h-4 text-blue-700 dark:text-blue-300 hover:text-blue-900 dark:hover:text-blue-100 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800 disabled:opacity-50"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></span>'),la=C('<div><div class="flex justify-between mb-2"><span class="text-sm font-medium text-gray-700 dark:text-gray-300">Uploading...</span> <span class="text-sm font-medium text-gray-700 dark:text-gray-300"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"><div class="bg-blue-600 h-2.5 rounded-full transition-all duration-300"></div></div></div>'),ia=C('<div class="max-w-2xl w-full p-6"><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Upload New Object</h3> <form class="space-y-4"><div><label for="upload-file-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">File Name</label> <input id="upload-file-name" type="text" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm" placeholder="my-file.bin"/></div> <div><label for="upload-file-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">File</label> <div class="flex items-center gap-3"><input id="upload-file-input" type="file" class="hidden"/> <!> <span class="text-sm text-gray-600 dark:text-gray-400"> </span></div></div> <div><label for="upload-file-tags" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tags</label> <div class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 min-h-[42px] flex flex-wrap gap-2 items-center"><!> <input id="upload-file-tags" type="text" class="flex-1 min-w-[120px] outline-none bg-transparent text-gray-900 dark:text-white text-sm"/></div> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Press Space or Enter to add a tag. Press Backspace to remove the last tag.</p></div> <div><label for="upload-file-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description (optional)</label> <textarea id="upload-file-description" maxlength="8192" rows="3" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm resize-y" placeholder="Add a description for this file..."></textarea> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400"> </p></div> <!> <div class="flex justify-end space-x-3 pt-4"><!> <!></div></form></div>'),na=C('<span class="inline-flex items-center gap-1 px-2 py-1 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 rounded-md"> <button type="button" class="inline-flex items-center justify-center w-4 h-4 text-blue-700 dark:text-blue-300 hover:text-blue-900 dark:hover:text-blue-100 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></span>'),da=C('<div class="max-w-2xl w-full p-6"><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Update Object</h3> <form class="space-y-4"><div><label for="update-file-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">File Name</label> <input id="update-file-name" type="text" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"/></div> <div><label for="update-file-tags" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tags</label> <div class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 min-h-[42px] flex flex-wrap gap-2 items-center"><!> <input id="update-file-tags" type="text" class="flex-1 min-w-[120px] outline-none bg-transparent text-gray-900 dark:text-white text-sm"/></div> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Press Space or Enter to add a tag. Press Backspace to remove the last tag.</p></div> <div><label for="update-file-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description (optional)</label> <textarea id="update-file-description" maxlength="8192" rows="3" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm resize-y" placeholder="Add a description for this file..."></textarea> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400"> </p></div> <div class="flex justify-end space-x-3 pt-4"><!> <!></div></form></div>'),ca=C(`<!> <div class="mb-6"><button class="text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 dark:hover:text-indigo-300 flex items-center cursor-pointer"><svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> What's this? <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div> <!> <!> <!> <!> <!>`,1);function Ca(_e,O){at(O,!1);let m=g([]),S=g(!0),U=g(""),M=g(""),c=g(1),k=g(25),B=g(1),D=g(0),P=1;const R="garm_objects_page_size";let b=new Map;const Z=300*1e3;let G=null;const ke=500;let q=g(!1),L=g(!1),y=g(!1),f=g(null),$=g(!1),T=null,n=g({name:"",file:null,tags:[],description:""}),A=g(0),h=g(!1),p=g({name:"",tags:[],description:""});function We(t){if(t.operation==="create")K();else if(t.operation==="update"){const a=t.payload;r(m,e(m).map(i=>i.id===a.id?a:i))}else if(t.operation==="delete"){const a=t.payload.id||t.payload;r(m,e(m).filter(i=>i.id!==a)),r(D,Math.max(0,e(D)-1))}}Ot(async()=>{const t=localStorage.getItem(R);if(t){const a=parseInt(t,10);!isNaN(a)&&a>0&&r(k,a)}await K(),T=Kt.subscribeToEntity("file_object",["create","update","delete"],We)}),Ut(()=>{T&&(T(),T=null)});function pe(t,a,i=e(k)){return`${t}-${a||"all"}-${i}`}function Ye(){const t=Date.now();for(const[a,i]of b.entries())t-i.timestamp>Z&&b.delete(a)}async function K(t=!1){try{r(S,!t),r(U,"");const a=e(M).trim()?e(M).trim().replace(/\s+/g,","):void 0,i=pe(e(c),a);if(t){const u=b.get(i);if(u&&Date.now()-u.timestamp<Z){r(m,u.results),r(S,!1);return}}const d=await Ge.listFileObjects(a,e(c),e(k));r(m,d.results||[]),r(B,d.pages||1),r(D,d.total_count||0),b.set(i,{results:e(m),timestamp:Date.now()}),Ye()}catch(a){r(U,Ee(a)),ee.add({type:"error",title:"Failed to load objects",message:e(U)})}finally{r(S,!1)}}async function Oe(t){if(t<1||t>e(B))return;const a=e(M).trim()?e(M).trim().replace(/\s+/g,","):void 0,i=pe(t,a),d=b.get(i);if(!(d&&Date.now()-d.timestamp<Z))try{const u=await Ge.listFileObjects(a,t,e(k));b.set(i,{results:u.results||[],timestamp:Date.now()})}catch(u){console.debug("Prefetch failed for page",t,u)}}async function le(){if(e(f)?.id)try{await Ge.deleteFileObject(e(f).id.toString()),ee.add({type:"success",title:"Object deleted",message:`Object "${e(f).name}" has been deleted successfully.`}),r(q,!1),r(f,null),await K()}catch(t){const a=Ee(t);ee.add({type:"error",title:"Failed to delete object",message:a})}}function we(){r(n,{name:"",file:null,tags:[],description:""}),r(A,0),r(L,!0)}function $e(t){r(f,t),r(p,{name:t.name||"",tags:t.tags||[],description:t.description||""}),r(y,!0)}function Pe(t){r(f,t),r(q,!0)}async function Ue(){if(!e(n).file||!e(n).name.trim()){ee.add({type:"error",title:"Validation error",message:"Please provide a file name and select a file to upload."});return}try{r(h,!0),r(A,0),new FormData().append("file",e(n).file);const a=new XMLHttpRequest;a.upload.addEventListener("progress",i=>{i.lengthComputable&&r(A,Math.round(i.loaded/i.total*100))}),await new Promise((i,d)=>{a.addEventListener("load",async()=>{a.status>=200&&a.status<300?i():d(new Error(`Upload failed with status ${a.status}`))}),a.addEventListener("error",()=>{d(new Error("Upload failed"))});const u=localStorage.getItem("token"),N=window.location.origin;a.open("POST",`${N}/api/v1/objects/`),u&&a.setRequestHeader("Authorization",`Bearer ${u}`),a.setRequestHeader("X-File-Name",e(n).name),e(n).tags.length>0&&a.setRequestHeader("X-Tags",e(n).tags.join(",")),e(n).description.trim()&&a.setRequestHeader("X-File-Description",e(n).description.trim()),a.send(e(n).file)}),ee.add({type:"success",title:"Upload successful",message:`File "${e(n).name}" has been uploaded successfully.`}),r(L,!1),await K()}catch(t){const a=Ee(t);ee.add({type:"error",title:"Upload failed",message:a})}finally{r(h,!1),r(A,0)}}async function Ae(){if(e(f)?.id)try{await Ge.updateFileObject(e(f).id.toString(),{name:e(p).name||void 0,tags:e(p).tags,description:e(p).description||void 0}),ee.add({type:"success",title:"Object updated",message:"Object has been updated successfully."}),r(y,!1),r(f,null),await K()}catch(t){const a=Ee(t);ee.add({type:"error",title:"Failed to update object",message:a})}}async function Fe(t){try{const i=`${window.location.origin}/api/v1/objects/${t.id}/download`,d=await fetch(i,{method:"HEAD",credentials:"include"});if(!d.ok){const N=await d.text();throw new Error(N||`Download failed with status ${d.status}`)}const u=document.createElement("a");u.href=i,u.download=t.name||"download",document.body.appendChild(u),u.click(),document.body.removeChild(u)}catch(a){const i=Ee(a);ee.add({type:"error",title:"Download failed",message:i})}}function je(t){const a=t.detail.term,i=e(M).length>0,d=a.length>0;r(M,a),G&&clearTimeout(G),G=setTimeout(()=>{!i&&d?(P=e(c),r(c,1)):i&&!d?r(c,P):d&&r(c,1),b.clear(),K(),G=null},ke)}function Se(t){r(c,t.detail.page),K(!0)}function Ze(t){r(k,t.detail.pageSize),localStorage.setItem(R,e(k).toString()),r(c,1),b.clear(),K()}function Ie(t){Oe(t.detail.page)}function Je(t){const a=t.target;a.files&&a.files[0]&&(V(n,e(n).file=a.files[0]),V(n,e(n).name=a.files[0].name))}let ie=g(""),j=g("");function F(t,a){const d=t.target.value.trim();if((t.key===" "||t.key==="Enter")&&d)t.preventDefault(),X(d,a),a==="upload"?r(ie,""):r(j,"");else if(t.key==="Backspace"&&!d){t.preventDefault();const u=a==="upload"?e(n).tags:e(p).tags;u.length>0&&Qe(u.length-1,a)}}function ae(t){const a=t==="upload"?e(ie).trim():e(j).trim();a&&(X(a,t),t==="upload"?r(ie,""):r(j,""))}function X(t,a){const i=t.trim().toLowerCase();i&&(a==="upload"?e(n).tags.includes(i)||V(n,e(n).tags=[...e(n).tags,i]):e(p).tags.includes(i)||V(p,e(p).tags=[...e(p).tags,i]))}function Qe(t,a){a==="upload"?V(n,e(n).tags=e(n).tags.filter((i,d)=>d!==t)):V(p,e(p).tags=e(p).tags.filter((i,d)=>d!==t))}const xt=[{key:"name",title:"Name",cellComponent:Ht,cellProps:{entityType:"object"}},{key:"size",title:"Size",cellComponent:mt,cellProps:{getValue:t=>Gt(t.size||0)}},{key:"tags",title:"Tags",cellComponent:Qt,hideOnMobile:!0,cellProps:{tags:[]}},{key:"updated_at",title:"Last Modified",hideOnMobile:!0,cellComponent:mt,cellProps:{getValue:t=>qt(t.updated_at)}},{key:"actions",title:"Actions",align:"right",width:"min",cellComponent:Lt,cellProps:{actions:[{type:"custom",label:"Download",action:"download",title:"Download",ariaLabel:"Download object"},{type:"edit",action:"edit",title:"Update",ariaLabel:"Update object"},{type:"delete",action:"delete",title:"Delete",ariaLabel:"Delete object"}]}}],yt=`
This feature allows you to use GARM as a simple, private internal-use object storage system. The primary goal of this is to allow users to store provider binaries, agent binaries, runner tools and any other type of files needed for a functional GARM deployment.

Files are stored in the database as blobs. You do not need to configure additional storage.

It is not meant to be used to serve files outside of the needs of GARM and it does not implement S3, nor will it ever.
	`.trim();tt();var st=ca(),ot=bt(st);Bt(ot,{title:"Object Storage",description:"Manage files stored in GARM's internal object storage",$$slots:{actions:(t,a)=>{Y(t,{variant:"primary",icon:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />',$$events:{click:we},children:(i,d)=>{W();var u=se("Upload New Object");v(i,u)},$$slots:{default:!0}})}}});var et=s(ot,2),Be=l(et),_t=s(l(Be),2);o(Be);var kt=s(Be,2);{var wt=t=>{var a=sa(),i=l(a,!0);o(a),E(()=>w(i,yt)),v(t,a)};te(kt,t=>{e($)&&t(wt)})}o(et);var lt=s(et,2);Rt(lt,{get columns(){return xt},get data(){return e(m)},get loading(){return e(S)},get error(){return e(U)},itemName:"objects",emptyIconType:"document",showSearch:!0,searchType:"backend",searchPlaceholder:"Search by name or tags...",searchHelpText:"",showPagination:!1,get searchTerm(){return e(M)},set searchTerm(t){r(M,t)},$$events:{search:je,edit:t=>$e(t.detail.item),delete:t=>Pe(t.detail.item),action:t=>t.detail.type==="download"&&Fe(t.detail.item)},$$legacy:!0});var it=s(lt,2);{var $t=t=>{ra(t,{get currentPage(){return e(c)},get totalPages(){return e(B)},get totalItems(){return e(D)},get pageSize(){return e(k)},get loading(){return e(S)},itemName:"objects",$$events:{pageChange:Se,pageSizeChange:Ze,prefetch:Ie}})};te(it,t=>{!e(S)&&!e(U)&&e(D)>0&&t($t)})}var nt=s(it,2);{var Pt=t=>{ft(t,{$$events:{close:()=>!e(h)&&r(L,!1)},children:(a,i)=>{var d=ia(),u=s(l(d),2),N=l(u),ge=s(l(N),2);qe(ge),o(N);var ne=s(N,2),Me=s(l(ne),2),me=l(Me),re=s(me,2);Y(re,{type:"button",variant:"secondary",get disabled(){return e(h)},$$events:{click:()=>document.getElementById("upload-file-input")?.click()},children:(x,Q)=>{W();var I=se("Choose File");v(x,I)},$$slots:{default:!0}});var fe=s(re,2),De=l(fe,!0);o(fe),o(Me),o(ne);var ve=s(ne,2),Re=s(l(ve),2),Ce=l(Re);Xe(Ce,1,()=>e(n).tags,Ve,(x,Q,I)=>{var he=oa(),Ne=l(he),xe=s(Ne);o(he),E(()=>{w(Ne,`${e(Q)??""} `),xe.disabled=e(h),Ke(xe,"aria-label",`Remove tag ${e(Q)??""}`)}),H("click",xe,()=>Qe(I,"upload")),v(x,he)});var J=s(Ce,2);qe(J),o(Re),W(2),o(ve);var Te=s(ve,2),_=s(l(Te),2);pt(_);var de=s(_,2),ce=l(de);o(de),o(Te);var be=s(Te,2);{var Le=x=>{var Q=la(),I=l(Q),he=s(l(I),2),Ne=l(he);o(he),o(I);var xe=s(I,2),Ct=l(xe);o(xe),o(Q),E(()=>{w(Ne,`${e(A)??""}%`),It(Ct,`width: ${e(A)??""}%`)}),v(x,Q)};te(be,x=>{e(h)&&x(Le)})}var ze=s(be,2),ct=l(ze);Y(ct,{type:"button",variant:"secondary",get disabled(){return e(h)},$$events:{click:()=>r(L,!1)},children:(x,Q)=>{W();var I=se("Cancel");v(x,I)},$$slots:{default:!0}});var Dt=s(ct,2);Y(Dt,{type:"submit",variant:"primary",get disabled(){return e(h)},get loading(){return e(h)},children:(x,Q)=>{W();var I=se();E(()=>w(I,e(h)?"Uploading...":"Upload")),v(x,I)},$$slots:{default:!0}}),o(ze),o(u),o(d),E(()=>{ge.disabled=e(h),me.disabled=e(h),w(De,e(n).file?e(n).file.name:"No file chosen"),J.disabled=e(h),Ke(J,"placeholder",e(n).tags.length===0?"Type and press space to add tags...":""),_.disabled=e(h),w(ce,`${e(n).description.length??""} / 8192 characters`)}),ye(ge,()=>e(n).name,x=>V(n,e(n).name=x)),H("change",me,Je),ye(J,()=>e(ie),x=>r(ie,x)),H("keydown",J,x=>F(x,"upload")),H("blur",J,()=>ae("upload")),ye(_,()=>e(n).description,x=>V(n,e(n).description=x)),H("submit",u,gt(Ue)),v(a,d)},$$slots:{default:!0}})};te(nt,t=>{e(L)&&t(Pt)})}var dt=s(nt,2);{var jt=t=>{ft(t,{$$events:{close:()=>r(y,!1)},children:(a,i)=>{var d=da(),u=s(l(d),2),N=l(u),ge=s(l(N),2);qe(ge),o(N);var ne=s(N,2),Me=s(l(ne),2),me=l(Me);Xe(me,1,()=>e(p).tags,Ve,(_,de,ce)=>{var be=na(),Le=l(be),ze=s(Le);o(be),E(()=>{w(Le,`${e(de)??""} `),Ke(ze,"aria-label",`Remove tag ${e(de)??""}`)}),H("click",ze,()=>Qe(ce,"update")),v(_,be)});var re=s(me,2);qe(re),o(Me),W(2),o(ne);var fe=s(ne,2),De=s(l(fe),2);pt(De);var ve=s(De,2),Re=l(ve);o(ve),o(fe);var Ce=s(fe,2),J=l(Ce);Y(J,{type:"button",variant:"secondary",$$events:{click:()=>r(y,!1)},children:(_,de)=>{W();var ce=se("Cancel");v(_,ce)},$$slots:{default:!0}});var Te=s(J,2);Y(Te,{type:"submit",variant:"primary",children:(_,de)=>{W();var ce=se("Update");v(_,ce)},$$slots:{default:!0}}),o(Ce),o(u),o(d),E(()=>{Ke(re,"placeholder",e(p).tags.length===0?"Type and press space to add tags...":""),w(Re,`${e(p).description.length??""} / 8192 characters`)}),ye(ge,()=>e(p).name,_=>V(p,e(p).name=_)),ye(re,()=>e(j),_=>r(j,_)),H("keydown",re,_=>F(_,"update")),H("blur",re,()=>ae("update")),ye(De,()=>e(p).description,_=>V(p,e(p).description=_)),H("submit",u,gt(Ae)),v(a,d)},$$slots:{default:!0}})};te(dt,t=>{e(y)&&e(f)&&t(jt)})}var St=s(dt,2);{var Mt=t=>{Nt(t,{title:"Delete Object",get message(){return`Are you sure you want to delete the object '${e(f).name??""}'? This action cannot be undone.`},$$events:{confirm:le,close:()=>{r(q,!1),r(f,null)}}})};te(St,t=>{e(q)&&e(f)&&t(Mt)})}E(()=>Ft(_t,0,`w-4 h-4 ml-1 transform ${e($)?"rotate-180":""}`)),H("click",Be,()=>r($,!e($))),v(_e,st),rt()}export{Ca as component};
