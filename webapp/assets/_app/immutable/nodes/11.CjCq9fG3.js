import"../chunks/DsnmJJEf.js";import{i as tt}from"../chunks/De-I_rkH.js";import{p as at,o as bt,B as ht,l as le,q as O,g as e,m as p,h as xt,f as S,a as yt,b as f,c as rt,s,k as r,u as ct,d as l,r as i,t as z,e as j,i as U,E as Ut,D as ie,v as qe,C as _t,z as Y,y as At,x as pt,w as K}from"../chunks/BIqNNOMq.js";import{p as me,i as ne}from"../chunks/CfI2BFUj.js";import{e as Ye,i as We}from"../chunks/D8ZtP9JD.js";import{i as wt,B as W,b as Bt,g as Ve,s as It,r as Xe,c as Ke}from"../chunks/CQh-7xkh.js";import{b as Pe}from"../chunks/Gs5uNKRr.js";import{p as ut}from"../chunks/CdEA5IGF.js";import"../chunks/BSYpqPvJ.js";import"../chunks/CYb6_lpF.js";import{P as Lt}from"../chunks/Cq4AwQWc.js";import{D as Ft,G as gt,A as Rt}from"../chunks/BjNB1vhO.js";import{M as mt}from"../chunks/BFX8vI-4.js";import{t as te}from"../chunks/DgRPqjXE.js";import{e as Ue}from"../chunks/BZiHL9L3.js";import{D as Nt}from"../chunks/Db7N5hjl.js";import{E as Ht}from"../chunks/C6HeU_02.js";import{b as Gt}from"../chunks/BLHP-Xk3.js";import{f as ft,a as vt}from"../chunks/aK-A9Gop.js";import{w as qt}from"../chunks/C4VNo_Nu.js";var Vt=S('<span class="text-gray-500 dark:text-gray-400">-</span>'),Xt=S('<span class="inline-flex items-center px-2 py-0.5 text-xs font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 rounded-md"> </span>'),Kt=S('<span class="inline-flex items-center px-2 py-0.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md cursor-help"> </span>'),Yt=S('<div class="flex flex-wrap gap-1 items-center"><!> <!></div>'),Wt=S('<span class="inline-flex items-center px-2 py-0.5 text-xs font-medium text-blue-200 bg-blue-800/50 rounded-md"> </span>'),Zt=S('<div class="fixed z-50 max-w-sm pointer-events-none"><div class="bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-md px-3 py-2 shadow-lg"><div class="font-semibold mb-1">All tags:</div> <div class="flex flex-wrap gap-1"></div></div></div>'),Jt=S("<!> <!>",1);function Qt(je,A){at(A,!1);const m=p(),B=p(),R=p();let T=me(A,"item",8);const d=3;let x=p(null),D=p(!1),E=p(0),w=p(0),ae=p(!1);function b(){if(e(x)){const v=e(x).getBoundingClientRect();r(E,v.left),window.innerHeight-v.bottom<150?(r(ae,!0),r(w,v.top)):(r(ae,!1),r(w,v.bottom+4))}}function re(){r(D,!0),b()}function Z(){r(D,!1)}bt(()=>{window.addEventListener("scroll",b,!0),window.addEventListener("resize",b)}),ht(()=>{window.removeEventListener("scroll",b,!0),window.removeEventListener("resize",b)}),le(()=>O(T()),()=>{r(m,T()?.tags||[])}),le(()=>e(m),()=>{r(B,e(m).slice(0,d))}),le(()=>e(m),()=>{r(R,Math.max(0,e(m).length-d))}),xt(),tt();var fe=Jt(),N=yt(fe);{var H=v=>{var o=Vt();f(v,o)},V=v=>{var o=Yt(),$=l(o);Ye($,1,()=>e(B),We,(P,C)=>{var G=Xt(),I=l(G,!0);i(G),z(()=>j(I,e(C))),f(P,G)});var h=s($,2);{var u=P=>{var C=Kt(),G=l(C);i(C),z(()=>j(G,`+${e(R)??""} more`)),f(P,C)};ne(h,P=>{e(R)>0&&P(u)})}i(o),Gt(o,P=>r(x,P),()=>e(x)),U("mouseenter",o,function(...P){(e(m).length>d?re:void 0)?.apply(this,P)}),U("mouseleave",o,function(...P){(e(m).length>d?Z:void 0)?.apply(this,P)}),f(v,o)};ne(N,v=>{e(m),ct(()=>!e(m)||e(m).length===0)?v(H):v(V,!1)})}var k=s(N,2);{var J=v=>{var o=Zt(),$=l(o),h=s(l($),2);Ye(h,5,()=>e(m),We,(u,P)=>{var C=Wt(),G=l(C,!0);i(C),z(()=>j(G,e(P))),f(u,C)}),i(h),i($),i(o),z(()=>wt(o,`left: ${e(E)??""}px; top: ${e(w)??""}px; transform: translateY(${e(ae)?"-100%":"0"});`)),f(v,o)};ne(k,v=>{e(m),e(D),ct(()=>e(m).length>d&&e(D))&&v(J)})}f(je,fe),rt()}var ea=_t('<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>'),ta=_t('<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>'),aa=S('<div class="flex items-center justify-between border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 px-4 py-3 sm:px-6"><div class="flex flex-1 justify-between sm:hidden"><!> <!></div> <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"><div class="flex items-center gap-4"><p class="text-sm text-gray-700 dark:text-gray-300">Showing <span class="font-medium"> </span> to <span class="font-medium"> </span> of <span class="font-medium"> </span> </p> <div class="flex items-center gap-2"><label for="page-size" class="text-sm text-gray-700 dark:text-gray-300">Show:</label> <select id="page-size" class="rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white py-1 pl-2 pr-8 text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"><option>10</option><option>25</option><option>50</option><option>100</option></select></div></div> <div class="flex items-center gap-2"><!> <span class="text-sm text-gray-700 dark:text-gray-300">Page <span class="font-medium"> </span> of <span class="font-medium"> </span></span> <!></div></div></div>');function ra(je,A){at(A,!1);const m=p(),B=p(),R=p(),T=p();let d=me(A,"currentPage",8,1),x=me(A,"totalPages",8,1),D=me(A,"totalItems",8,0),E=me(A,"pageSize",12,25),w=me(A,"loading",8,!1),ae=me(A,"itemName",8,"items");const b=Ut();function re(){e(B)&&!w()&&(b("pageChange",{page:d()-1}),d()-2>0&&b("prefetch",{page:d()-2}))}function Z(){e(m)&&!w()&&(b("pageChange",{page:d()+1}),d()+2<=x()&&b("prefetch",{page:d()+2}))}function fe(M){const L=M.target,se=parseInt(L.value);b("pageSizeChange",{pageSize:se})}le(()=>(O(d()),O(x())),()=>{r(m,d()<x())}),le(()=>O(d()),()=>{r(B,d()>1)}),le(()=>(O(D()),O(d()),O(E())),()=>{r(R,D()===0?0:(d()-1)*E()+1)}),le(()=>(O(d()),O(E()),O(D())),()=>{r(T,Math.min(d()*E(),D()))}),le(()=>(O(d()),O(x()),O(w())),()=>{d()<x()&&!w()&&b("prefetch",{page:d()+1})}),xt(),tt();var N=aa(),H=l(N),V=l(H);{let M=qe(()=>!e(B)||w());W(V,{variant:"secondary",size:"sm",get disabled(){return e(M)},$$events:{click:re},children:(L,se)=>{Y();var X=ie("Previous");f(L,X)},$$slots:{default:!0}})}var k=s(V,2);{let M=qe(()=>!e(m)||w());W(k,{variant:"secondary",size:"sm",get disabled(){return e(M)},$$events:{click:Z},children:(L,se)=>{Y();var X=ie("Next");f(L,X)},$$slots:{default:!0}})}i(H);var J=s(H,2),v=l(J),o=l(v),$=s(l(o)),h=l($,!0);i($);var u=s($,2),P=l(u,!0);i(u);var C=s(u,2),G=l(C,!0);i(C);var I=s(C);i(o);var Ae=s(o,2),de=s(l(Ae),2);z(()=>{E(),At(()=>{w()})});var Ce=l(de);Ce.value=Ce.__value=10;var ve=s(Ce);ve.value=ve.__value=25;var be=s(ve);be.value=be.__value=50;var Be=s(be);Be.value=Be.__value=100,i(de),i(Ae),i(v);var Ie=s(v,2),Le=l(Ie);{let M=qe(()=>!e(B)||w());W(Le,{variant:"secondary",size:"sm",get disabled(){return e(M)},$$events:{click:re},children:(L,se)=>{var X=ea();f(L,X)},$$slots:{default:!0}})}var Me=s(Le,2),Se=s(l(Me)),Ze=l(Se,!0);i(Se);var Fe=s(Se,2),Je=l(Fe,!0);i(Fe),i(Me);var ce=s(Me,2);{let M=qe(()=>!e(m)||w());W(ce,{variant:"secondary",size:"sm",get disabled(){return e(M)},$$events:{click:Z},children:(L,se)=>{var X=ta();f(L,X)},$$slots:{default:!0}})}i(Ie),i(J),i(N),z(()=>{j(h,e(R)),j(P,e(T)),j(G,D()),j(I,` ${ae()??""}`),de.disabled=w(),j(Ze,d()),j(Je,x())}),Bt(de,E),U("change",de,fe),f(je,N),rt()}var sa=S('<div class="mt-3 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"> </div>'),oa=S('<span class="inline-flex items-center gap-1 px-2 py-1 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 rounded-md"> <button type="button" class="inline-flex items-center justify-center w-4 h-4 text-blue-700 dark:text-blue-300 hover:text-blue-900 dark:hover:text-blue-100 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800 disabled:opacity-50"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></span>'),ia=S('<div><div class="flex justify-between mb-2"><span class="text-sm font-medium text-gray-700 dark:text-gray-300">Uploading...</span> <span class="text-sm font-medium text-gray-700 dark:text-gray-300"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"><div class="bg-blue-600 h-2.5 rounded-full transition-all duration-300"></div></div></div>'),la=S('<div class="max-w-2xl w-full p-6"><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Upload New Object</h3> <form class="space-y-4"><div><label for="upload-file-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">File Name</label> <input id="upload-file-name" type="text" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm" placeholder="my-file.bin"/></div> <div><label for="upload-file-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">File</label> <div class="flex items-center gap-3"><input id="upload-file-input" type="file" class="hidden"/> <!> <span class="text-sm text-gray-600 dark:text-gray-400"> </span></div></div> <div><label for="upload-file-tags" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tags</label> <div class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 min-h-[42px] flex flex-wrap gap-2 items-center"><!> <input id="upload-file-tags" type="text" class="flex-1 min-w-[120px] outline-none bg-transparent text-gray-900 dark:text-white text-sm"/></div> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Press Space or Enter to add a tag. Press Backspace to remove the last tag.</p></div> <div><label for="upload-file-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description (optional)</label> <textarea id="upload-file-description" maxlength="8192" rows="3" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm resize-y" placeholder="Add a description for this file..."></textarea> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400"> </p></div> <!> <div class="flex justify-end space-x-3 pt-4"><!> <!></div></form></div>'),na=S('<span class="inline-flex items-center gap-1 px-2 py-1 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 rounded-md"> <button type="button" class="inline-flex items-center justify-center w-4 h-4 text-blue-700 dark:text-blue-300 hover:text-blue-900 dark:hover:text-blue-100 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></span>'),da=S('<div class="max-w-2xl w-full p-6"><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Update Object</h3> <form class="space-y-4"><div><label for="update-file-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">File Name</label> <input id="update-file-name" type="text" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"/></div> <div><label for="update-file-tags" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tags</label> <div class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 min-h-[42px] flex flex-wrap gap-2 items-center"><!> <input id="update-file-tags" type="text" class="flex-1 min-w-[120px] outline-none bg-transparent text-gray-900 dark:text-white text-sm"/></div> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Press Space or Enter to add a tag. Press Backspace to remove the last tag.</p></div> <div><label for="update-file-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description (optional)</label> <textarea id="update-file-description" maxlength="8192" rows="3" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm resize-y" placeholder="Add a description for this file..."></textarea> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400"> </p></div> <div class="flex justify-end space-x-3 pt-4"><!> <!></div></form></div>'),ca=S(`<!> <div class="mb-6"><button class="text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 dark:hover:text-indigo-300 flex items-center cursor-pointer"><svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> What's this? <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div> <!> <!> <!> <!>`,1);function Da(je,A){at(A,!1);let m=p([]),B=p(!0),R=p(""),T=p(""),d=p(1),x=p(25),D=p(1),E=p(0),w=1;const ae="garm_objects_page_size";let b=new Map;const re=300*1e3;let Z=null;const fe=500;let N=p(!1),H=p(!1),V=p(!1),k=p(null),J=p(!1),v=null,o=p({name:"",file:null,tags:[],description:""}),$=p(0),h=p(!1),u=p({name:"",tags:[],description:""});function P(t){if(t.operation==="create")I();else if(t.operation==="update"){const a=t.payload;r(m,e(m).map(n=>n.id===a.id?a:n))}else if(t.operation==="delete"){const a=t.payload.id||t.payload;r(m,e(m).filter(n=>n.id!==a)),r(E,Math.max(0,e(E)-1))}}bt(async()=>{const t=localStorage.getItem(ae);if(t){const a=parseInt(t,10);!isNaN(a)&&a>0&&r(x,a)}await I(),v=qt.subscribeToEntity("file_object",["create","update","delete"],P)}),ht(()=>{v&&(v(),v=null)});function C(t,a,n=e(x)){return`${t}-${a||"all"}-${n}`}function G(){const t=Date.now();for(const[a,n]of b.entries())t-n.timestamp>re&&b.delete(a)}async function I(t=!1){try{r(B,!t),r(R,"");const a=e(T).trim()?e(T).trim().replace(/\s+/g,","):void 0,n=C(e(d),a);if(t){const g=b.get(n);if(g&&Date.now()-g.timestamp<re){r(m,g.results),r(B,!1);return}}const c=await Ve.listFileObjects(a,e(d),e(x));r(m,c.results||[]),r(D,c.pages||1),r(E,c.total_count||0),b.set(n,{results:e(m),timestamp:Date.now()}),G()}catch(a){r(R,Ue(a)),te.add({type:"error",title:"Failed to load objects",message:e(R)})}finally{r(B,!1)}}async function Ae(t){if(t<1||t>e(D))return;const a=e(T).trim()?e(T).trim().replace(/\s+/g,","):void 0,n=C(t,a),c=b.get(n);if(!(c&&Date.now()-c.timestamp<re))try{const g=await Ve.listFileObjects(a,t,e(x));b.set(n,{results:g.results||[],timestamp:Date.now()})}catch(g){console.debug("Prefetch failed for page",t,g)}}async function de(){if(e(k)?.id)try{await Ve.deleteFileObject(e(k).id.toString()),te.add({type:"success",title:"Object deleted",message:`Object "${e(k).name}" has been deleted successfully.`}),r(N,!1),r(k,null),await I()}catch(t){const a=Ue(t);te.add({type:"error",title:"Failed to delete object",message:a})}}function Ce(){r(o,{name:"",file:null,tags:[],description:""}),r($,0),r(H,!0)}function ve(t){r(k,t),r(u,{name:t.name||"",tags:t.tags||[],description:t.description||""}),r(V,!0)}function be(t){r(k,t),r(N,!0)}async function Be(){if(!e(o).file||!e(o).name.trim()){te.add({type:"error",title:"Validation error",message:"Please provide a file name and select a file to upload."});return}try{r(h,!0),r($,0),new FormData().append("file",e(o).file);const a=new XMLHttpRequest;a.upload.addEventListener("progress",n=>{n.lengthComputable&&r($,Math.round(n.loaded/n.total*100))}),await new Promise((n,c)=>{a.addEventListener("load",async()=>{a.status>=200&&a.status<300?n():c(new Error(`Upload failed with status ${a.status}`))}),a.addEventListener("error",()=>{c(new Error("Upload failed"))});const g=localStorage.getItem("token"),q=window.location.origin;a.open("POST",`${q}/api/v1/objects/`),g&&a.setRequestHeader("Authorization",`Bearer ${g}`),a.setRequestHeader("X-File-Name",e(o).name),e(o).tags.length>0&&a.setRequestHeader("X-Tags",e(o).tags.join(",")),e(o).description.trim()&&a.setRequestHeader("X-File-Description",e(o).description.trim()),a.send(e(o).file)}),te.add({type:"success",title:"Upload successful",message:`File "${e(o).name}" has been uploaded successfully.`}),r(H,!1),await I()}catch(t){const a=Ue(t);te.add({type:"error",title:"Upload failed",message:a})}finally{r(h,!1),r($,0)}}async function Ie(){if(e(k)?.id)try{await Ve.updateFileObject(e(k).id.toString(),{name:e(u).name||void 0,tags:e(u).tags,description:e(u).description||void 0}),te.add({type:"success",title:"Object updated",message:"Object has been updated successfully."}),r(V,!1),r(k,null),await I()}catch(t){const a=Ue(t);te.add({type:"error",title:"Failed to update object",message:a})}}async function Le(t){try{const n=`${window.location.origin}/api/v1/objects/${t.id}/download`,c=await fetch(n,{method:"HEAD",credentials:"include"});if(!c.ok){const q=await c.text();throw new Error(q||`Download failed with status ${c.status}`)}const g=document.createElement("a");g.href=n,g.download=t.name||"download",document.body.appendChild(g),g.click(),document.body.removeChild(g)}catch(a){const n=Ue(a);te.add({type:"error",title:"Download failed",message:n})}}function Me(t){const a=t.detail.term,n=e(T).length>0,c=a.length>0;r(T,a),Z&&clearTimeout(Z),Z=setTimeout(()=>{!n&&c?(w=e(d),r(d,1)):n&&!c?r(d,w):c&&r(d,1),b.clear(),I(),Z=null},fe)}function Se(t){r(d,t.detail.page),I(!0)}function Ze(t){r(x,t.detail.pageSize),localStorage.setItem(ae,e(x).toString()),r(d,1),b.clear(),I()}function Fe(t){Ae(t.detail.page)}function Je(t){const a=t.target;a.files&&a.files[0]&&(K(o,e(o).file=a.files[0]),K(o,e(o).name=a.files[0].name))}let ce=p(""),M=p("");function L(t,a){const c=t.target.value.trim();if((t.key===" "||t.key==="Enter")&&c)t.preventDefault(),X(c,a),a==="upload"?r(ce,""):r(M,"");else if(t.key==="Backspace"&&!c){t.preventDefault();const g=a==="upload"?e(o).tags:e(u).tags;g.length>0&&Qe(g.length-1,a)}}function se(t){const a=t==="upload"?e(ce).trim():e(M).trim();a&&(X(a,t),t==="upload"?r(ce,""):r(M,""))}function X(t,a){const n=t.trim().toLowerCase();n&&(a==="upload"?e(o).tags.includes(n)||K(o,e(o).tags=[...e(o).tags,n]):e(u).tags.includes(n)||K(u,e(u).tags=[...e(u).tags,n]))}function Qe(t,a){a==="upload"?K(o,e(o).tags=e(o).tags.filter((n,c)=>c!==t)):K(u,e(u).tags=e(u).tags.filter((n,c)=>c!==t))}const kt=[{key:"name",title:"Name",cellComponent:Ht,cellProps:{entityType:"object"}},{key:"size",title:"Size",cellComponent:gt,cellProps:{getValue:t=>ft(t.size||0)}},{key:"tags",title:"Tags",cellComponent:Qt,hideOnMobile:!0,cellProps:{tags:[]}},{key:"updated_at",title:"Last Modified",hideOnMobile:!0,cellComponent:gt,cellProps:{getValue:t=>vt(t.updated_at)}},{key:"actions",title:"Actions",align:"right",width:"min",cellComponent:Rt,cellProps:{actions:[{type:"custom",label:"Download",action:"download",title:"Download",ariaLabel:"Download object"},{type:"edit",action:"edit",title:"Update",ariaLabel:"Update object"},{type:"delete",action:"delete",title:"Delete",ariaLabel:"Delete object"}]}}],$t=`
This feature allows you to use GARM as a simple, private internal-use object storage system. The primary goal of this is to allow users to store provider binaries, agent binaries, runner tools and any other type of files needed for a functional GARM deployment.

Files are stored in the database as blobs. You do not need to configure additional storage.

It is not meant to be used to serve files outside of the needs of GARM and it does not implement S3, nor will it ever.
	`.trim(),Pt={entityType:"repository",primaryText:{field:"name",isClickable:!0,href:"/objects/{id}"},secondaryText:{field:"description",computedValue:t=>{const a=t.description||"No description";return a.length>100?a.substring(0,100)+"...":a}},customInfo:[{icon:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />',text:t=>ft(t.size||0)},{icon:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />',text:t=>vt(t.updated_at)}],actions:[{type:"edit",handler:ve},{type:"delete",handler:be}]};tt();var st=ca(),ot=yt(st);Lt(ot,{title:"Object Storage",description:"Manage files stored in GARM's internal object storage",$$slots:{actions:(t,a)=>{W(t,{variant:"primary",icon:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />',$$events:{click:Ce},children:(n,c)=>{Y();var g=ie("Upload New Object");f(n,g)},$$slots:{default:!0}})}}});var et=s(ot,2),Re=l(et),jt=s(l(Re),2);i(Re);var Ct=s(Re,2);{var Mt=t=>{var a=sa(),n=l(a,!0);i(a),z(()=>j(n,$t)),f(t,a)};ne(Ct,t=>{e(J)&&t(Mt)})}i(et);var it=s(et,2);Ft(it,{get columns(){return kt},get data(){return e(m)},get loading(){return e(B)},get error(){return e(R)},itemName:"objects",emptyIconType:"document",showSearch:!0,searchType:"backend",searchPlaceholder:"Search by name or tags...",searchHelpText:"",showPagination:!0,get paginationComponent(){return ra},get currentPage(){return e(d)},get totalPages(){return e(D)},get totalItems(){return e(E)},get perPage(){return e(x)},get mobileCardConfig(){return Pt},get searchTerm(){return e(T)},set searchTerm(t){r(T,t)},$$events:{search:Me,pageChange:Se,pageSizeChange:Ze,prefetch:Fe,edit:t=>ve(t.detail.item),delete:t=>be(t.detail.item),action:t=>t.detail.type==="download"&&Le(t.detail.item)},$$legacy:!0});var lt=s(it,2);{var St=t=>{mt(t,{$$events:{close:()=>!e(h)&&r(H,!1)},children:(a,n)=>{var c=la(),g=s(l(c),2),q=l(g),he=s(l(q),2);Xe(he),i(q);var pe=s(q,2),Te=s(l(pe),2),xe=l(Te),oe=s(xe,2);W(oe,{type:"button",variant:"secondary",get disabled(){return e(h)},$$events:{click:()=>document.getElementById("upload-file-input")?.click()},children:(y,ee)=>{Y();var F=ie("Choose File");f(y,F)},$$slots:{default:!0}});var ye=s(oe,2),De=l(ye,!0);i(ye),i(Te),i(pe);var _e=s(pe,2),Ne=s(l(_e),2),Ee=l(Ne);Ye(Ee,1,()=>e(o).tags,We,(y,ee,F)=>{var ke=oa(),Ge=l(ke),$e=s(Ge);i(ke),z(()=>{j(Ge,`${e(ee)??""} `),$e.disabled=e(h),Ke($e,"aria-label",`Remove tag ${e(ee)??""}`)}),U("click",$e,()=>Qe(F,"upload")),f(y,ke)});var Q=s(Ee,2);Xe(Q),i(Ne),Y(2),i(_e);var ze=s(_e,2),_=s(l(ze),2);pt(_);var ue=s(_,2),ge=l(ue);i(ue),i(ze);var we=s(ze,2);{var He=y=>{var ee=ia(),F=l(ee),ke=s(l(F),2),Ge=l(ke);i(ke),i(F);var $e=s(F,2),Ot=l($e);i($e),i(ee),z(()=>{j(Ge,`${e($)??""}%`),wt(Ot,`width: ${e($)??""}%`)}),f(y,ee)};ne(we,y=>{e(h)&&y(He)})}var Oe=s(we,2),dt=l(Oe);W(dt,{type:"button",variant:"secondary",get disabled(){return e(h)},$$events:{click:()=>r(H,!1)},children:(y,ee)=>{Y();var F=ie("Cancel");f(y,F)},$$slots:{default:!0}});var zt=s(dt,2);W(zt,{type:"submit",variant:"primary",get disabled(){return e(h)},get loading(){return e(h)},children:(y,ee)=>{Y();var F=ie();z(()=>j(F,e(h)?"Uploading...":"Upload")),f(y,F)},$$slots:{default:!0}}),i(Oe),i(g),i(c),z(()=>{he.disabled=e(h),xe.disabled=e(h),j(De,e(o).file?e(o).file.name:"No file chosen"),Q.disabled=e(h),Ke(Q,"placeholder",e(o).tags.length===0?"Type and press space to add tags...":""),_.disabled=e(h),j(ge,`${e(o).description.length??""} / 8192 characters`)}),Pe(he,()=>e(o).name,y=>K(o,e(o).name=y)),U("change",xe,Je),Pe(Q,()=>e(ce),y=>r(ce,y)),U("keydown",Q,y=>L(y,"upload")),U("blur",Q,()=>se("upload")),Pe(_,()=>e(o).description,y=>K(o,e(o).description=y)),U("submit",g,ut(Be)),f(a,c)},$$slots:{default:!0}})};ne(lt,t=>{e(H)&&t(St)})}var nt=s(lt,2);{var Tt=t=>{mt(t,{$$events:{close:()=>r(V,!1)},children:(a,n)=>{var c=da(),g=s(l(c),2),q=l(g),he=s(l(q),2);Xe(he),i(q);var pe=s(q,2),Te=s(l(pe),2),xe=l(Te);Ye(xe,1,()=>e(u).tags,We,(_,ue,ge)=>{var we=na(),He=l(we),Oe=s(He);i(we),z(()=>{j(He,`${e(ue)??""} `),Ke(Oe,"aria-label",`Remove tag ${e(ue)??""}`)}),U("click",Oe,()=>Qe(ge,"update")),f(_,we)});var oe=s(xe,2);Xe(oe),i(Te),Y(2),i(pe);var ye=s(pe,2),De=s(l(ye),2);pt(De);var _e=s(De,2),Ne=l(_e);i(_e),i(ye);var Ee=s(ye,2),Q=l(Ee);W(Q,{type:"button",variant:"secondary",$$events:{click:()=>r(V,!1)},children:(_,ue)=>{Y();var ge=ie("Cancel");f(_,ge)},$$slots:{default:!0}});var ze=s(Q,2);W(ze,{type:"submit",variant:"primary",children:(_,ue)=>{Y();var ge=ie("Update");f(_,ge)},$$slots:{default:!0}}),i(Ee),i(g),i(c),z(()=>{Ke(oe,"placeholder",e(u).tags.length===0?"Type and press space to add tags...":""),j(Ne,`${e(u).description.length??""} / 8192 characters`)}),Pe(he,()=>e(u).name,_=>K(u,e(u).name=_)),Pe(oe,()=>e(M),_=>r(M,_)),U("keydown",oe,_=>L(_,"update")),U("blur",oe,()=>se("update")),Pe(De,()=>e(u).description,_=>K(u,e(u).description=_)),U("submit",g,ut(Ie)),f(a,c)},$$slots:{default:!0}})};ne(nt,t=>{e(V)&&e(k)&&t(Tt)})}var Dt=s(nt,2);{var Et=t=>{Nt(t,{title:"Delete Object",get message(){return`Are you sure you want to delete the object '${e(k).name??""}'? This action cannot be undone.`},$$events:{confirm:de,close:()=>{r(N,!1),r(k,null)}}})};ne(Dt,t=>{e(N)&&e(k)&&t(Et)})}z(()=>It(jt,0,`w-4 h-4 ml-1 transform ${e(J)?"rotate-180":""}`)),U("click",Re,()=>r(J,!e(J))),f(je,st),rt()}export{Da as component};
