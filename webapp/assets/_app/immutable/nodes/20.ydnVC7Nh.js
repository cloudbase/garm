import"../chunks/DsnmJJEf.js";import{i as Dt}from"../chunks/C7KraPli.js";import{p as At,o as Lt,l as pe,h as Ut,f as D,j as Rt,a as se,b as x,c as It,g as e,m as w,t as G,k as s,u as l,$ as Mt,s as o,w as M,B as Je,d as r,r as d,z as H,D as ge,e as j,v,q as U,i as Le,y as Ft}from"../chunks/cPTQ2Ibn.js";import{i as T}from"../chunks/DqFqoVWr.js";import{d as le,g as Ue,r as Ke,b as Et}from"../chunks/yWyZZHPR.js";import{b as Qe}from"../chunks/B-_QCM7E.js";import{p as St}from"../chunks/D4Caz1gY.js";import{p as be}from"../chunks/DMSCYqmZ.js";import{g as Re}from"../chunks/Br47IbuU.js";import{A as xe}from"../chunks/B_RLftTg.js";import{t as P}from"../chunks/Bgbd8SZ5.js";import{e as Ie}from"../chunks/BZiHL9L3.js";import{g as Xe,B as fe}from"../chunks/Cr2hBuns.js";import{D as Bt}from"../chunks/CDgX_mkE.js";import{C as Ht,a as Ze}from"../chunks/5uRpB3Rp.js";import{i as et}from"../chunks/C98nByjP.js";import{w as jt}from"../chunks/BV_mDmfH.js";var Pt=D('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-600 dark:text-gray-400">Loading template...</span></div>'),zt=D('<div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-red-800 dark:text-red-200">Error loading template</h3> <div class="mt-2 text-sm text-red-700 dark:text-red-300"> </div> <div class="mt-4 space-x-3"><!> <!></div></div></div></div>'),Gt=D('<form class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Name *</label> <input type="text" id="name" required class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"/></div> <div><label for="description" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Description</label> <input type="text" id="description" class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"/></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><span class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Forge Type</span> <!> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Cannot be changed</p></div> <div><span class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">OS Type</span> <!> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Cannot be changed</p></div></div></form>'),Vt=D('<div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Created</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div>'),Wt=D('<div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Last Updated</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div>'),Nt=D('<dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2"><div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Name</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Description</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Forge Type</dt> <dd class="mt-1"><!></dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">OS Type</dt> <dd class="mt-1"><!></dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Owner</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div> <div><dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Template ID</dt> <dd class="mt-1 text-sm text-gray-900 dark:text-white"> </dd></div> <!> <!></dl>'),Ot=D('<div class="flex items-center space-x-3"><label for="language-select" class="text-sm font-medium text-gray-700 dark:text-gray-300">Language:</label> <select id="language-select" class="px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>Bash</option><option>PowerShell</option><option>Python</option><option>Text</option></select></div>'),qt=D('<div class="mb-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4"><h4 class="text-sm font-medium text-blue-900 dark:text-blue-100 mb-2">Available Template Variables</h4> <p class="text-xs text-blue-800 dark:text-blue-200 mb-3">Your template can use the following variables using Go template syntax (e.g., <code class="bg-blue-100 dark:bg-blue-800 px-1 rounded"></code>):</p> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-xs"><div><h5 class="font-medium text-blue-900 dark:text-blue-100 mb-1">Runner Info</h5> <ul class="space-y-1 text-blue-800 dark:text-blue-200"><li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RunnerName</code> - Runner name</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RunnerLabels</code> - Comma separated labels</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RunnerUsername</code> - Runner service username</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RunnerGroup</code> - Runner service group</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.GitHubRunnerGroup</code> - GitHub runner group</li></ul></div> <div><h5 class="font-medium text-blue-900 dark:text-blue-100 mb-1">Download & Install</h5> <ul class="space-y-1 text-blue-800 dark:text-blue-200"><li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.FileName</code> - Download file name</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.DownloadURL</code> - Runner download URL</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.TempDownloadToken</code> - Download token</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.RepoURL</code> - Repository URL</li></ul></div> <div><h5 class="font-medium text-blue-900 dark:text-blue-100 mb-1">Configuration</h5> <ul class="space-y-1 text-blue-800 dark:text-blue-200"><li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.MetadataURL</code> - Instance metadata URL</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.CallbackURL</code> - Status callback URL</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.CallbackToken</code> - Callback token</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.CABundle</code> - CA certificate bundle</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.EnableBootDebug</code> - Enable debug mode</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.UseJITConfig</code> - Use JIT configuration</li> <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">.ExtraContext</code> - Additional context map</li></ul></div></div> <p class="text-xs text-blue-700 dark:text-blue-300 mt-3">ðŸ’¡ <strong>Tip:</strong> Use <code class="bg-blue-100 dark:bg-blue-800 px-1 rounded"></code> for conditional content, or <code class="bg-blue-100 dark:bg-blue-800 px-1 rounded"></code> to iterate over extra context.</p></div>'),Yt=D('<div class="flex-1 min-h-0"><!> <p class="mt-2 text-sm text-gray-500 dark:text-gray-400"> </p></div>'),Jt=D('<div class="flex items-center justify-between mb-4"><div></div> <button type="button" class="inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors" title="Copy template content to clipboard"><svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> Copy Code</button></div> <div class="flex-1 min-h-0"><!></div>',1),Kt=D('<!> <div class="flex flex-col h-full space-y-6"><div class="bg-white dark:bg-gray-800 shadow rounded-lg flex-shrink-0"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4">Template Information</h3> <!></div></div> <div class="bg-white dark:bg-gray-800 shadow rounded-lg flex-1 flex flex-col min-h-0"><div class="px-4 py-5 sm:p-6 flex-1 flex flex-col"><div class="flex items-center justify-between mb-4"><h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white">Template Content</h3> <!></div> <!> <!></div></div></div>',1),Qt=D('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800 dark:border-gray-700"><div class="mt-3 text-center"><div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900"><svg class="h-6 w-6 text-red-600 dark:text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.996-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div> <h3 class="text-lg font-medium text-gray-900 dark:text-white mt-4">Delete Template</h3> <div class="mt-2 px-7 py-3"><p class="text-sm text-gray-500 dark:text-gray-400">Are you sure you want to delete the template "<strong> </strong>"? This action cannot be undone.</p></div> <div class="flex justify-center space-x-3 px-4 py-3"><!> <!></div></div></div></div>'),Xt=D("<!> <!> <!>",1);function ba(tt,at){At(at,!1);const ne=w(),ye=w(),he=w();let ie=w(!0),t=w(null),O=w(""),h=w(!1),n=w({name:"",description:"",data:new Uint8Array}),u=w(""),X=w("text"),V=w(!1),$=w({name:"",description:""}),z=w(""),_e=w(!1),ce=w(!1);async function ke(){try{if(s(ie,!0),s(O,""),s(t,await Ue.getTemplate(e(ne))),!e(t))throw new Error("Template not found");if(M(n,e(n).name=e(t).name||""),M(n,e(n).description=e(t).description||""),M($,e($).name=e(t).name||""),M($,e($).description=e(t).description||""),e(t).data)try{if(Array.isArray(e(t).data)){const a=new Uint8Array(e(t).data);s(u,new TextDecoder().decode(a)),s(z,e(u))}else s(u,atob(e(t).data)),s(z,e(u))}catch(a){console.error("Failed to decode template data:",a),s(u,""),s(z,"")}else s(u,""),s(z,"")}catch(a){s(O,Ie(a)),P.add({type:"error",title:"Failed to load template",message:e(O)})}finally{s(ie,!1)}}async function Me(){if(!(!e(t)?.id||!e(he)))try{const a={name:e(n).name,description:e(n).description||void 0,data:Array.from(new TextEncoder().encode(e(u)))},p=await Ue.updateTemplate(e(t).id,a);s(t,p),P.add({type:"success",title:"Template updated",message:`Template "${e(n).name}" has been updated successfully.`}),M($,e($).name=e(n).name),M($,e($).description=e(n).description),s(z,e(u)),s(h,!1)}catch(a){const p=Ie(a);P.add({type:"error",title:"Failed to update template",message:p})}}async function rt(){if(e(t)?.id)try{await Ue.deleteTemplate(e(t).id),P.add({type:"success",title:"Template deleted",message:`Template "${e(t).name}" has been deleted successfully.`}),Re(le("/templates"))}catch(a){const p=Ie(a);P.add({type:"error",title:"Failed to delete template",message:p})}}function Fe(){s(h,!0),s(V,!1)}function dt(){return e(n).name!==e($).name||e(n).description!==e($).description||e(u)!==e(z)}function ot(){if(dt()){s(ce,!0);return}Ee()}function Ee(){if(s(h,!1),s(V,!1),be.url.searchParams.get("edit")==="true"){Re(le("/templates"));return}if(e(t))if(M(n,e(n).name=e(t).name||""),M(n,e(n).description=e(t).description||""),e(t).data)try{if(Array.isArray(e(t).data)){const a=new Uint8Array(e(t).data);s(u,new TextDecoder().decode(a))}else s(u,atob(e(t).data))}catch(a){console.error("Failed to decode template data:",a),s(u,"")}else s(u,"")}function st(){s(ce,!1),Ee()}function Se(a){switch(a){case"github":return{color:"blue",text:"GitHub"};case"gitea":return{color:"green",text:"Gitea"};default:return{color:"gray",text:a||"Unknown"}}}function Be(a){switch(a){case"linux":return{color:"blue",text:"Linux"};case"windows":return{color:"info",text:"Windows"};default:return{color:"gray",text:a||"Unknown"}}}function we(){if(!e(t)?.data)return"";try{if(Array.isArray(e(t).data)){const a=new Uint8Array(e(t).data);return new TextDecoder().decode(a)}else return atob(e(t).data)}catch(a){return console.error("Failed to decode template data:",a),"Error: Failed to decode template content"}}function He(a){const A=a.split(`
`)[0]?.trim()||"";return A.startsWith("#!/bin/bash")||A.startsWith("#!/bin/sh")?"bash":A.startsWith("#!/usr/bin/env pwsh")||A.includes("#ps1_sysnative")?"powershell":A.startsWith("#!/usr/bin/env python")||A.startsWith("#!/usr/bin/python")?"python":a.includes("param(")||a.includes("Write-Host")||a.includes("$_")?"powershell":a.includes("def ")||a.includes("import ")||a.includes("print(")?"python":a.includes("echo ")||a.includes("export ")||a.includes("if [")?"bash":"text"}async function lt(a){try{await navigator.clipboard.writeText(a),P.add({type:"success",title:"Copied to clipboard",message:"Template content has been copied to your clipboard."})}catch(p){console.error("Failed to copy to clipboard:",p),P.add({type:"error",title:"Copy failed",message:"Failed to copy content to clipboard. Please try again."})}}Lt(()=>{if(e(ne))return ke().then(()=>{be.url.searchParams.get("edit")==="true"&&Fe()}),jt.subscribeToEntity("template",["update","delete"],p=>{p.payload&&p.payload.id===e(ne)&&(p.operation==="update"?e(h)?P.add({type:"info",title:"Template updated",message:"This template has been updated externally. Your changes are preserved."}):ke():p.operation==="delete"&&(P.add({type:"info",title:"Template deleted",message:`Template "${e(t)?.name||"Unknown"}" has been deleted.`}),Re(le("/templates"))))});s(O,"Invalid template ID"),s(ie,!1)}),pe(()=>be,()=>{s(ne,parseInt(be.params.id||"0"))}),pe(()=>(e(u),e(V)),()=>{e(u)&&!e(V)&&s(X,He(e(u)))}),pe(()=>(e(n),e($),e(u),e(z)),()=>{s(ye,e(n).name!==e($).name||e(n).description!==e($).description||e(u)!==e(z))}),pe(()=>(e(ye),e(n),e(u)),()=>{s(he,e(ye)&&e(n).name.trim().length>0&&e(u).trim().length>0)}),Ut(),Dt();var je=Xt();Rt(a=>{G(()=>Mt.title=`${e(t),l(()=>e(t)?.name||"Template")??""} - GARM`)});var Pe=se(je);{var nt=a=>{var p=Pt();x(a,p)},it=a=>{var p=Je(),A=se(p);{var ue=F=>{var E=zt(),q=r(E),W=o(r(q),2),R=o(r(W),2),Y=r(R,!0);d(R);var S=o(R,2),J=r(S);xe(J,{variant:"secondary",size:"sm",$$events:{click:ke},children:(K,ee)=>{H();var te=ge("Try Again");x(K,te)},$$slots:{default:!0}});var N=o(J,2);{let K=v(()=>(U(le),l(()=>le("/templates"))));xe(N,{variant:"secondary",size:"sm",get href(){return e(K)},children:(ee,te)=>{H();var ae=ge("Back to Templates");x(ee,ae)},$$slots:{default:!0}})}d(S),d(W),d(q),d(E),G(()=>j(Y,e(O))),x(F,E)},Z=F=>{var E=Je(),q=se(E);{var W=R=>{const Y=v(()=>(U(et),l(et))),S=v(()=>(e(t),l(()=>e(t).owner_id==="system"))),J=v(()=>e(Y)||!e(S)),N=v(()=>e(Y)||!e(S));var K=Kt(),ee=se(K);{let m=v(()=>(e(t),l(()=>e(t).name||"Unnamed Template"))),i=v(()=>(U(Xe),e(t),l(()=>Xe(e(t).forge_type||"unknown")))),c=v(()=>e(h)?ot:e(J)?Fe:null),g=v(()=>e(h)?Me:e(N)?()=>s(_e,!0):null),f=v(()=>e(h)?"Close":"Edit"),b=v(()=>e(h)?"Save Changes":"Delete"),y=v(()=>(e(h),"secondary")),I=v(()=>e(h)?"primary":"danger"),B=v(()=>e(h)?!e(he):!1),Q=v(()=>e(h)?"<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 18L18 6M6 6l12 12'/>":"<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z'/>"),re=v(()=>e(h)?"<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h8a2 2 0 002-2V9a2 2 0 00-2-2h-3m0 0V5a2 2 0 00-2-2H9a2 2 0 00-2 2v2m0 0h4'/>":"<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16'/>");Bt(ee,{get title(){return e(m)},subtitle:"View and manage template details",get forgeIcon(){return e(i)},get onEdit(){return e(c)},get onDelete(){return e(g)},get editLabel(){return e(f)},get deleteLabel(){return e(b)},get editVariant(){return e(y)},get deleteVariant(){return e(I)},get deleteDisabled(){return e(B)},get editIcon(){return e(Q)},get deleteIcon(){return e(re)}})}var te=o(ee,2),ae=r(te),Ge=r(ae),vt=o(r(Ge),2);{var pt=m=>{var i=Gt(),c=r(i),g=r(c),f=o(r(g),2);Ke(f),d(g);var b=o(g,2),y=o(r(b),2);Ke(y),d(b),d(c);var I=o(c,2),B=r(I),Q=o(r(B),2);{var re=C=>{const L=v(()=>(e(t),l(()=>Se(e(t).forge_type))));fe(C,{get variant(){return U(e(L)),l(()=>e(L).color)},get text(){return U(e(L)),l(()=>e(L).text)}})};T(Q,C=>{e(t),l(()=>e(t).forge_type)&&C(re)})}H(2),d(B);var me=o(B,2),de=o(r(me),2);{var ve=C=>{const L=v(()=>(e(t),l(()=>Be(e(t).os_type))));fe(C,{get variant(){return U(e(L)),l(()=>e(L).color)},get text(){return U(e(L)),l(()=>e(L).text)}})};T(de,C=>{e(t),l(()=>e(t).os_type)&&C(ve)})}H(2),d(me),d(I),d(i),Qe(f,()=>e(n).name,C=>M(n,e(n).name=C)),Qe(y,()=>e(n).description,C=>M(n,e(n).description=C)),Le("submit",i,St(Me)),x(m,i)},gt=m=>{var i=Nt(),c=r(i),g=o(r(c),2),f=r(g,!0);d(g),d(c);var b=o(c,2),y=o(r(b),2),I=r(y,!0);d(y),d(b);var B=o(b,2),Q=o(r(B),2),re=r(Q);{var me=k=>{const _=v(()=>(e(t),l(()=>Se(e(t).forge_type))));fe(k,{get variant(){return U(e(_)),l(()=>e(_).color)},get text(){return U(e(_)),l(()=>e(_).text)}})};T(re,k=>{e(t),l(()=>e(t).forge_type)&&k(me)})}d(Q),d(B);var de=o(B,2),ve=o(r(de),2),C=r(ve);{var L=k=>{const _=v(()=>(e(t),l(()=>Be(e(t).os_type))));fe(k,{get variant(){return U(e(_)),l(()=>e(_).color)},get text(){return U(e(_)),l(()=>e(_).text)}})};T(C,k=>{e(t),l(()=>e(t).os_type)&&k(L)})}d(ve),d(de);var $e=o(de,2),Oe=o(r($e),2),kt=r(Oe,!0);d(Oe),d($e);var Ce=o($e,2),qe=o(r(Ce),2),wt=r(qe,!0);d(qe),d(Ce);var Ye=o(Ce,2);{var Tt=k=>{var _=Vt(),oe=o(r(_),2),De=r(oe,!0);d(oe),d(_),G(Ae=>j(De,Ae),[()=>(e(t),l(()=>new Date(e(t).created_at).toLocaleDateString()))]),x(k,_)};T(Ye,k=>{e(t),l(()=>e(t).created_at)&&k(Tt)})}var $t=o(Ye,2);{var Ct=k=>{var _=Wt(),oe=o(r(_),2),De=r(oe,!0);d(oe),d(_),G(Ae=>j(De,Ae),[()=>(e(t),l(()=>new Date(e(t).updated_at).toLocaleDateString()))]),x(k,_)};T($t,k=>{e(t),l(()=>e(t).updated_at)&&k(Ct)})}d(i),G(()=>{j(f,(e(t),l(()=>e(t).name||"Unnamed Template"))),j(I,(e(t),l(()=>e(t).description||"No description"))),j(kt,(e(t),l(()=>e(t).owner_id==="system"?"System":e(t).owner_id||"Unknown"))),j(wt,(e(t),l(()=>e(t).id)))}),x(m,i)};T(vt,m=>{e(h)?m(pt):m(gt,!1)})}d(Ge),d(ae);var Ve=o(ae,2),We=r(Ve),Te=r(We),bt=o(r(Te),2);{var xt=m=>{var i=Ot(),c=o(r(i),2);G(()=>{e(X),Ft(()=>{e(V)})});var g=r(c);g.value=g.__value="bash";var f=o(g);f.value=f.__value="powershell";var b=o(f);b.value=b.__value="python";var y=o(b);y.value=y.__value="text",d(c),d(i),Et(c,()=>e(X),I=>s(X,I)),Le("change",c,()=>s(V,!0)),x(m,i)};T(bt,m=>{e(h)&&m(xt)})}d(Te);var Ne=o(Te,2);{var ft=m=>{var i=qt(),c=o(r(i),2),g=o(r(c));g.textContent="{{ .RunnerName }}",H(),d(c);var f=o(c,4),b=o(r(f),3);b.textContent="{{if .CABundle}}...{{end}}";var y=o(b,2);y.textContent="{{range $key, $value := .ExtraContext}}{{$key}}: {{$value}}{{end}}",H(),d(f),d(i),x(m,i)};T(Ne,m=>{e(h)&&m(ft)})}var yt=o(Ne,2);{var ht=m=>{var i=Yt(),c=r(i);{let b=v(()=>!e(V));Ze(c,{get language(){return e(X)},get autoDetect(){return e(b)},enableTemplateCompletion:!0,minHeight:"400px",placeholder:"Enter your template script content here...",get value(){return e(u)},set value(y){s(u,y)},$$events:{change:y=>s(u,y.detail.value)},$$legacy:!0})}var g=o(c,2),f=r(g);d(g),d(i),G(()=>j(f,`Template content should be a ${e(t),l(()=>e(t).os_type==="windows"?"PowerShell":"bash")??""} script for runner installation and configuration on ${e(t),l(()=>e(t).os_type)??""}.`)),x(m,i)},_t=m=>{var i=Jt(),c=se(i),g=o(r(c),2);d(c);var f=o(c,2),b=r(f);{let y=v(()=>l(we)),I=v(()=>l(()=>He(we())));Ze(b,{get value(){return e(y)},get language(){return e(I)},readonly:!0,minHeight:"400px"})}d(f),Le("click",g,()=>lt(we())),x(m,i)};T(yt,m=>{e(h)?m(ht):m(_t,!1)})}d(We),d(Ve),d(te),x(R,K)};T(q,R=>{e(t)&&R(W)},!0)}x(F,E)};T(A,F=>{e(O)&&!e(t)?F(ue):F(Z,!1)},!0)}x(a,p)};T(Pe,a=>{e(ie)?a(nt):a(it,!1)})}var ze=o(Pe,2);{var ct=a=>{var p=Qt(),A=r(p),ue=r(A),Z=o(r(ue),4),F=r(Z),E=o(r(F)),q=r(E,!0);d(E),H(),d(F),d(Z);var W=o(Z,2),R=r(W);xe(R,{variant:"secondary",$$events:{click:()=>s(_e,!1)},children:(S,J)=>{H();var N=ge("Cancel");x(S,N)},$$slots:{default:!0}});var Y=o(R,2);xe(Y,{variant:"danger",$$events:{click:rt},children:(S,J)=>{H();var N=ge("Delete");x(S,N)},$$slots:{default:!0}}),d(W),d(ue),d(A),d(p),G(()=>j(q,(e(t),l(()=>e(t).name)))),x(a,p)};T(ze,a=>{e(_e)&&e(t)&&a(ct)})}var ut=o(ze,2);{var mt=a=>{Ht(a,{title:"Unsaved Changes",message:"You have unsaved changes. Are you sure you want to discard them?",confirmText:"Discard Changes",cancelText:"Stay on Page",variant:"warning",$$events:{close:()=>s(ce,!1),confirm:st}})};T(ut,a=>{e(ce)&&a(mt)})}x(tt,je),It()}export{ba as component};
