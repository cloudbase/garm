import{f as x,e as G,a as b,s as z,t as ue,c as re}from"./o8CdT7B0.js";import{i as Rt}from"./ChJfoPF0.js";import{p as Pt,v as Ct,m as c,o as $t,g as e,d as r,q as jt,l as be,b as At,f as J,s as t,c as i,r as o,t as h,n as Se,k as ce,u as f,a as It,i as Ot,h as Lt}from"./DUMcBckj.js";import{p as Yr,i as _,s as qt,a as Bt}from"./i7pKks78.js";import{e as ze,i as Re}from"./DC7Aeygn.js";import{s as Pe,r as j,b as ve,g as A,c as Zr,d as et}from"./By1mMPic.js";import{b as N,a as rt}from"./BtzOUN4g.js";import{p as Ut}from"./CdEA5IGF.js";import{M as Ht}from"./bEwPjd5X.js";import{e as Ce}from"./BZiHL9L3.js";import{J as Dt,U as Gt,a as Jt,b as Nt}from"./C1UCn1OY.js";import{w as Er}from"./DTRhxHIE.js";import{e as Vt}from"./B-DY0PIj.js";var Wt=x('<div class="rounded-md bg-red-50 dark:bg-red-900 p-4"><p class="text-sm font-medium text-red-800 dark:text-red-200"> </p></div>'),Ft=x('<div class="animate-pulse bg-gray-200 dark:bg-gray-700 h-10 rounded"></div>'),Kt=x("<option><!></option>"),Qt=x('<select id="entity" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option> </option><!></select>'),Xt=x('<div class="animate-pulse bg-gray-200 dark:bg-gray-700 h-10 rounded"></div>'),Yt=x("<option> </option>"),Zt=x('<select id="provider" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>Select a provider</option><!></select>'),ea=x('<div class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700 flex items-center"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"></div> <span class="text-sm text-gray-600 dark:text-gray-400">Loading templates...</span></div>'),ra=x("<option> <!></option>"),ta=x('<select id="template" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"></select> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Templates define how the runner software is installed and configured. <!></p>',1),aa=x('<div class="w-full px-3 py-2 border border-yellow-300 dark:border-yellow-600 rounded-md bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200"><p class="text-sm"> </p> <p class="text-xs mt-1"><a class="text-yellow-700 dark:text-yellow-300 hover:underline">Create a template first</a> or proceed without a template to use default behavior.</p></div>'),oa=x('<div class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700 text-gray-500 dark:text-gray-400"><p class="text-sm">Select an entity first to see available templates</p></div>'),ia=x('<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200"> <button type="button" class="ml-1 h-4 w-4 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800 flex items-center justify-center cursor-pointer"><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></span>'),sa=x('<div class="flex flex-wrap gap-2"></div>'),da=x('<button type="button" class="underline hover:text-yellow-800 dark:hover:text-yellow-300 cursor-pointer">Enable agent mode</button>'),la=x('<div class="ml-6 flex items-start space-x-2 text-xs text-yellow-700 dark:text-yellow-400"><svg class="w-4 h-4 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span> <!></span></div>'),na=x('<div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Entity & Provider Configuration</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="entity" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"> <span class="text-red-500">*</span></label> <!></div> <div><label for="provider" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Provider <span class="text-red-500">*</span></label> <!></div></div></div> <div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Image & OS Configuration</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="image" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Image <span class="text-red-500">*</span></label> <input id="image" type="text" required placeholder="e.g., ubuntu:22.04" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="flavor" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Flavor <span class="text-red-500">*</span></label> <input id="flavor" type="text" required placeholder="e.g., default" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="osType" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">OS Type</label> <select id="osType" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>Linux</option><option>Windows</option></select></div> <div><label for="osArch" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Architecture</label> <select id="osArch" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>AMD64</option><option>ARM64</option></select></div></div> <div><label for="template" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Runner Install Template</label> <!></div></div> <div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Runner Limits & Timing</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><label for="minIdleRunners" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Min Idle Runners</label> <input id="minIdleRunners" type="number" min="0" placeholder="0" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="maxRunners" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Max Runners</label> <input id="maxRunners" type="number" min="1" placeholder="10" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="bootstrapTimeout" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Bootstrap Timeout (min)</label> <input id="bootstrapTimeout" type="number" min="1" placeholder="20" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div></div></div> <div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Advanced Settings</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><label for="runnerPrefix" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Runner Prefix</label> <input id="runnerPrefix" type="text" placeholder="garm" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="priority" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Priority</label> <input id="priority" type="number" min="1" placeholder="100" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="githubRunnerGroup" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">GitHub Runner Group (optional)</label> <input id="githubRunnerGroup" type="text" placeholder="Default group" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div></div> <div><label for="tag-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Tags</label> <div class="space-y-2"><div class="flex"><input id="tag-input" type="text" placeholder="Enter a tag" class="flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/> <button type="button" class="px-3 py-2 bg-blue-600 text-white rounded-r-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer">Add</button></div> <!></div></div> <fieldset><legend class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Extra Specs (JSON)</legend> <!></fieldset> <div class="flex items-center"><input id="enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="enabled" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">Enable pool immediately</label></div> <div class="space-y-2"><div class="flex items-center"><input id="enableShell" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded disabled:opacity-50 disabled:cursor-not-allowed"/> <label for="enableShell">Enable Shell</label> <div class="ml-2 relative group"><svg class="w-4 h-4 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="absolute left-full top-1/2 transform -translate-y-1/2 ml-2 w-80 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">This enables remote shell in the GARM agent, allowing users to connect via garm-cli or web UI using websockets. <div class="absolute right-full top-1/2 transform -translate-y-1/2 border-4 border-transparent border-r-gray-900"></div></div></div></div> <!></div></div>',1),ua=x('<div class="flex items-center"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div> Creating...</div>'),ba=x('<div class="max-w-6xl w-full max-h-[90vh] overflow-y-auto"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700"><h2 class="text-xl font-semibold text-gray-900 dark:text-white">Create New Pool</h2></div> <form class="p-6 space-y-6"><!> <fieldset><legend class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Entity Level <span class="text-red-500">*</span></legend> <div class="grid grid-cols-3 gap-4"><button type="button"><svg class="w-8 h-8 mb-2 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"></path></svg> <span class="text-sm font-medium text-gray-900 dark:text-white">Repository</span></button> <button type="button"><svg class="w-8 h-8 mb-2 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> <span class="text-sm font-medium text-gray-900 dark:text-white">Organization</span></button> <button type="button"><svg class="w-8 h-8 mb-2 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg> <span class="text-sm font-medium text-gray-900 dark:text-white">Enterprise</span></button></div></fieldset> <!> <div class="flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700"><button type="button" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer">Cancel</button> <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"><!></button></div></form></div>'),ca=x("<!> <!>",1);function Ta(tt,$e){Pt($e,!1);const[at,ot]=qt(),je=()=>Bt(Vt,"$eagerCache",at),q=c(),ge=Ct();let Ae=Yr($e,"initialEntityType",8,""),Mr=Yr($e,"initialEntityId",8,""),pe=c(!1),V=c(""),d=c(Ae()),T=c([]),Ie=c([]),I=c([]),Oe=c(!1),Le=c(!1),qe=c(!1),K=c(!1),W=c(null),n=c(Mr()),Q=c(""),te=c(""),ae=c(""),Be=c(void 0),Ue=c(void 0),He=c(void 0),De=c(100),Ge=c("garm"),R=c("linux"),fe=c("amd64"),Je=c(""),Ne=c(!0),me=c(!1),B=c([]),X=c(""),oe=c("{}"),U=c(void 0);async function it(){try{r(Le,!0),r(Ie,await A.listProviders())}catch(s){r(V,Ce(s))}finally{r(Le,!1)}}async function Tr(){try{r(qe,!0);const s=Ve();if(!s){r(I,[]);return}if(r(I,await A.listTemplates(e(R),void 0,s)),!e(U)||!e(I).find(l=>l.id===e(U))){const l=e(I).find(m=>m.owner_id==="system");l?r(U,l.id):e(I).length>0&&r(U,e(I)[0].id)}}catch(s){r(V,Ce(s))}finally{r(qe,!1)}}function Ve(){if(!e(n)||!e(T))return null;const s=e(T).find(l=>l.id===e(n));if(!s)return null;if("forge_type"in s)return s.forge_type;if("endpoint"in s){const l=s.endpoint;if(l&&"endpoint_type"in l)return l.endpoint_type||null}return"github"}function ye(){if(!e(n)||!e(T))return!1;const s=e(T).find(l=>l.id===e(n));return s&&"agent_mode"in s?s.agent_mode??!1:!1}async function We(){if(e(d))try{switch(r(Oe,!0),r(T,[]),e(d)){case"repository":r(T,await A.listRepositories());break;case"organization":r(T,await A.listOrganizations());break;case"enterprise":r(T,await A.listEnterprises());break}}catch(s){r(V,Ce(s))}finally{r(Oe,!1)}}function Fe(s){e(d)!==s&&(r(d,s),r(n,""),r(U,void 0),We())}function Sr(s){if(s.operation!=="update")return;const l=s.payload;if(e(d)==="repository"&&l.id===e(n)){const m=je().repositories.find(P=>P.id===e(n));m&&(Object.assign(m,l),r(q,ye()))}else if(e(d)==="organization"&&l.id===e(n)){const m=je().organizations.find(P=>P.id===e(n));m&&(Object.assign(m,l),r(q,ye()))}else if(e(d)==="enterprise"&&l.id===e(n)){const m=je().enterprises.find(P=>P.id===e(n));m&&(Object.assign(m,l),r(q,ye()))}}async function Ke(s){if(!(!e(n)||!e(d)))try{switch(e(d)){case"repository":await A.updateRepository(e(n),s);break;case"organization":await A.updateOrganization(e(n),s);break;case"enterprise":await A.updateEnterprise(e(n),s);break}await We(),r(K,!1)}catch(l){throw l}}function st(){return!e(n)||!e(T)?null:e(T).find(s=>s.id===e(n))||null}function zr(){e(X).trim()&&!e(B).includes(e(X).trim())&&(r(B,[...e(B),e(X).trim()]),r(X,""))}function dt(s){r(B,e(B).filter((l,m)=>m!==s))}function lt(s){s.key==="Enter"&&(s.preventDefault(),zr())}async function nt(){if(!e(d)||!e(n)||!e(Q)||!e(te)||!e(ae)){r(V,"Please fill in all required fields");return}try{r(pe,!0),r(V,"");let s={};if(e(oe).trim())try{s=JSON.parse(e(oe))}catch{throw new Error("Invalid JSON in extra specs")}const l={provider_name:e(Q),image:e(te),flavor:e(ae),max_runners:e(Be)||10,min_idle_runners:e(Ue)||0,runner_bootstrap_timeout:e(He)||20,priority:e(De),runner_prefix:e(Ge),os_type:e(R),os_arch:e(fe),"github-runner-group":e(Je)||void 0,enabled:e(Ne),enable_shell:e(me),tags:e(B),extra_specs:e(oe).trim()?s:void 0,template_id:e(U)};if(Ae()&&Mr())ge("submit",l);else{switch(e(d)){case"repository":await A.createRepositoryPool(e(n),l);break;case"organization":await A.createOrganizationPool(e(n),l);break;case"enterprise":await A.createEnterprisePool(e(n),l);break;default:throw new Error("Invalid entity level")}ge("submit",l)}}catch(s){r(V,Ce(s))}finally{r(pe,!1)}}$t(()=>{it(),Ae()&&We(),e(d)&&(e(d)==="repository"||e(d)==="organization"||e(d)==="enterprise")&&r(W,Er.subscribeToEntity(e(d),["update"],Sr))}),jt(()=>{e(W)&&(e(W)(),r(W,null))}),be(()=>{},()=>{r(q,ye())}),be(()=>e(q),()=>{e(q)||r(me,!1)}),be(()=>(e(n),e(R)),()=>{e(n)&&e(R)&&Tr()}),be(()=>(e(R),e(n)),()=>{e(R)&&e(n)&&Tr()}),be(()=>(e(d),e(W),Er),()=>{e(d)&&(e(d)==="repository"||e(d)==="organization"||e(d)==="enterprise")&&(e(W)&&e(W)(),r(W,Er.subscribeToEntity(e(d),["update"],Sr)))}),At(),Rt();var Rr=ca(),Pr=J(Rr);Ht(Pr,{$$events:{close:()=>ge("close")},children:(s,l)=>{var m=ba(),P=t(i(m),2),xe=i(P);{var ie=k=>{var S=Wt(),ee=i(S),we=i(ee,!0);o(ee),o(S),h(()=>z(we,e(V))),b(k,S)};_(xe,k=>{e(V)&&k(ie)})}var Y=t(xe,2),he=t(i(Y),2),se=i(he),de=t(se,2),H=t(de,2);o(he),o(Y);var F=t(Y,2);{var Qe=k=>{var S=na(),ee=J(S),we=t(i(ee),2),Ze=i(we),er=i(Ze),ct=i(er);Se(),o(er);var vt=t(er,2);{var gt=a=>{var v=Ft();b(a,v)},pt=a=>{var v=Qt();h(()=>{e(n),ce(()=>{e(d),e(T)})});var w=i(v),C=i(w);o(w),w.value=w.__value="";var $=t(w);ze($,1,()=>e(T),Re,(p,u)=>{var y=Kt(),D=i(y);{var le=g=>{var M=ue();h(()=>z(M,`${e(u),f(()=>e(u).owner)??""}/${e(u),f(()=>e(u).name)??""} (${e(u),f(()=>e(u).endpoint?.name)??""})`)),b(g,M)},L=g=>{var M=ue();h(()=>z(M,`${e(u),f(()=>e(u).name)??""} (${e(u),f(()=>e(u).endpoint?.name)??""})`)),b(g,M)};_(D,g=>{e(d)==="repository"?g(le):g(L,!1)})}o(y);var E={};h(()=>{E!==(E=(e(u),f(()=>e(u).id)))&&(y.value=(y.__value=(e(u),f(()=>e(u).id)))??"")}),b(p,y)}),o(v),h(()=>z(C,`Select a ${e(d)??""}`)),ve(v,()=>e(n),p=>r(n,p)),b(a,v)};_(vt,a=>{e(Oe)?a(gt):a(pt,!1)})}o(Ze);var Cr=t(Ze,2),ft=t(i(Cr),2);{var mt=a=>{var v=Xt();b(a,v)},yt=a=>{var v=Zt();h(()=>{e(Q),ce(()=>{e(Ie)})});var w=i(v);w.value=w.__value="";var C=t(w);ze(C,1,()=>e(Ie),Re,($,p)=>{var u=Yt(),y=i(u,!0);o(u);var D={};h(()=>{z(y,(e(p),f(()=>e(p).name))),D!==(D=(e(p),f(()=>e(p).name)))&&(u.value=(u.__value=(e(p),f(()=>e(p).name)))??"")}),b($,u)}),o(v),ve(v,()=>e(Q),$=>r(Q,$)),b(a,v)};_(ft,a=>{e(Le)?a(mt):a(yt,!1)})}o(Cr),o(we),o(ee);var rr=t(ee,2),tr=t(i(rr),2),ar=i(tr),$r=t(i(ar),2);j($r),o(ar);var or=t(ar,2),jr=t(i(or),2);j(jr),o(or);var ir=t(or,2),sr=t(i(ir),2);h(()=>{e(R),ce(()=>{})});var dr=i(sr);dr.value=dr.__value="linux";var Ar=t(dr);Ar.value=Ar.__value="windows",o(sr),o(ir);var Ir=t(ir,2),lr=t(i(Ir),2);h(()=>{e(fe),ce(()=>{})});var nr=i(lr);nr.value=nr.__value="amd64";var Or=t(nr);Or.value=Or.__value="arm64",o(lr),o(Ir),o(tr);var Lr=t(tr,2),xt=t(i(Lr),2);{var ht=a=>{var v=ea();b(a,v)},_t=a=>{var v=re(),w=J(v);{var C=p=>{var u=ta(),y=J(u);h(()=>{e(U),ce(()=>{e(I)})}),ze(y,5,()=>e(I),Re,(E,g)=>{var M=ra(),ne=i(M),_r=t(ne);{var kr=wr=>{var Xr=ue();h(()=>z(Xr,`- ${e(g),f(()=>e(g).description)??""}`)),b(wr,Xr)};_(_r,wr=>{e(g),f(()=>e(g).description)&&wr(kr)})}o(M);var Te={};h(()=>{z(ne,`${e(g),f(()=>e(g).name)??""} ${e(g),f(()=>e(g).owner_id==="system"?"(System)":"")??""} `),Te!==(Te=(e(g),f(()=>e(g).id)))&&(M.value=(M.__value=(e(g),f(()=>e(g).id)))??"")}),b(E,M)}),o(y);var D=t(y,2),le=t(i(D));{var L=E=>{var g=ue();h(M=>z(g,`Showing templates for ${M??""} ${e(R)??""}.`),[()=>f(Ve)]),b(E,g)};_(le,E=>{e(n)&&E(L)})}o(D),ve(y,()=>e(U),E=>r(U,E)),b(p,u)},$=p=>{var u=re(),y=J(u);{var D=L=>{var E=aa(),g=i(E),M=i(g);o(g);var ne=t(g,2),_r=i(ne);Se(),o(ne),o(E),h((kr,Te)=>{z(M,`No templates found for ${kr??""} ${e(R)??""}.`),Zr(_r,"href",Te)},[()=>f(Ve),()=>(Lt(et),f(()=>et("/templates")))]),b(L,E)},le=L=>{var E=oa();b(L,E)};_(y,L=>{e(n)?L(D):L(le,!1)},!0)}b(p,u)};_(w,p=>{e(I),f(()=>e(I).length>0)?p(C):p($,!1)},!0)}b(a,v)};_(xt,a=>{e(qe)?a(ht):a(_t,!1)})}o(Lr),o(rr);var ur=t(rr,2),qr=t(i(ur),2),br=i(qr),Br=t(i(br),2);j(Br),o(br);var cr=t(br,2),Ur=t(i(cr),2);j(Ur),o(cr);var Hr=t(cr,2),Dr=t(i(Hr),2);j(Dr),o(Hr),o(qr),o(ur);var Gr=t(ur,2),vr=t(i(Gr),2),gr=i(vr),Jr=t(i(gr),2);j(Jr),o(gr);var pr=t(gr,2),Nr=t(i(pr),2);j(Nr),o(pr);var Vr=t(pr,2),Wr=t(i(Vr),2);j(Wr),o(Vr),o(vr);var fr=t(vr,2),Fr=t(i(fr),2),mr=i(Fr),Ee=i(mr);j(Ee);var kt=t(Ee,2);o(mr);var wt=t(mr,2);{var Et=a=>{var v=sa();ze(v,5,()=>e(B),Re,(w,C,$)=>{var p=ia(),u=i(p),y=t(u);o(p),h(()=>{z(u,`${e(C)??""} `),Zr(y,"aria-label",`Remove tag ${e(C)}`)}),G("click",y,()=>dt($)),b(w,p)}),o(v),b(a,v)};_(wt,a=>{e(B),f(()=>e(B).length>0)&&a(Et)})}o(Fr),o(fr);var yr=t(fr,2),Mt=t(i(yr),2);Dt(Mt,{rows:4,placeholder:"{}",get value(){return e(oe)},set value(a){r(oe,a)},$$legacy:!0}),o(yr);var xr=t(yr,2),Kr=i(xr);j(Kr),Se(2),o(xr);var Qr=t(xr,2),hr=i(Qr),Me=i(hr);j(Me);var Tt=t(Me,2);Se(2),o(hr);var St=t(hr,2);{var zt=a=>{var v=la(),w=t(i(v),2),C=i(w),$=t(C);{var p=u=>{var y=da();G("click",y,()=>r(K,!0)),b(u,y)};_($,u=>{e(n)&&u(p)})}o(w),o(v),h(()=>z(C,`Shell access requires agent mode to be enabled on the ${e(d)??""}. `)),b(a,v)};_(St,a=>{e(q)||a(zt)})}o(Qr),o(Gr),h(a=>{z(ct,`${a??""} `),Me.disabled=!e(q),Pe(Tt,1,`ml-2 block text-sm font-medium text-gray-700 dark:text-gray-300 ${e(q)?"":"opacity-50"}`)},[()=>(e(d),f(()=>e(d).charAt(0).toUpperCase()+e(d).slice(1)))]),N($r,()=>e(te),a=>r(te,a)),N(jr,()=>e(ae),a=>r(ae,a)),ve(sr,()=>e(R),a=>r(R,a)),ve(lr,()=>e(fe),a=>r(fe,a)),N(Br,()=>e(Ue),a=>r(Ue,a)),N(Ur,()=>e(Be),a=>r(Be,a)),N(Dr,()=>e(He),a=>r(He,a)),N(Jr,()=>e(Ge),a=>r(Ge,a)),N(Nr,()=>e(De),a=>r(De,a)),N(Wr,()=>e(Je),a=>r(Je,a)),N(Ee,()=>e(X),a=>r(X,a)),G("keydown",Ee,lt),G("click",kt,zr),rt(Kr,()=>e(Ne),a=>r(Ne,a)),rt(Me,()=>e(me),a=>r(me,a)),b(k,S)};_(F,k=>{e(d)&&k(Qe)})}var _e=t(F,2),ke=i(_e),O=t(ke,2),Z=i(O);{var Xe=k=>{var S=ua();b(k,S)},Ye=k=>{var S=ue("Create Pool");b(k,S)};_(Z,k=>{e(pe)?k(Xe):k(Ye,!1)})}o(O),o(_e),o(P),o(m),h(()=>{Pe(se,1,`flex flex-col items-center justify-center p-4 border-2 rounded-lg transition-colors cursor-pointer ${e(d)==="repository"?"border-blue-500 bg-blue-50 dark:bg-blue-900":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`),Pe(de,1,`flex flex-col items-center justify-center p-4 border-2 rounded-lg transition-colors cursor-pointer ${e(d)==="organization"?"border-blue-500 bg-blue-50 dark:bg-blue-900":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`),Pe(H,1,`flex flex-col items-center justify-center p-4 border-2 rounded-lg transition-colors cursor-pointer ${e(d)==="enterprise"?"border-blue-500 bg-blue-50 dark:bg-blue-900":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`),O.disabled=e(pe)||!e(d)||!e(n)||!e(Q)||!e(te)||!e(ae)}),G("click",se,()=>Fe("repository")),G("click",de,()=>Fe("organization")),G("click",H,()=>Fe("enterprise")),G("click",ke,()=>ge("close")),G("submit",P,Ut(nt)),b(s,m)},$$slots:{default:!0}});var ut=t(Pr,2);{var bt=s=>{const l=Ot(()=>f(st));var m=re(),P=J(m);{var xe=ie=>{var Y=re(),he=J(Y);{var se=H=>{Gt(H,{get repository(){return e(l)},$$events:{close:()=>r(K,!1),submit:F=>Ke(F.detail)}})},de=H=>{var F=re(),Qe=J(F);{var _e=O=>{Jt(O,{get organization(){return e(l)},$$events:{close:()=>r(K,!1),submit:Z=>Ke(Z.detail)}})},ke=O=>{var Z=re(),Xe=J(Z);{var Ye=k=>{Nt(k,{get enterprise(){return e(l)},$$events:{close:()=>r(K,!1),submit:S=>Ke(S.detail)}})};_(Xe,k=>{e(d)==="enterprise"&&k(Ye)},!0)}b(O,Z)};_(Qe,O=>{e(d)==="organization"?O(_e):O(ke,!1)},!0)}b(H,F)};_(he,H=>{e(d)==="repository"?H(se):H(de,!1)})}b(ie,Y)};_(P,ie=>{e(l)&&ie(xe)})}b(s,m)};_(ut,s=>{e(K)&&e(n)&&s(bt)})}b(tt,Rr),It(),ot()}export{Ta as C};
