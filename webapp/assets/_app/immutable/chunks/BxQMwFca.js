import"./DsnmJJEf.js";import{i as mr}from"./DT0EGONV.js";import{p as yr,E as xr,m as b,o as _r,s as n,l as hr,g as e,a as kr,f as $,j as a,r as t,k as d,t as w,y as We,u as T,z as wr,n as B,v as E,e as O,c as _,D as Er,d as $r}from"./CRKWEg6v.js";import{p as Rr,i as G,s as Sr,a as Tr}from"./e1m7WRO5.js";import{e as Or,i as Pr}from"./C73ZVvpW.js";import{r as c,s as qe,b as Qe,c as Jr}from"./-esynYXT.js";import{b as v,a as Mr}from"./B3a35v7J.js";import{p as Nr}from"./D4Caz1gY.js";import{M as Ur}from"./xe-4nY5o.js";import{J as Ar}from"./DJsbLMno.js";import{e as Ir}from"./BZiHL9L3.js";import{e as jr}from"./Djd10kRn.js";var Cr=$('<div class="rounded-md bg-red-50 dark:bg-red-900 p-4"><p class="text-sm font-medium text-red-800 dark:text-red-200"> </p></div>'),Dr=$('<div class="rounded-md bg-yellow-50 dark:bg-yellow-900 p-4"><p class="text-sm font-medium text-yellow-800 dark:text-yellow-200"> </p></div>'),Br=$('<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200"> <button type="button" class="ml-1 h-4 w-4 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800 flex items-center justify-center cursor-pointer"><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></span>'),Gr=$('<div class="flex flex-wrap gap-2"></div>'),zr=$('<div class="flex items-center"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div> Updating...</div>'),Lr=$('<div class="max-w-6xl w-full max-h-[90vh] overflow-y-auto"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700"><h2 class="text-xl font-semibold text-gray-900 dark:text-white"> </h2></div> <form class="p-6 space-y-6"><!> <!> <div class="bg-gray-50 dark:bg-gray-900 p-4 rounded-lg"><h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Pool Information (Read-only)</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"><div class="flex"><span class="text-gray-500 dark:text-gray-400 w-20 flex-shrink-0">Provider:</span> <span class="text-gray-900 dark:text-white"> </span></div> <div class="flex"><span class="text-gray-500 dark:text-gray-400 w-16 flex-shrink-0">Entity:</span> <span class="text-gray-900 dark:text-white"> </span></div></div></div> <div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Image & OS Configuration</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="image" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Image</label> <input id="image" type="text" placeholder="e.g., ubuntu:22.04" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="flavor" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Flavor</label> <input id="flavor" type="text" placeholder="e.g., default" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="osType" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">OS Type</label> <select id="osType" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>Linux</option><option>Windows</option></select></div> <div><label for="osArch" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Architecture</label> <select id="osArch" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>AMD64</option><option>ARM64</option></select></div></div></div> <div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Runner Limits & Timing</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><label for="minIdleRunners" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Min Idle Runners</label> <input id="minIdleRunners" type="number" min="0" placeholder="0"/></div> <div><label for="maxRunners" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Max Runners</label> <input id="maxRunners" type="number" min="1" placeholder="10"/></div> <div><label for="bootstrapTimeout" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Bootstrap Timeout (min)</label> <input id="bootstrapTimeout" type="number" min="1" placeholder="20" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div></div></div> <div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Advanced Settings</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><label for="runnerPrefix" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Runner Prefix</label> <input id="runnerPrefix" type="text" placeholder="garm" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="priority" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Priority</label> <input id="priority" type="number" min="1" placeholder="100" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="githubRunnerGroup" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">GitHub Runner Group (optional)</label> <input id="githubRunnerGroup" type="text" placeholder="Default group" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div></div> <div><fieldset><legend class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Tags</legend> <div class="space-y-2"><div class="flex"><input type="text" placeholder="Enter a tag" class="flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/> <button type="button" class="px-3 py-2 bg-blue-600 text-white rounded-r-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer">Add</button></div> <!></div></fieldset></div> <div><fieldset><legend class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Extra Specs (JSON)</legend> <!></fieldset></div> <div class="flex items-center"><input id="enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="enabled" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">Pool enabled</label></div></div> <div class="flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700"><button type="button" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer">Cancel</button> <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"><!></button></div></form></div>');function tt(Ve,fe){yr(fe,!1);const[Xe,Ye]=Sr(),z=()=>Tr(jr,"$eagerCache",Xe);let o=Rr(fe,"pool",8);const L=xr();let P=b(!1),J=b(""),p=b(""),M=b(o().image||""),N=b(o().flavor||""),m=b(o().max_runners),y=b(o().min_idle_runners),U=b(o().runner_bootstrap_timeout),A=b(o().priority),I=b(o().runner_prefix||""),R=b(o().os_type||"linux"),S=b(o().os_arch||"amd64"),j=b(o()["github-runner-group"]||""),C=b(o().enabled),g=b((o().tags||[]).map(i=>i.name||"").filter(Boolean)),h=b(""),f=b("{}");function Ze(i){if(i.repo_id){const s=z().repositories.find(l=>l.id===i.repo_id);return s?`${s.owner}/${s.name}`:"Unknown Entity"}if(i.org_id){const s=z().organizations.find(l=>l.id===i.org_id);return s&&s.name?s.name:"Unknown Entity"}if(i.enterprise_id){const s=z().enterprises.find(l=>l.id===i.enterprise_id);return s&&s.name?s.name:"Unknown Entity"}return"Unknown Entity"}function er(i){return i.repo_id?"Repository":i.org_id?"Organization":i.enterprise_id?"Enterprise":"Unknown"}_r(()=>{if(o().extra_specs)try{if(typeof o().extra_specs=="object")n(f,JSON.stringify(o().extra_specs,null,2));else{const i=JSON.parse(o().extra_specs);n(f,JSON.stringify(i,null,2))}}catch{n(f,o().extra_specs||"{}")}});function me(){e(h).trim()&&!e(g).includes(e(h).trim())&&(n(g,[...e(g),e(h).trim()]),n(h,""))}function rr(i){n(g,e(g).filter((s,l)=>l!==i))}function tr(i){i.key==="Enter"&&(i.preventDefault(),me())}async function ar(){try{if(n(P,!0),n(J,""),e(p))throw new Error(e(p));let i={};if(e(f).trim())try{i=JSON.parse(e(f))}catch{throw new Error("Invalid JSON in extra specs")}const s={image:e(M)!==o().image?e(M):void 0,flavor:e(N)!==o().flavor?e(N):void 0,max_runners:e(m)!==o().max_runners?e(m):void 0,min_idle_runners:e(y)!==o().min_idle_runners?e(y):void 0,runner_bootstrap_timeout:e(U)!==o().runner_bootstrap_timeout?e(U):void 0,priority:e(A)!==o().priority?e(A):void 0,runner_prefix:e(I)!==o().runner_prefix?e(I):void 0,os_type:e(R)!==o().os_type?e(R):void 0,os_arch:e(S)!==o().os_arch?e(S):void 0,"github-runner-group":e(j)!==o()["github-runner-group"]&&e(j)||void 0,enabled:e(C)!==o().enabled?e(C):void 0,tags:JSON.stringify(e(g))!==JSON.stringify((o().tags||[]).map(l=>l.name||"").filter(Boolean))?e(g):void 0,extra_specs:e(f).trim()!==JSON.stringify(o().extra_specs||{},null,2).trim()?i:void 0};Object.keys(s).forEach(l=>{s[l]===void 0&&delete s[l]}),L("submit",s)}catch(i){n(J,Ir(i))}finally{n(P,!1)}}hr(()=>(e(y),e(m)),()=>{e(y)!==null&&e(m)!==null&&e(y)>e(m)?n(p,"Min idle runners cannot be greater than max runners"):n(p,"")}),kr(),mr(),Ur(Ve,{$$events:{close:()=>L("close")},children:(i,s)=>{var l=Lr(),F=a(l),ye=a(F),dr=a(ye);t(ye),t(F);var H=d(F,2),xe=a(H);{var or=r=>{var u=Cr(),x=a(u),k=a(x,!0);t(x),t(u),w(()=>E(k,e(J))),_(r,u)};G(xe,r=>{e(J)&&r(or)})}var _e=d(xe,2);{var ir=r=>{var u=Dr(),x=a(u),k=a(x,!0);t(x),t(u),w(()=>E(k,e(p))),_(r,u)};G(_e,r=>{e(p)&&r(ir)})}var K=d(_e,2),he=d(a(K),2),W=a(he),ke=d(a(W),2),nr=a(ke,!0);t(ke),t(W);var we=d(W,2),Ee=d(a(we),2),sr=a(Ee);t(Ee),t(we),t(he),t(K);var q=d(K,2),$e=d(a(q),2),Q=a($e),Re=d(a(Q),2);c(Re),t(Q);var V=d(Q,2),Se=d(a(V),2);c(Se),t(V);var X=d(V,2),Y=d(a(X),2);w(()=>{e(R),We(()=>{})});var Z=a(Y);Z.value=Z.__value="linux";var Te=d(Z);Te.value=Te.__value="windows",t(Y),t(X);var Oe=d(X,2),ee=d(a(Oe),2);w(()=>{e(S),We(()=>{})});var re=a(ee);re.value=re.__value="amd64";var Pe=d(re);Pe.value=Pe.__value="arm64",t(ee),t(Oe),t($e),t(q);var te=d(q,2),Je=d(a(te),2),ae=a(Je),de=d(a(ae),2);c(de),t(ae);var oe=d(ae,2),ie=d(a(oe),2);c(ie),t(oe);var Me=d(oe,2),Ne=d(a(Me),2);c(Ne),t(Me),t(Je),t(te);var ne=d(te,2),se=d(a(ne),2),le=a(se),Ue=d(a(le),2);c(Ue),t(le);var ue=d(le,2),Ae=d(a(ue),2);c(Ae),t(ue);var Ie=d(ue,2),je=d(a(Ie),2);c(je),t(Ie),t(se);var be=d(se,2),Ce=a(be),De=d(a(Ce),2),ge=a(De),D=a(ge);c(D);var lr=d(D,2);t(ge);var ur=d(ge,2);{var br=r=>{var u=Gr();Or(u,5,()=>e(g),Pr,(x,k,fr)=>{var ve=Br(),He=a(ve),Ke=d(He);t(ve),w(()=>{E(He,`${e(k)??""} `),Jr(Ke,"aria-label",`Remove tag ${e(k)??""}`)}),O("click",Ke,()=>rr(fr)),_(x,ve)}),t(u),_(r,u)};G(ur,r=>{e(g),T(()=>e(g).length>0)&&r(br)})}t(De),t(Ce),t(be);var ce=d(be,2),Be=a(ce),gr=d(a(Be),2);Ar(gr,{rows:4,placeholder:"{}",get value(){return e(f)},set value(r){n(f,r)},$$legacy:!0}),t(Be),t(ce);var Ge=d(ce,2),ze=a(Ge);c(ze),wr(2),t(Ge),t(ne);var Le=d(ne,2),Fe=a(Le),pe=d(Fe,2),cr=a(pe);{var pr=r=>{var u=zr();_(r,u)},vr=r=>{var u=Er("Update Pool");_(r,u)};G(cr,r=>{e(P)?r(pr):r(vr,!1)})}t(pe),t(Le),t(H),t(l),w((r,u)=>{E(dr,`Update Pool ${B(o()),T(()=>o().id)??""}`),E(nr,(B(o()),T(()=>o().provider_name))),E(sr,`${r??""}: ${u??""}`),qe(de,1,`w-full px-3 py-2 border ${e(p)?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`),qe(ie,1,`w-full px-3 py-2 border ${e(p)?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`),pe.disabled=e(P)||e(p)!==""},[()=>(B(o()),T(()=>er(o()))),()=>(B(o()),T(()=>Ze(o())))]),v(Re,()=>e(M),r=>n(M,r)),v(Se,()=>e(N),r=>n(N,r)),Qe(Y,()=>e(R),r=>n(R,r)),Qe(ee,()=>e(S),r=>n(S,r)),v(de,()=>e(y),r=>n(y,r)),v(ie,()=>e(m),r=>n(m,r)),v(Ne,()=>e(U),r=>n(U,r)),v(Ue,()=>e(I),r=>n(I,r)),v(Ae,()=>e(A),r=>n(A,r)),v(je,()=>e(j),r=>n(j,r)),v(D,()=>e(h),r=>n(h,r)),O("keydown",D,tr),O("click",lr,me),Mr(ze,()=>e(C),r=>n(C,r)),O("click",Fe,()=>L("close")),O("submit",H,Nr(ar)),_(i,l)},$$slots:{default:!0}}),$r(),Ye()}export{tt as U};
