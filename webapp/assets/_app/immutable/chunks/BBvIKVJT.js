import{c as Ut,a as w,s as j,b as v,t as fe,d as de,e as K,l as Lt,f as E}from"./CxOx-TIJ.js";import{i as Bt}from"./3NxSoY2_.js";import{p as qt,B as Ht,m as g,o as Dt,g as e,i as b,j as r,x as Gt,l as me,b as Jt,f as Q,d as p,s as t,c as i,r as o,t as M,w as je,v as ye,u as x,h as Nt,a as Ft,n as A,y as Vt,e as Wt,F as h}from"./DzFKsO_V.js";import{p as ot,i as T,s as Kt,a as Qt,v as Xt}from"./B_jyf0qs.js";import{e as Ae,i as Ie}from"./CdXRaxkX.js";import{w as Yt}from"./DoJxysSt.js";import{b as xe,r as B,d as it,c as st,s as Oe,g as q}from"./BguOOs3x.js";import{b as X,a as dt}from"./BVM1034P.js";import{p as Zt}from"./CdEA5IGF.js";import{M as ea}from"./Pgjt70l7.js";import{e as Ue}from"./BZiHL9L3.js";import{J as ra,U as ta,a as aa,b as oa}from"./BMieCrfV.js";import{w as Cr}from"./DSHGoHxX.js";import{e as lt}from"./Penjr-j0.js";s[h]="src/lib/components/CreatePoolModal.svelte";var ia=w(E('<div class="rounded-md bg-red-50 dark:bg-red-900 p-4"><p class="text-sm font-medium text-red-800 dark:text-red-200"> </p></div>'),s[h],[[388,4,[[389,5]]]]),sa=w(E('<div class="animate-pulse bg-gray-200 dark:bg-gray-700 h-10 rounded"></div>'),s[h],[[445,8]]),da=w(E("<option><!></option>"),s[h],[[455,10]]),la=w(E('<select id="entity" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option> </option><!></select>'),s[h],[[447,8,[[453,9]]]]),na=w(E('<div class="animate-pulse bg-gray-200 dark:bg-gray-700 h-10 rounded"></div>'),s[h],[[471,8]]),ua=w(E("<option> </option>"),s[h],[[481,10]]),ca=w(E('<select id="provider" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>Select a provider</option><!></select>'),s[h],[[473,8,[[479,9]]]]),ba=w(E('<div class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700 flex items-center"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"></div> <span class="text-sm text-gray-600 dark:text-gray-400">Loading templates...</span></div>'),s[h],[[555,7,[[556,8],[557,8]]]]),va=w(E("<option> <!></option>"),s[h],[[566,9]]),ga=w(E('<select id="template" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"></select> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Templates define how the runner software is installed and configured. <!></p>',1),s[h],[[560,7],[572,7]]),pa=w(E('<div class="w-full px-3 py-2 border border-yellow-300 dark:border-yellow-600 rounded-md bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200"><p class="text-sm"> </p> <p class="text-xs mt-1"><a class="text-yellow-700 dark:text-yellow-300 hover:underline">Create a template first</a> or proceed without a template to use default behavior.</p></div>'),s[h],[[579,7,[[580,8],[581,8,[[582,9]]]]]]),fa=w(E('<div class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700 text-gray-500 dark:text-gray-400"><p class="text-sm">Select an entity first to see available templates</p></div>'),s[h],[[588,7,[[589,8]]]]),ma=w(E('<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200"> <button type="button" class="ml-1 h-4 w-4 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800 flex items-center justify-center cursor-pointer"><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></span>'),s[h],[[714,10,[[716,11,[[722,12,[[723,13]]]]]]]]),ya=w(E('<div class="flex flex-wrap gap-2"></div>'),s[h],[[712,8]]),xa=w(E('<button type="button" class="underline hover:text-yellow-800 dark:hover:text-yellow-300 cursor-pointer">Enable agent mode</button>'),s[h],[[789,10]]),ha=w(E('<div class="ml-6 flex items-start space-x-2 text-xs text-yellow-700 dark:text-yellow-400"><svg class="w-4 h-4 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span> <!></span></div>'),s[h],[[782,7,[[783,8,[[784,9]]],[786,8]]]]),_a=w(E('<div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Entity & Provider Configuration</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="entity" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"> <span class="text-red-500">*</span></label> <!></div> <div><label for="provider" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Provider <span class="text-red-500">*</span></label> <!></div></div></div> <div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Image & OS Configuration</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="image" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Image <span class="text-red-500">*</span></label> <input id="image" type="text" required placeholder="e.g., ubuntu:22.04" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="flavor" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Flavor <span class="text-red-500">*</span></label> <input id="flavor" type="text" required placeholder="e.g., default" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="osType" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">OS Type</label> <select id="osType" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>Linux</option><option>Windows</option></select></div> <div><label for="osArch" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Architecture</label> <select id="osArch" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>AMD64</option><option>ARM64</option></select></div></div> <div><label for="template" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Runner Install Template</label> <!></div></div> <div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Runner Limits & Timing</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><label for="minIdleRunners" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Min Idle Runners</label> <input id="minIdleRunners" type="number" min="0" placeholder="0" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="maxRunners" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Max Runners</label> <input id="maxRunners" type="number" min="1" placeholder="10" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="bootstrapTimeout" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Bootstrap Timeout (min)</label> <input id="bootstrapTimeout" type="number" min="1" placeholder="20" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div></div></div> <div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Advanced Settings</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><label for="runnerPrefix" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Runner Prefix</label> <input id="runnerPrefix" type="text" placeholder="garm" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="priority" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Priority</label> <input id="priority" type="number" min="1" placeholder="100" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="githubRunnerGroup" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">GitHub Runner Group (optional)</label> <input id="githubRunnerGroup" type="text" placeholder="Default group" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div></div> <div><label for="tag-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Tags</label> <div class="space-y-2"><div class="flex"><input id="tag-input" type="text" placeholder="Enter a tag" class="flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/> <button type="button" class="px-3 py-2 bg-blue-600 text-white rounded-r-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer">Add</button></div> <!></div></div> <fieldset><legend class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Extra Specs (JSON)</legend> <!></fieldset> <div class="flex items-center"><input id="enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="enabled" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">Enable pool immediately</label></div> <div class="space-y-2"><div class="flex items-center"><input id="enableShell" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded disabled:opacity-50 disabled:cursor-not-allowed"/> <label for="enableShell">Enable Shell</label> <div class="ml-2 relative group"><svg class="w-4 h-4 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="absolute left-full top-1/2 transform -translate-y-1/2 ml-2 w-80 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">This enables remote shell in the GARM agent, allowing users to connect via garm-cli or web UI using websockets. <div class="absolute right-full top-1/2 transform -translate-y-1/2 border-4 border-transparent border-r-gray-900"></div></div></div></div> <!></div></div>',1),s[h],[[435,4,[[436,5],[439,5,[[440,6,[[441,7,[[442,69]]]]],[466,6,[[467,7,[[468,17]]]]]]]]],[490,4,[[491,5],[494,5,[[495,6,[[496,7,[[497,14]]],[499,7]]],[508,6,[[509,7,[[510,15]]],[512,7]]],[521,6,[[522,7],[525,7,[[530,8],[531,8]]]]],[534,6,[[535,7],[538,7,[[543,8],[544,8]]]]]]],[550,5,[[551,6]]]]],[596,4,[[597,5],[600,5,[[601,6,[[602,7],[605,7]]],[614,6,[[615,7],[618,7]]],[627,6,[[628,7],[631,7]]]]]]],[644,4,[[645,5],[648,5,[[649,6,[[650,7],[653,7]]],[661,6,[[662,7],[665,7]]],[674,6,[[675,7],[678,7]]]]],[689,5,[[690,6],[693,6,[[694,7,[[695,8],[703,8]]]]]]],[734,5,[[735,6]]],[746,5,[[747,6],[753,6]]],[759,5,[[760,6,[[761,7],[768,7],[771,7,[[772,8,[[773,9]]],[775,8,[[777,9]]]]]]]]]]]]),ka=w(E('<div class="flex items-center"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div> Creating...</div>'),s[h],[[819,6,[[820,7]]]]),wa=w(E('<div class="max-w-6xl w-full max-h-[90vh] overflow-y-auto"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700"><h2 class="text-xl font-semibold text-gray-900 dark:text-white">Create New Pool</h2></div> <form class="p-6 space-y-6"><!> <fieldset><legend class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Entity Level <span class="text-red-500">*</span></legend> <div class="grid grid-cols-3 gap-4"><button type="button"><svg class="w-8 h-8 mb-2 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"></path></svg> <span class="text-sm font-medium text-gray-900 dark:text-white">Repository</span></button> <button type="button"><svg class="w-8 h-8 mb-2 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> <span class="text-sm font-medium text-gray-900 dark:text-white">Organization</span></button> <button type="button"><svg class="w-8 h-8 mb-2 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg> <span class="text-sm font-medium text-gray-900 dark:text-white">Enterprise</span></button></div></fieldset> <!> <div class="flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700"><button type="button" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer">Cancel</button> <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"><!></button></div></form></div>'),s[h],[[381,1,[[382,2,[[383,3]]],[386,2,[[394,3,[[395,4,[[396,18]]],[398,4,[[399,5,[[404,6,[[405,7],[406,7]]],[408,6]]],[410,5,[[415,6,[[416,7]]],[418,6]]],[420,5,[[425,6,[[426,7]]],[428,6]]]]]]],[805,3,[[806,4],[813,4]]]]]]]]),Ea=w(E("<!> <!>",1),s[h],[]);function s(nt,Le){Ut(new.target),qt(Le,!1,s);const[ut,ct]=Kt(),Be=()=>(Xt(lt,"eagerCache"),Qt(lt,"$eagerCache",ut)),J=g(),he=Ht();let qe=ot(Le,"initialEntityType",8,""),Pr=ot(Le,"initialEntityId",8,""),_e=g(!1),Y=g(""),l=g(qe()),P=g([]),He=g([]),H=g([]),De=g(!1),Ge=g(!1),Je=g(!1),re=g(!1),Z=g(null),u=g(Pr()),te=g(""),le=g(""),ne=g(""),Ne=g(void 0),Fe=g(void 0),Ve=g(void 0),We=g(100),Ke=g("garm"),I=g("linux"),ke=g("amd64"),Qe=g(""),Xe=g(!0),we=g(!1),N=g([]),ae=g(""),ue=g("{}"),F=g(void 0);async function bt(){try{r(Ge,!0),r(He,(await A(q.listProviders()))())}catch(d){r(Y,Ue(d))}finally{r(Ge,!1)}}async function $r(){try{r(Je,!0);const d=Ye();if(!d){r(H,[]);return}if(r(H,(await A(q.listTemplates(e(I),void 0,d)))()),!e(F)||!e(H).find(n=>b(n.id,e(F)))){const n=e(H).find(_=>b(_.owner_id,"system"));n?r(F,n.id):e(H).length>0&&r(F,e(H)[0].id)}}catch(d){r(Y,Ue(d))}finally{r(Je,!1)}}function Ye(){if(!e(u)||!e(P))return null;const d=e(P).find(n=>b(n.id,e(u)));if(!d)return null;if("forge_type"in d)return d.forge_type;if("endpoint"in d){const n=d.endpoint;if(n&&"endpoint_type"in n)return n.endpoint_type||null}return"github"}function Ee(){if(!e(u)||!e(P))return!1;const d=e(P).find(n=>b(n.id,e(u)));return d&&"agent_mode"in d?d.agent_mode??!1:!1}async function Ze(){if(e(l))try{switch(r(De,!0),r(P,[]),e(l)){case"repository":r(P,(await A(q.listRepositories()))());break;case"organization":r(P,(await A(q.listOrganizations()))());break;case"enterprise":r(P,(await A(q.listEnterprises()))());break}}catch(d){r(Y,Ue(d))}finally{r(De,!1)}}function er(d){b(e(l),d)||(r(l,d),r(u,""),r(F,void 0),Ze())}function jr(d){if(b(d.operation,"update",!1))return;const n=d.payload;if(b(e(l),"repository")&&b(n.id,e(u))){const _=Be().repositories.find(O=>b(O.id,e(u)));_&&(Object.assign(_,n),r(J,Ee()))}else if(b(e(l),"organization")&&b(n.id,e(u))){const _=Be().organizations.find(O=>b(O.id,e(u)));_&&(Object.assign(_,n),r(J,Ee()))}else if(b(e(l),"enterprise")&&b(n.id,e(u))){const _=Be().enterprises.find(O=>b(O.id,e(u)));_&&(Object.assign(_,n),r(J,Ee()))}}async function rr(d){if(!(!e(u)||!e(l)))try{switch(e(l)){case"repository":(await A(q.updateRepository(e(u),d)))();break;case"organization":(await A(q.updateOrganization(e(u),d)))();break;case"enterprise":(await A(q.updateEnterprise(e(u),d)))();break}(await A(Ze()))(),r(re,!1)}catch(n){throw n}}function vt(){return!e(u)||!e(P)?null:e(P).find(d=>b(d.id,e(u)))||null}function Ar(){e(ae).trim()&&!e(N).includes(e(ae).trim())&&(r(N,[...e(N),e(ae).trim()]),r(ae,""))}function gt(d){r(N,e(N).filter((n,_)=>b(_,d,!1)))}function pt(d){b(d.key,"Enter")&&(d.preventDefault(),Ar())}async function ft(){if(!e(l)||!e(u)||!e(te)||!e(le)||!e(ne)){r(Y,"Please fill in all required fields");return}try{r(_e,!0),r(Y,"");let d={};if(e(ue).trim())try{d=JSON.parse(e(ue))}catch{throw new Error("Invalid JSON in extra specs")}const n={provider_name:e(te),image:e(le),flavor:e(ne),max_runners:e(Ne)||10,min_idle_runners:e(Fe)||0,runner_bootstrap_timeout:e(Ve)||20,priority:e(We),runner_prefix:e(Ke),os_type:e(I),os_arch:e(ke),"github-runner-group":e(Qe)||void 0,enabled:e(Xe),enable_shell:e(we),tags:e(N),extra_specs:e(ue).trim()?d:void 0,template_id:e(F)};if(qe()&&Pr())he("submit",n);else{switch(e(l)){case"repository":(await A(q.createRepositoryPool(e(u),n)))();break;case"organization":(await A(q.createOrganizationPool(e(u),n)))();break;case"enterprise":(await A(q.createEnterprisePool(e(u),n)))();break;default:throw new Error("Invalid entity level")}he("submit",n)}}catch(d){r(Y,Ue(d))}finally{r(_e,!1)}}Dt(()=>{bt(),qe()&&Ze(),e(l)&&(b(e(l),"repository")||b(e(l),"organization")||b(e(l),"enterprise"))&&r(Z,Cr.subscribeToEntity(e(l),["update"],jr))}),Gt(()=>{e(Z)&&(e(Z)(),r(Z,null))}),me(()=>{},()=>{r(J,Ee())}),me(()=>e(J),()=>{e(J)||r(we,!1)}),me(()=>(e(u),e(I)),()=>{e(u)&&e(I)&&$r()}),me(()=>(e(I),e(u)),()=>{e(I)&&e(u)&&$r()}),me(()=>(e(l),e(Z),Cr),()=>{e(l)&&(b(e(l),"repository")||b(e(l),"organization")||b(e(l),"enterprise"))&&(e(Z)&&e(Z)(),r(Z,Cr.subscribeToEntity(e(l),["update"],jr)))}),Jt(),Bt();var Ir=Ea(),Or=Q(Ir);p(()=>ea(Or,{$$events:{close:()=>he("close")},children:Yt(s,(d,n)=>{var _=wa(),O=t(i(_),2),Me=i(O);{var ce=z=>{var $=ia(),se=i($),Re=i(se,!0);o(se),o($),M(()=>j(Re,e(Y))),v(z,$)};p(()=>T(Me,z=>{e(Y)&&z(ce)}),"if",s,387,3)}var oe=t(Me,2),Te=t(i(oe),2),be=i(Te),ve=t(be,2),V=t(ve,2);o(Te),o(oe);var ee=t(oe,2);{var tr=z=>{var $=_a(),se=Q($),Re=t(i(se),2),ir=i(Re),sr=i(ir),ht=i(sr);je(),o(sr);var _t=t(sr,2);{var kt=a=>{var f=sa();v(a,f)},wt=a=>{var f=la();M(()=>{e(u),ye(()=>{e(l),e(P)})});var S=i(f),U=i(S);o(S),S.value=S.__value="";var L=t(S);p(()=>Ae(L,1,()=>e(P),Ie,(y,c)=>{var k=da(),W=i(k);{var ge=m=>{var C=fe();M(()=>j(C,`${e(c),x(()=>e(c).owner)??""}/${e(c),x(()=>e(c).name)??""} (${e(c),x(()=>e(c).endpoint?.name)??""})`)),v(m,C)},G=m=>{var C=fe();M(()=>j(C,`${e(c),x(()=>e(c).name)??""} (${e(c),x(()=>e(c).endpoint?.name)??""})`)),v(m,C)};p(()=>T(W,m=>{b(e(l),"repository")?m(ge):m(G,!1)}),"if",s,456,11)}o(k);var R={};M(()=>{R!==(R=(e(c),x(()=>e(c).id)))&&(k.value=(k.__value=(e(c),x(()=>e(c).id)))??"")}),v(y,k)}),"each",s,454,9),o(f),M(()=>j(U,`Select a ${e(l)??""}`)),xe(f,()=>e(u),y=>r(u,y)),v(a,f)};p(()=>T(_t,a=>{e(De)?a(kt):a(wt,!1)}),"if",s,444,7)}o(ir);var Ur=t(ir,2),Et=t(i(Ur),2);{var Mt=a=>{var f=na();v(a,f)},Tt=a=>{var f=ca();M(()=>{e(te),ye(()=>{e(He)})});var S=i(f);S.value=S.__value="";var U=t(S);p(()=>Ae(U,1,()=>e(He),Ie,(L,y)=>{var c=ua(),k=i(c,!0);o(c);var W={};M(()=>{j(k,(e(y),x(()=>e(y).name))),W!==(W=(e(y),x(()=>e(y).name)))&&(c.value=(c.__value=(e(y),x(()=>e(y).name)))??"")}),v(L,c)}),"each",s,480,9),o(f),xe(f,()=>e(te),L=>r(te,L)),v(a,f)};p(()=>T(Et,a=>{e(Ge)?a(Mt):a(Tt,!1)}),"if",s,470,7)}o(Ur),o(Re),o(se);var dr=t(se,2),lr=t(i(dr),2),nr=i(lr),Lr=t(i(nr),2);B(Lr),o(nr);var ur=t(nr,2),Br=t(i(ur),2);B(Br),o(ur);var cr=t(ur,2),br=t(i(cr),2);M(()=>{e(I),ye(()=>{})});var vr=i(br);vr.value=vr.__value="linux";var qr=t(vr);qr.value=qr.__value="windows",o(br),o(cr);var Hr=t(cr,2),gr=t(i(Hr),2);M(()=>{e(ke),ye(()=>{})});var pr=i(gr);pr.value=pr.__value="amd64";var Dr=t(pr);Dr.value=Dr.__value="arm64",o(gr),o(Hr),o(lr);var Gr=t(lr,2),zt=t(i(Gr),2);{var St=a=>{var f=ba();v(a,f)},Rt=a=>{var f=de(),S=Q(f);{var U=y=>{var c=ga(),k=Q(c);M(()=>{e(F),ye(()=>{e(H)})}),p(()=>Ae(k,5,()=>e(H),Ie,(R,m)=>{var C=va(),pe=i(C),zr=t(pe);{var Sr=Rr=>{var at=fe();M(()=>j(at,`- ${e(m),x(()=>e(m).description)??""}`)),v(Rr,at)};p(()=>T(zr,Rr=>{e(m),x(()=>e(m).description)&&Rr(Sr)}),"if",s,568,10)}o(C);var $e={};M(()=>{j(pe,`${e(m),x(()=>e(m).name)??""} ${e(m),x(()=>b(e(m).owner_id,"system")?"(System)":"")??""} `),$e!==($e=(e(m),x(()=>e(m).id)))&&(C.value=(C.__value=(e(m),x(()=>e(m).id)))??"")}),v(R,C)}),"each",s,565,8),o(k);var W=t(k,2),ge=t(i(W));{var G=R=>{var m=fe();M(C=>j(m,`Showing templates for ${C??""} ${e(I)??""}.`),[()=>x(Ye)]),v(R,m)};p(()=>T(ge,R=>{e(u)&&R(G)}),"if",s,574,8)}o(W),xe(k,()=>e(F),R=>r(F,R)),v(y,c)},L=y=>{var c=de(),k=Q(c);{var W=G=>{var R=pa(),m=i(R),C=i(m);o(m);var pe=t(m,2),zr=i(pe);je(),o(pe),o(R),M((Sr,$e)=>{j(C,`No templates found for ${Sr??""} ${e(I)??""}.`),it(zr,"href",$e)},[()=>x(Ye),()=>(Nt(st),x(()=>st("/templates")))]),v(G,R)},ge=G=>{var R=fa();v(G,R)};p(()=>T(k,G=>{e(u)?G(W):G(ge,!1)},!0),"if",s,578,6)}v(y,c)};p(()=>T(S,y=>{e(H),x(()=>e(H).length>0)?y(U):y(L,!1)},!0),"if",s,559,6)}v(a,f)};p(()=>T(zt,a=>{e(Je)?a(St):a(Rt,!1)}),"if",s,554,6)}o(Gr),o(dr);var fr=t(dr,2),Jr=t(i(fr),2),mr=i(Jr),Nr=t(i(mr),2);B(Nr),o(mr);var yr=t(mr,2),Fr=t(i(yr),2);B(Fr),o(yr);var Vr=t(yr,2),Wr=t(i(Vr),2);B(Wr),o(Vr),o(Jr),o(fr);var Kr=t(fr,2),xr=t(i(Kr),2),hr=i(xr),Qr=t(i(hr),2);B(Qr),o(hr);var _r=t(hr,2),Xr=t(i(_r),2);B(Xr),o(_r);var Yr=t(_r,2),Zr=t(i(Yr),2);B(Zr),o(Yr),o(xr);var kr=t(xr,2),et=t(i(kr),2),wr=i(et),Ce=i(wr);B(Ce);var Ct=t(Ce,2);o(wr);var Pt=t(wr,2);{var $t=a=>{var f=ya();p(()=>Ae(f,5,()=>e(N),Ie,(S,U,L)=>{var y=ma(),c=i(y),k=t(c);o(y),M(()=>{j(c,`${e(U)??""} `),it(k,"aria-label",`Remove tag ${e(U)}`)}),K("click",k,()=>gt(L)),v(S,y)}),"each",s,713,9),o(f),v(a,f)};p(()=>T(Pt,a=>{e(N),x(()=>e(N).length>0)&&a($t)}),"if",s,711,7)}o(et),o(kr);var Er=t(kr,2),jt=t(i(Er),2);p(()=>ra(jt,{rows:4,placeholder:"{}",get value(){return e(ue)},set value(a){r(ue,a)},$$legacy:!0}),"component",s,738,6,{componentTag:"JsonEditor"}),o(Er);var Mr=t(Er,2),rt=i(Mr);B(rt),je(2),o(Mr);var tt=t(Mr,2),Tr=i(tt),Pe=i(Tr);B(Pe);var At=t(Pe,2);je(2),o(Tr);var It=t(Tr,2);{var Ot=a=>{var f=ha(),S=t(i(f),2),U=i(S),L=t(U);{var y=c=>{var k=xa();K("click",k,()=>r(re,!0)),v(c,k)};p(()=>T(L,c=>{e(u)&&c(y)}),"if",s,788,9)}o(S),o(f),M(()=>j(U,`Shell access requires agent mode to be enabled on the ${e(l)??""}. `)),v(a,f)};p(()=>T(It,a=>{e(J)||a(Ot)}),"if",s,781,6)}o(tt),o(Kr),M(a=>{j(ht,`${a??""} `),Pe.disabled=!e(J),Oe(At,1,`ml-2 block text-sm font-medium text-gray-700 dark:text-gray-300 ${e(J)?"":"opacity-50"}`)},[()=>(e(l),x(()=>e(l).charAt(0).toUpperCase()+e(l).slice(1)))]),X(Lr,()=>e(le),a=>r(le,a)),X(Br,()=>e(ne),a=>r(ne,a)),xe(br,()=>e(I),a=>r(I,a)),xe(gr,()=>e(ke),a=>r(ke,a)),X(Nr,()=>e(Fe),a=>r(Fe,a)),X(Fr,()=>e(Ne),a=>r(Ne,a)),X(Wr,()=>e(Ve),a=>r(Ve,a)),X(Qr,()=>e(Ke),a=>r(Ke,a)),X(Xr,()=>e(We),a=>r(We,a)),X(Zr,()=>e(Qe),a=>r(Qe,a)),X(Ce,()=>e(ae),a=>r(ae,a)),K("keydown",Ce,pt),K("click",Ct,Ar),dt(rt,()=>e(Xe),a=>r(Xe,a)),dt(Pe,()=>e(we),a=>r(we,a)),v(z,$)};p(()=>T(ee,z=>{e(l)&&z(tr)}),"if",s,433,3)}var ze=t(ee,2),Se=i(ze),D=t(Se,2),ie=i(D);{var ar=z=>{var $=ka();v(z,$)},or=z=>{var $=fe("Create Pool");v(z,$)};p(()=>T(ie,z=>{e(_e)?z(ar):z(or,!1)}),"if",s,818,5)}o(D),o(ze),o(O),o(_),M(()=>{Oe(be,1,`flex flex-col items-center justify-center p-4 border-2 rounded-lg transition-colors cursor-pointer ${b(e(l),"repository")?"border-blue-500 bg-blue-50 dark:bg-blue-900":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`),Oe(ve,1,`flex flex-col items-center justify-center p-4 border-2 rounded-lg transition-colors cursor-pointer ${b(e(l),"organization")?"border-blue-500 bg-blue-50 dark:bg-blue-900":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`),Oe(V,1,`flex flex-col items-center justify-center p-4 border-2 rounded-lg transition-colors cursor-pointer ${b(e(l),"enterprise")?"border-blue-500 bg-blue-50 dark:bg-blue-900":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`),D.disabled=e(_e)||!e(l)||!e(u)||!e(te)||!e(le)||!e(ne)}),K("click",be,()=>er("repository")),K("click",ve,()=>er("organization")),K("click",V,()=>er("enterprise")),K("click",Se,()=>he("close")),K("submit",O,Zt(ft)),v(d,_)}),$$slots:{default:!0}}),"component",s,380,0,{componentTag:"Modal"});var mt=t(Or,2);{var yt=d=>{const n=Vt(Wt(()=>x(vt)),"selectedEntity");e(n);var _=de(),O=Q(_);{var Me=ce=>{var oe=de(),Te=Q(oe);{var be=V=>{p(()=>ta(V,{get repository(){return e(n)},$$events:{close:()=>r(re,!1),submit:ee=>rr(ee.detail)}}),"component",s,837,3,{componentTag:"UpdateRepositoryModal"})},ve=V=>{var ee=de(),tr=Q(ee);{var ze=D=>{p(()=>aa(D,{get organization(){return e(n)},$$events:{close:()=>r(re,!1),submit:ie=>rr(ie.detail)}}),"component",s,843,3,{componentTag:"UpdateOrganizationModal"})},Se=D=>{var ie=de(),ar=Q(ie);{var or=z=>{p(()=>oa(z,{get enterprise(){return e(n)},$$events:{close:()=>r(re,!1),submit:$=>rr($.detail)}}),"component",s,849,3,{componentTag:"UpdateEnterpriseModal"})};p(()=>T(ar,z=>{b(e(l),"enterprise")&&z(or)},!0),"if",s,848,2)}v(D,ie)};p(()=>T(tr,D=>{b(e(l),"organization")?D(ze):D(Se,!1)},!0),"if",s,842,2)}v(V,ee)};p(()=>T(Te,V=>{b(e(l),"repository")?V(be):V(ve,!1)}),"if",s,836,2)}v(ce,oe)};p(()=>T(O,ce=>{e(n)&&ce(Me)}),"if",s,835,1)}v(d,_)};p(()=>T(mt,d=>{e(re)&&e(u)&&d(yt)}),"if",s,833,0)}v(nt,Ir);var xt=Ft({...Lt()});return ct(),xt}export{s as C};
