import{c as je,a as x,r as et,b as f,l as Oe,f as y,s as j,t as tt,e as $e}from"./CxOx-TIJ.js";import{i as Te}from"./3NxSoY2_.js";import{p as Be,l as Pe,j as o,m,h as Q,b as Ie,c as t,s as a,d as P,g as e,r,t as S,a as qe,F as b,B as Le,w as X,u as U,i as ze,o as Ve,v as Re,k as Se,n as Ke}from"./DzFKsO_V.js";import{p as _e,i as I}from"./B_jyf0qs.js";import{d as Fe,s as rt,r as H,b as We,g as Qe}from"./BguOOs3x.js";import{b as De,a as ue}from"./BVM1034P.js";import{w as Je}from"./DoJxysSt.js";import{p as Ne}from"./CdEA5IGF.js";import{e as Ae}from"./BZiHL9L3.js";import{M as He}from"./Pgjt70l7.js";import{e as Xe,i as Ye}from"./CdXRaxkX.js";Ee[b]="src/lib/components/JsonEditor.svelte";var at=x(y('<div class="absolute top-2 right-2"><svg class="w-4 h-4 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div>'),Ee[b],[[42,2,[[43,3,[[44,4]]]]]]),ot=x(y('<div class="relative"><textarea style="tab-size: 2;" spellcheck="false"></textarea> <!></div>'),Ee[b],[[24,0,[[25,1]]]]);function Ee(ve,O){je(new.target),Be(O,!1,Ee);let i=_e(O,"value",12,""),$=_e(O,"placeholder",8,"{}"),_=_e(O,"rows",8,4),h=_e(O,"disabled",8,!1),l=m(!0);Pe(()=>Q(i()),()=>{if(i().trim())try{JSON.parse(i()),o(l,!0)}catch{o(l,!1)}else o(l,!0)}),Ie(),Te();var p=ot(),s=t(p);et(s);var n=a(s,2);{var c=M=>{var G=at();f(M,G)};P(()=>I(n,M=>{e(l)||M(c)}),"if",Ee,41,1)}return r(p),S(()=>{Fe(s,"placeholder",$()),Fe(s,"rows",_()),s.disabled=h(),rt(s,1,`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 font-mono text-sm resize-none
			${e(l)?"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20 text-red-900 dark:text-red-100"}
			${h()?"opacity-50 cursor-not-allowed":""}
		`)}),De(s,i),f(ve,p),qe({...Oe()})}N[b]="src/lib/components/UpdateRepositoryModal.svelte";var st=x(y('<div class="mb-4 rounded-md bg-red-50 dark:bg-red-900 p-4"><p class="text-sm font-medium text-red-800 dark:text-red-200"> </p></div>'),N[b],[[65,4,[[66,5]]]]),dt=x(y('<div><label for="webhookSecret" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">New Webhook Secret <span class="text-red-500">*</span></label> <input id="webhookSecret" type="password" placeholder="Enter new webhook secret" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Leave empty to auto-generate a new secret</p></div>'),N[b],[[130,5,[[131,6,[[132,26]]],[134,6],[142,6]]]]),lt=x(y('<div class="flex items-center"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div> Updating...</div>'),N[b],[[164,6,[[165,7]]]]),nt=x(y('<div class="max-w-2xl w-full"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700"><h2 class="text-xl font-semibold text-gray-900 dark:text-white">Update Repository</h2> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400"> </p></div> <form class="p-6"><!> <div class="mb-6 bg-gray-50 dark:bg-gray-900 p-4 rounded-lg"><h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Repository Information</h3> <div class="space-y-2 text-sm"><div><span class="text-gray-500 dark:text-gray-400">Owner:</span> <span class="ml-2 text-gray-900 dark:text-white"> </span></div> <div><span class="text-gray-500 dark:text-gray-400">Name:</span> <span class="ml-2 text-gray-900 dark:text-white"> </span></div> <div><span class="text-gray-500 dark:text-gray-400">Endpoint:</span> <span class="ml-2 text-gray-900 dark:text-white"> </span></div> <div><span class="text-gray-500 dark:text-gray-400">Credentials:</span> <span class="ml-2 text-gray-900 dark:text-white"> </span></div></div></div> <div class="mb-6 flex items-center"><input id="agentMode" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="agentMode" class="ml-2 block text-sm font-medium text-gray-700 dark:text-gray-300">Agent Mode</label> <div class="ml-2 relative group"><svg class="w-4 h-4 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-80 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">When enabled, runners will be installed with the GARM agent via userdata install templates. This allows for enhanced runner management and control. <div class="absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"></div></div></div></div> <div class="space-y-4"><div class="flex items-center"><input id="changeWebhookSecret" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="changeWebhookSecret" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">I want to change the webhook secret</label></div> <!></div> <div class="flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700 mt-6"><button type="button" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer">Cancel</button> <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"><!></button></div></form></div>'),N[b],[[57,1,[[58,2,[[59,3],[60,3]]],[63,2,[[71,3,[[72,4],[73,4,[[74,5,[[75,6],[76,6]]],[78,5,[[79,6],[80,6]]],[82,5,[[83,6],[84,6]]],[86,5,[[87,6],[88,6]]]]]]],[94,3,[[95,4],[101,4],[104,4,[[105,5,[[106,6]]],[108,5,[[110,6]]]]]]],[116,3,[[117,4,[[118,5],[124,5]]]]],[150,3,[[151,4],[158,4]]]]]]]]);function N(ve,O){je(new.target),Be(O,!1,N);let i=_e(O,"repository",8);const $=Le();let _=m(!1),h=m(""),l=m(""),p=m(!1),s=m(i().agent_mode??!1);async function n(){try{o(_,!0),o(h,"");const c={};if(e(p)){if(!e(l).trim()){o(h,"Please enter a webhook secret or uncheck the option to change it");return}c.webhook_secret=e(l)}if(ze(e(s),i().agent_mode,!1)&&(c.agent_mode=e(s)),ze(Object.keys(c).length,0)){$("close");return}$("submit",c)}catch(c){o(h,Ae(c))}finally{o(_,!1)}}return Te(),P(()=>He(ve,{$$events:{close:()=>$("close")},children:Je(N,(c,M)=>{var G=nt(),pe=t(G),z=a(t(pe),2),R=t(z);r(z),r(pe);var re=a(pe,2),F=t(re);{var ae=v=>{var d=st(),g=t(d),W=t(g,!0);r(g),r(d),S(()=>j(W,e(h))),f(v,d)};P(()=>I(F,v=>{e(h)&&v(ae)}),"if",N,64,3)}var oe=a(F,2),ge=a(t(oe),2),Y=t(ge),me=a(t(Y),2),Ce=t(me,!0);r(me),r(Y);var fe=a(Y,2),ke=a(t(fe),2),T=t(ke,!0);r(ke),r(fe);var u=a(fe,2),k=a(t(u),2),B=t(k,!0);r(k),r(u);var q=a(u,2),se=a(t(q),2),xe=t(se,!0);r(se),r(q),r(ge),r(oe);var V=a(oe,2),de=t(V);H(de),X(4),r(V);var K=a(V,2),L=t(K),Z=t(L);H(Z),X(2),r(L);var le=a(L,2);{var ee=v=>{var d=dt(),g=a(t(d),2);H(g),X(2),r(d),S(()=>g.required=e(p)),De(g,()=>e(l),W=>o(l,W)),f(v,d)};P(()=>I(le,v=>{e(p)&&v(ee)}),"if",N,129,4)}r(K);var ne=a(K,2),ie=t(ne),te=a(ie,2),ye=t(te);{var we=v=>{var d=lt();f(v,d)},he=v=>{var d=tt("Update Repository");f(v,d)};P(()=>I(ye,v=>{e(_)?v(we):v(he,!1)}),"if",N,163,5)}r(te),r(ne),r(re),r(G),S(v=>{j(R,`${Q(i()),U(()=>i().owner)??""}/${Q(i()),U(()=>i().name)??""}`),j(Ce,(Q(i()),U(()=>i().owner))),j(T,(Q(i()),U(()=>i().name))),j(B,(Q(i()),U(()=>i().endpoint?.name))),j(xe,(Q(i()),U(()=>i().credentials_name))),te.disabled=v},[()=>(e(_),e(p),e(l),U(()=>e(_)||e(p)&&!e(l).trim()))]),ue(de,()=>e(s),v=>o(s,v)),ue(Z,()=>e(p),v=>o(p,v)),$e("click",ie,()=>$("close")),$e("submit",re,Ne(n)),f(c,G)}),$$slots:{default:!0}}),"component",N,56,0,{componentTag:"Modal"}),qe({...Oe()})}A[b]="src/lib/components/UpdateOrganizationModal.svelte";var it=x(y('<div class="mb-4 rounded-md bg-red-50 dark:bg-red-900 p-4"><p class="text-sm font-medium text-red-800 dark:text-red-200"> </p></div>'),A[b],[[102,3,[[103,4]]]]),ct=x(y('<div class="text-center py-4"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">Loading...</p></div>'),A[b],[[108,3,[[109,4],[110,4]]]]),bt=x(y("<option> </option>"),A[b],[[127,7]]),ut=x(y('<input type="password" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm" placeholder="Enter new webhook secret"/>'),A[b],[[202,8]]),vt=x(y('<p class="text-sm text-gray-500 dark:text-gray-400">A new webhook secret will be automatically generated</p>'),A[b],[[210,8]]),pt=x(y('<div class="ml-6 space-y-2"><div class="flex items-center"><input id="generate-webhook-secret" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="generate-webhook-secret" class="ml-2 text-sm text-gray-700 dark:text-gray-300">Auto-generate new secret</label></div> <!></div>'),A[b],[[189,6,[[190,7,[[191,8],[197,8]]]]]]),gt=x(y('<form class="space-y-4"><div><label for="credentials" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Credentials</label> <select id="credentials" required class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"><option>Select credentials...</option><!></select> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400"> </p></div> <div><label for="pool_balancer_type" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Pool Balancer Type</label> <select id="pool_balancer_type" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"><option>Round Robin</option><option>Pack</option></select></div> <div class="mb-6 flex items-center"><input id="agent-mode" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="agent-mode" class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-300">Agent Mode</label> <div class="ml-2 relative group"><svg class="w-4 h-4 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-80 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">When enabled, runners will be installed with the GARM agent via userdata install templates. This allows for enhanced runner management and control. <div class="absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"></div></div></div></div> <div><div class="flex items-center mb-2"><input id="change-webhook-secret" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="change-webhook-secret" class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-300">I want to change the webhook secret</label></div> <!></div> <div class="flex justify-end space-x-3 pt-4"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 cursor-pointer">Cancel</button> <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"> </button></div></form>'),A[b],[[113,3,[[115,4,[[116,5],[119,5,[[125,6]]],[132,5]]],[138,4,[[139,5],[142,5,[[147,6],[148,6]]]]],[153,4,[[154,5],[160,5],[163,5,[[164,6,[[165,7]]],[167,6,[[169,7]]]]]]],[175,4,[[176,5,[[177,6],[183,6]]]]],[219,4,[[220,5],[227,5]]]]]]),mt=x(y('<div class="max-w-2xl w-full"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700"><h2 class="text-xl font-semibold text-gray-900 dark:text-white">Update Organization</h2> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400"> </p></div> <div class="p-6"><!> <!></div></div>'),A[b],[[93,1,[[94,2,[[95,3],[96,3]]],[99,2]]]]);function A(ve,O){je(new.target),Be(O,!1,A);const i=m(),$=m();let _=_e(O,"organization",8);const h=Le();let l=m(!1),p=m(""),s=m([]),n=m({credentials_name:_().credentials_name||"",webhook_secret:"",pool_balancer_type:_().pool_balancing_type||"roundrobin"}),c=m(!1),M=m(!0),G=m(_().agent_mode??!1);async function pe(){try{o(l,!0),o(s,(await Ke(Qe.listAllCredentials()))())}catch(R){o(p,Ae(R))}finally{o(l,!1)}}async function z(){if(!e(n).credentials_name){o(p,"Please select credentials");return}if(e(c)&&!e(M)&&!e(n).webhook_secret?.trim()){o(p,"Please enter a webhook secret or uncheck the change webhook secret option");return}try{o(l,!0),o(p,"");const R={...e(n)};e(c)?e(M)&&(R.webhook_secret=""):delete R.webhook_secret,ze(e(G),_().agent_mode,!1)&&(R.agent_mode=e(G)),h("submit",R)}catch(R){o(p,Ae(R)),o(l,!1)}}return Ve(()=>{pe()}),Pe(()=>Q(_()),()=>{o(i,_().endpoint?.endpoint_type)}),Pe(()=>(e(s),e(i)),()=>{o($,e(s).filter(R=>ze(R.forge_type,e(i))))}),Ie(),Te(),P(()=>He(ve,{$$events:{close:()=>h("close")},children:Je(A,(R,re)=>{var F=mt(),ae=t(F),oe=a(t(ae),2),ge=t(oe,!0);r(oe),r(ae);var Y=a(ae,2),me=t(Y);{var Ce=u=>{var k=it(),B=t(k),q=t(B,!0);r(B),r(k),S(()=>j(q,e(p))),f(u,k)};P(()=>I(me,u=>{e(p)&&u(Ce)}),"if",A,101,2)}var fe=a(me,2);{var ke=u=>{var k=ct();f(u,k)},T=u=>{var k=gt(),B=t(k),q=a(t(B),2);S(()=>{e(n),Re(()=>{e($)})});var se=t(q);se.value=se.__value="";var xe=a(se);P(()=>Xe(xe,1,()=>e($),Ye,(w,C)=>{var J=bt(),Me=t(J);r(J);var D={};S(()=>{j(Me,`${e(C),U(()=>e(C).name)??""} (${e(C),U(()=>e(C).endpoint?.name||"Unknown endpoint")??""})`),D!==(D=(e(C),U(()=>e(C).name)))&&(J.value=(J.__value=(e(C),U(()=>e(C).name)))??"")}),f(w,J)}),"each",A,126,6),r(q);var V=a(q,2),de=t(V);r(V),r(B);var K=a(B,2),L=a(t(K),2);S(()=>{e(n),Re(()=>{})});var Z=t(L);Z.value=Z.__value="roundrobin";var le=a(Z);le.value=le.__value="pack",r(L),r(K);var ee=a(K,2),ne=t(ee);H(ne),X(4),r(ee);var ie=a(ee,2),te=t(ie),ye=t(te);H(ye),X(2),r(te);var we=a(te,2);{var he=w=>{var C=pt(),J=t(C),Me=t(J);H(Me),X(2),r(J);var D=a(J,2);{var ce=be=>{var Ue=ut();H(Ue),S(()=>Ue.required=e(c)&&!e(M)),De(Ue,()=>e(n).webhook_secret,Ze=>Se(n,e(n).webhook_secret=Ze)),f(be,Ue)},Ge=be=>{var Ue=vt();f(be,Ue)};P(()=>I(D,be=>{e(M)?be(Ge,!1):be(ce)}),"if",A,201,7)}r(C),ue(Me,()=>e(M),be=>o(M,be)),f(w,C)};P(()=>I(we,w=>{e(c)&&w(he)}),"if",A,188,5)}r(ie);var v=a(ie,2),d=t(v),g=a(d,2),W=t(g,!0);r(g),r(v),r(k),S(w=>{j(de,`Only showing credentials for ${e(i)??""} endpoints`),g.disabled=w,j(W,e(l)?"Updating...":"Update Organization")},[()=>(e(l),e(c),e(M),e(n),U(()=>e(l)||e(c)&&!e(M)&&!e(n).webhook_secret?.trim()))]),We(q,()=>e(n).credentials_name,w=>Se(n,e(n).credentials_name=w)),We(L,()=>e(n).pool_balancer_type,w=>Se(n,e(n).pool_balancer_type=w)),ue(ne,()=>e(G),w=>o(G,w)),ue(ye,()=>e(c),w=>o(c,w)),$e("click",d,()=>h("close")),$e("submit",k,Ne(z)),f(u,k)};P(()=>I(fe,u=>{e(l)?u(ke):u(T,!1)}),"if",A,107,2)}r(Y),r(F),S(()=>j(ge,(Q(_()),U(()=>_().name)))),f(R,F)}),$$slots:{default:!0}}),"component",A,92,0,{componentTag:"Modal"}),qe({...Oe()})}E[b]="src/lib/components/UpdateEnterpriseModal.svelte";var ft=x(y('<div class="mb-4 rounded-md bg-red-50 dark:bg-red-900 p-4"><p class="text-sm font-medium text-red-800 dark:text-red-200"> </p></div>'),E[b],[[99,3,[[100,4]]]]),xt=x(y('<div class="text-center py-4"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">Loading...</p></div>'),E[b],[[105,3,[[106,4],[107,4]]]]),yt=x(y("<option> </option>"),E[b],[[124,7]]),ht=x(y('<input type="password" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm" placeholder="Enter new webhook secret"/>'),E[b],[[199,8]]),_t=x(y('<p class="text-sm text-gray-500 dark:text-gray-400">A new webhook secret will be automatically generated</p>'),E[b],[[207,8]]),kt=x(y('<div class="ml-6 space-y-2"><div class="flex items-center"><input id="generate-webhook-secret" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="generate-webhook-secret" class="ml-2 text-sm text-gray-700 dark:text-gray-300">Auto-generate new secret</label></div> <!></div>'),E[b],[[186,6,[[187,7,[[188,8],[194,8]]]]]]),wt=x(y('<form class="space-y-4"><div><label for="credentials" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">GitHub Credentials</label> <select id="credentials" required class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"><option>Select GitHub credentials...</option><!></select> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Only showing credentials for GitHub endpoints</p></div> <div><label for="pool_balancer_type" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Pool Balancer Type</label> <select id="pool_balancer_type" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"><option>Round Robin</option><option>Pack</option></select></div> <div class="mb-6 flex items-center"><input id="agent-mode" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="agent-mode" class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-300">Agent Mode</label> <div class="ml-2 relative group"><svg class="w-4 h-4 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-80 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">When enabled, runners will be installed with the GARM agent via userdata install templates. This allows for enhanced runner management and control. <div class="absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"></div></div></div></div> <div><div class="flex items-center mb-2"><input id="change-webhook-secret" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="change-webhook-secret" class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-300">I want to change the webhook secret</label></div> <!></div> <div class="flex justify-end space-x-3 pt-4"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 cursor-pointer">Cancel</button> <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"> </button></div></form>'),E[b],[[110,3,[[112,4,[[113,5],[116,5,[[122,6]]],[129,5]]],[135,4,[[136,5],[139,5,[[144,6],[145,6]]]]],[150,4,[[151,5],[157,5],[160,5,[[161,6,[[162,7]]],[164,6,[[166,7]]]]]]],[172,4,[[173,5,[[174,6],[180,6]]]]],[216,4,[[217,5],[224,5]]]]]]),Mt=x(y('<div class="max-w-2xl w-full"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700"><h2 class="text-xl font-semibold text-gray-900 dark:text-white">Update Enterprise</h2> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400"> </p></div> <div class="p-6"><!> <!></div></div>'),E[b],[[90,1,[[91,2,[[92,3],[93,3]]],[96,2]]]]);function E(ve,O){je(new.target),Be(O,!1,E);const i=m();let $=_e(O,"enterprise",8);const _=Le();let h=m(!1),l=m(""),p=m([]),s=m({credentials_name:$().credentials_name||"",webhook_secret:"",pool_balancer_type:$().pool_balancing_type||"roundrobin"}),n=m(!1),c=m(!0),M=m($().agent_mode??!1);async function G(){try{o(h,!0),o(p,(await Ke(Qe.listAllCredentials()))())}catch(z){o(l,Ae(z))}finally{o(h,!1)}}async function pe(){if(!e(s).credentials_name){o(l,"Please select credentials");return}if(e(n)&&!e(c)&&!e(s).webhook_secret?.trim()){o(l,"Please enter a webhook secret or uncheck the change webhook secret option");return}try{o(h,!0),o(l,"");const z={...e(s)};e(n)?e(c)&&(z.webhook_secret=""):delete z.webhook_secret,ze(e(M),$().agent_mode,!1)&&(z.agent_mode=e(M)),_("submit",z)}catch(z){o(l,Ae(z)),o(h,!1)}}return Ve(()=>{G()}),Pe(()=>e(p),()=>{o(i,e(p).filter(z=>ze(z.forge_type,"github")))}),Ie(),Te(),P(()=>He(ve,{$$events:{close:()=>_("close")},children:Je(E,(z,R)=>{var re=Mt(),F=t(re),ae=a(t(F),2),oe=t(ae,!0);r(ae),r(F);var ge=a(F,2),Y=t(ge);{var me=T=>{var u=ft(),k=t(u),B=t(k,!0);r(k),r(u),S(()=>j(B,e(l))),f(T,u)};P(()=>I(Y,T=>{e(l)&&T(me)}),"if",E,98,2)}var Ce=a(Y,2);{var fe=T=>{var u=xt();f(T,u)},ke=T=>{var u=wt(),k=t(u),B=a(t(k),2);S(()=>{e(s),Re(()=>{e(i)})});var q=t(B);q.value=q.__value="";var se=a(q);P(()=>Xe(se,1,()=>e(i),Ye,(d,g)=>{var W=yt(),w=t(W);r(W);var C={};S(()=>{j(w,`${e(g),U(()=>e(g).name)??""} (${e(g),U(()=>e(g).endpoint?.name||"Unknown endpoint")??""})`),C!==(C=(e(g),U(()=>e(g).name)))&&(W.value=(W.__value=(e(g),U(()=>e(g).name)))??"")}),f(d,W)}),"each",E,123,6),r(B),X(2),r(k);var xe=a(k,2),V=a(t(xe),2);S(()=>{e(s),Re(()=>{})});var de=t(V);de.value=de.__value="roundrobin";var K=a(de);K.value=K.__value="pack",r(V),r(xe);var L=a(xe,2),Z=t(L);H(Z),X(4),r(L);var le=a(L,2),ee=t(le),ne=t(ee);H(ne),X(2),r(ee);var ie=a(ee,2);{var te=d=>{var g=kt(),W=t(g),w=t(W);H(w),X(2),r(W);var C=a(W,2);{var J=D=>{var ce=ht();H(ce),S(()=>ce.required=e(n)&&!e(c)),De(ce,()=>e(s).webhook_secret,Ge=>Se(s,e(s).webhook_secret=Ge)),f(D,ce)},Me=D=>{var ce=_t();f(D,ce)};P(()=>I(C,D=>{e(c)?D(Me,!1):D(J)}),"if",E,198,7)}r(g),ue(w,()=>e(c),D=>o(c,D)),f(d,g)};P(()=>I(ie,d=>{e(n)&&d(te)}),"if",E,185,5)}r(le);var ye=a(le,2),we=t(ye),he=a(we,2),v=t(he,!0);r(he),r(ye),r(u),S(d=>{he.disabled=d,j(v,e(h)?"Updating...":"Update Enterprise")},[()=>(e(h),e(n),e(c),e(s),U(()=>e(h)||e(n)&&!e(c)&&!e(s).webhook_secret?.trim()))]),We(B,()=>e(s).credentials_name,d=>Se(s,e(s).credentials_name=d)),We(V,()=>e(s).pool_balancer_type,d=>Se(s,e(s).pool_balancer_type=d)),ue(Z,()=>e(M),d=>o(M,d)),ue(ne,()=>e(n),d=>o(n,d)),$e("click",we,()=>_("close")),$e("submit",u,Ne(pe)),f(T,u)};P(()=>I(Ce,T=>{e(h)?T(fe):T(ke,!1)}),"if",E,104,2)}r(ge),r(re),S(()=>j(oe,(Q($()),U(()=>$().name)))),f(z,re)}),$$slots:{default:!0}}),"component",E,89,0,{componentTag:"Modal"}),qe({...Oe()})}export{Ee as J,N as U,A as a,E as b};
