import"./DsnmJJEf.js";import{i as ze}from"./De-I_rkH.js";import{p as Ce,l as Me,k as o,m as p,q as J,h as Ee,f,d as t,x as Ie,s as a,g as e,r,t as M,b as m,c as Ue,E as Re,z as H,u as w,e as A,i as _e,D as Le,o as De,y as Se,w as he}from"./BIqNNOMq.js";import{p as pe,i as D}from"./CfI2BFUj.js";import{c as Oe,s as Je,r as G,b as $e,g as qe}from"./CQh-7xkh.js";import{b as Ae,a as de}from"./Gs5uNKRr.js";import{p as We}from"./CdEA5IGF.js";import{e as we}from"./BZiHL9L3.js";import{M as je}from"./BFX8vI-4.js";import{e as Be,i as Ge}from"./D8ZtP9JD.js";var He=f('<div class="absolute top-2 right-2"><svg class="w-4 h-4 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div>'),Ne=f('<div class="relative"><textarea style="tab-size: 2;" spellcheck="false"></textarea> <!></div>');function wt(le,P){Ce(P,!1);let i=pe(P,"value",12,""),S=pe(P,"placeholder",8,"{}"),y=pe(P,"rows",8,4),x=pe(P,"disabled",8,!1),l=p(!0);Me(()=>J(i()),()=>{if(i().trim())try{JSON.parse(i()),o(l,!0)}catch{o(l,!1)}else o(l,!0)}),Ee(),ze();var v=Ne(),s=t(v);Ie(s);var n=a(s,2);{var c=k=>{var O=He();m(k,O)};D(n,k=>{e(l)||k(c)})}r(v),M(()=>{Oe(s,"placeholder",S()),Oe(s,"rows",y()),s.disabled=x(),Je(s,1,`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 font-mono text-sm resize-none
			${e(l)?"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white":"border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20 text-red-900 dark:text-red-100"}
			${x()?"opacity-50 cursor-not-allowed":""}
		`)}),Ae(s,i),m(le,v),Ue()}var Ve=f('<div class="mb-4 rounded-md bg-red-50 dark:bg-red-900 p-4"><p class="text-sm font-medium text-red-800 dark:text-red-200"> </p></div>'),Fe=f('<div><label for="webhookSecret" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">New Webhook Secret <span class="text-red-500">*</span></label> <input id="webhookSecret" type="password" placeholder="Enter new webhook secret" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Leave empty to auto-generate a new secret</p></div>'),Ke=f('<div class="flex items-center"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div> Updating...</div>'),Qe=f('<div class="max-w-2xl w-full"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700"><h2 class="text-xl font-semibold text-gray-900 dark:text-white">Update Repository</h2> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400"> </p></div> <form class="p-6"><!> <div class="mb-6 bg-gray-50 dark:bg-gray-900 p-4 rounded-lg"><h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Repository Information</h3> <div class="space-y-2 text-sm"><div><span class="text-gray-500 dark:text-gray-400">Owner:</span> <span class="ml-2 text-gray-900 dark:text-white"> </span></div> <div><span class="text-gray-500 dark:text-gray-400">Name:</span> <span class="ml-2 text-gray-900 dark:text-white"> </span></div> <div><span class="text-gray-500 dark:text-gray-400">Endpoint:</span> <span class="ml-2 text-gray-900 dark:text-white"> </span></div> <div><span class="text-gray-500 dark:text-gray-400">Credentials:</span> <span class="ml-2 text-gray-900 dark:text-white"> </span></div></div></div> <div class="mb-6 flex items-center"><input id="agentMode" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="agentMode" class="ml-2 block text-sm font-medium text-gray-700 dark:text-gray-300">Agent Mode</label> <div class="ml-2 relative group"><svg class="w-4 h-4 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-80 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">When enabled, runners will be installed with the GARM agent via userdata install templates. This allows for enhanced runner management and control. <div class="absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"></div></div></div></div> <div class="space-y-4"><div class="flex items-center"><input id="changeWebhookSecret" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="changeWebhookSecret" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">I want to change the webhook secret</label></div> <!></div> <div class="flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700 mt-6"><button type="button" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer">Cancel</button> <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"><!></button></div></form></div>');function Mt(le,P){Ce(P,!1);let i=pe(P,"repository",8);const S=Re();let y=p(!1),x=p(""),l=p(""),v=p(!1),s=p(i().agent_mode??!1);async function n(){try{o(y,!0),o(x,"");const c={};if(e(v)){if(!e(l).trim()){o(x,"Please enter a webhook secret or uncheck the option to change it");return}c.webhook_secret=e(l)}if(e(s)!==i().agent_mode&&(c.agent_mode=e(s)),Object.keys(c).length===0){S("close");return}S("submit",c)}catch(c){o(x,we(c))}finally{o(y,!1)}}ze(),je(le,{$$events:{close:()=>S("close")},children:(c,k)=>{var O=Qe(),ne=t(O),$=a(t(ne),2),C=t($);r($),r(ne);var Q=a(ne,2),T=t(Q);{var X=u=>{var d=Ve(),g=t(d),U=t(g,!0);r(g),r(d),M(()=>A(U,e(x))),m(u,d)};D(T,u=>{e(x)&&u(X)})}var Y=a(T,2),ie=a(t(Y),2),N=t(ie),ce=a(t(N),2),ke=t(ce,!0);r(ce),r(N);var be=a(N,2),me=a(t(be),2),E=t(me,!0);r(me),r(be);var b=a(be,2),h=a(t(b),2),R=t(h,!0);r(h),r(b);var W=a(b,2),Z=a(t(W),2),ue=t(Z,!0);r(Z),r(W),r(ie),r(Y);var I=a(Y,2),ee=t(I);G(ee),H(4),r(I);var L=a(I,2),q=t(L),V=t(q);G(V),H(2),r(q);var te=a(q,2);{var F=u=>{var d=Fe(),g=a(t(d),2);G(g),H(2),r(d),M(()=>g.required=e(v)),Ae(g,()=>e(l),U=>o(l,U)),m(u,d)};D(te,u=>{e(v)&&u(F)})}r(L);var re=a(L,2),ae=t(re),K=a(ae,2),ve=t(K);{var fe=u=>{var d=Ke();m(u,d)},ge=u=>{var d=Le("Update Repository");m(u,d)};D(ve,u=>{e(y)?u(fe):u(ge,!1)})}r(K),r(re),r(Q),r(O),M(u=>{A(C,`${J(i()),w(()=>i().owner)??""}/${J(i()),w(()=>i().name)??""}`),A(ke,(J(i()),w(()=>i().owner))),A(E,(J(i()),w(()=>i().name))),A(R,(J(i()),w(()=>i().endpoint?.name))),A(ue,(J(i()),w(()=>i().credentials_name))),K.disabled=u},[()=>(e(y),e(v),e(l),w(()=>e(y)||e(v)&&!e(l).trim()))]),de(ee,()=>e(s),u=>o(s,u)),de(V,()=>e(v),u=>o(v,u)),_e("click",ae,()=>S("close")),_e("submit",Q,We(n)),m(c,O)},$$slots:{default:!0}}),Ue()}var Xe=f('<div class="mb-4 rounded-md bg-red-50 dark:bg-red-900 p-4"><p class="text-sm font-medium text-red-800 dark:text-red-200"> </p></div>'),Ye=f('<div class="text-center py-4"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">Loading...</p></div>'),Ze=f("<option> </option>"),et=f('<input type="password" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm" placeholder="Enter new webhook secret"/>'),tt=f('<p class="text-sm text-gray-500 dark:text-gray-400">A new webhook secret will be automatically generated</p>'),rt=f('<div class="ml-6 space-y-2"><div class="flex items-center"><input id="generate-webhook-secret" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="generate-webhook-secret" class="ml-2 text-sm text-gray-700 dark:text-gray-300">Auto-generate new secret</label></div> <!></div>'),at=f('<form class="space-y-4"><div><label for="credentials" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Credentials</label> <select id="credentials" required class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"><option>Select credentials...</option><!></select> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400"> </p></div> <div><label for="pool_balancer_type" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Pool Balancer Type</label> <select id="pool_balancer_type" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"><option>Round Robin</option><option>Pack</option></select></div> <div class="mb-6 flex items-center"><input id="agent-mode" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="agent-mode" class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-300">Agent Mode</label> <div class="ml-2 relative group"><svg class="w-4 h-4 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-80 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">When enabled, runners will be installed with the GARM agent via userdata install templates. This allows for enhanced runner management and control. <div class="absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"></div></div></div></div> <div><div class="flex items-center mb-2"><input id="change-webhook-secret" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="change-webhook-secret" class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-300">I want to change the webhook secret</label></div> <!></div> <div class="flex justify-end space-x-3 pt-4"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 cursor-pointer">Cancel</button> <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"> </button></div></form>'),ot=f('<div class="max-w-2xl w-full"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700"><h2 class="text-xl font-semibold text-gray-900 dark:text-white">Update Organization</h2> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400"> </p></div> <div class="p-6"><!> <!></div></div>');function St(le,P){Ce(P,!1);const i=p(),S=p();let y=pe(P,"organization",8);const x=Re();let l=p(!1),v=p(""),s=p([]),n=p({credentials_name:y().credentials_name||"",webhook_secret:"",pool_balancer_type:y().pool_balancing_type||"roundrobin"}),c=p(!1),k=p(!0),O=p(y().agent_mode??!1);async function ne(){try{o(l,!0),o(s,await qe.listAllCredentials())}catch(C){o(v,we(C))}finally{o(l,!1)}}async function $(){if(!e(n).credentials_name){o(v,"Please select credentials");return}if(e(c)&&!e(k)&&!e(n).webhook_secret?.trim()){o(v,"Please enter a webhook secret or uncheck the change webhook secret option");return}try{o(l,!0),o(v,"");const C={...e(n)};e(c)?e(k)&&(C.webhook_secret=""):delete C.webhook_secret,e(O)!==y().agent_mode&&(C.agent_mode=e(O)),x("submit",C)}catch(C){o(v,we(C)),o(l,!1)}}De(()=>{ne()}),Me(()=>J(y()),()=>{o(i,y().endpoint?.endpoint_type)}),Me(()=>(e(s),e(i)),()=>{o(S,e(s).filter(C=>C.forge_type===e(i)))}),Ee(),ze(),je(le,{$$events:{close:()=>x("close")},children:(C,Q)=>{var T=ot(),X=t(T),Y=a(t(X),2),ie=t(Y,!0);r(Y),r(X);var N=a(X,2),ce=t(N);{var ke=b=>{var h=Xe(),R=t(h),W=t(R,!0);r(R),r(h),M(()=>A(W,e(v))),m(b,h)};D(ce,b=>{e(v)&&b(ke)})}var be=a(ce,2);{var me=b=>{var h=Ye();m(b,h)},E=b=>{var h=at(),R=t(h),W=a(t(R),2);M(()=>{e(n),Se(()=>{e(S)})});var Z=t(W);Z.value=Z.__value="";var ue=a(Z);Be(ue,1,()=>e(S),Ge,(_,z)=>{var B=Ze(),xe=t(B);r(B);var j={};M(()=>{A(xe,`${e(z),w(()=>e(z).name)??""} (${e(z),w(()=>e(z).endpoint?.name||"Unknown endpoint")??""})`),j!==(j=(e(z),w(()=>e(z).name)))&&(B.value=(B.__value=(e(z),w(()=>e(z).name)))??"")}),m(_,B)}),r(W);var I=a(W,2),ee=t(I);r(I),r(R);var L=a(R,2),q=a(t(L),2);M(()=>{e(n),Se(()=>{})});var V=t(q);V.value=V.__value="roundrobin";var te=a(V);te.value=te.__value="pack",r(q),r(L);var F=a(L,2),re=t(F);G(re),H(4),r(F);var ae=a(F,2),K=t(ae),ve=t(K);G(ve),H(2),r(K);var fe=a(K,2);{var ge=_=>{var z=rt(),B=t(z),xe=t(B);G(xe),H(2),r(B);var j=a(B,2);{var oe=se=>{var ye=et();G(ye),M(()=>ye.required=e(c)&&!e(k)),Ae(ye,()=>e(n).webhook_secret,Te=>he(n,e(n).webhook_secret=Te)),m(se,ye)},Pe=se=>{var ye=tt();m(se,ye)};D(j,se=>{e(k)?se(Pe,!1):se(oe)})}r(z),de(xe,()=>e(k),se=>o(k,se)),m(_,z)};D(fe,_=>{e(c)&&_(ge)})}r(ae);var u=a(ae,2),d=t(u),g=a(d,2),U=t(g,!0);r(g),r(u),r(h),M(_=>{A(ee,`Only showing credentials for ${e(i)??""} endpoints`),g.disabled=_,A(U,e(l)?"Updating...":"Update Organization")},[()=>(e(l),e(c),e(k),e(n),w(()=>e(l)||e(c)&&!e(k)&&!e(n).webhook_secret?.trim()))]),$e(W,()=>e(n).credentials_name,_=>he(n,e(n).credentials_name=_)),$e(q,()=>e(n).pool_balancer_type,_=>he(n,e(n).pool_balancer_type=_)),de(re,()=>e(O),_=>o(O,_)),de(ve,()=>e(c),_=>o(c,_)),_e("click",d,()=>x("close")),_e("submit",h,We($)),m(b,h)};D(be,b=>{e(l)?b(me):b(E,!1)})}r(N),r(T),M(()=>A(ie,(J(y()),w(()=>y().name)))),m(C,T)},$$slots:{default:!0}}),Ue()}var st=f('<div class="mb-4 rounded-md bg-red-50 dark:bg-red-900 p-4"><p class="text-sm font-medium text-red-800 dark:text-red-200"> </p></div>'),dt=f('<div class="text-center py-4"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">Loading...</p></div>'),lt=f("<option> </option>"),nt=f('<input type="password" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm" placeholder="Enter new webhook secret"/>'),it=f('<p class="text-sm text-gray-500 dark:text-gray-400">A new webhook secret will be automatically generated</p>'),ct=f('<div class="ml-6 space-y-2"><div class="flex items-center"><input id="generate-webhook-secret" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="generate-webhook-secret" class="ml-2 text-sm text-gray-700 dark:text-gray-300">Auto-generate new secret</label></div> <!></div>'),bt=f('<form class="space-y-4"><div><label for="credentials" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">GitHub Credentials</label> <select id="credentials" required class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"><option>Select GitHub credentials...</option><!></select> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Only showing credentials for GitHub endpoints</p></div> <div><label for="pool_balancer_type" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Pool Balancer Type</label> <select id="pool_balancer_type" class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm"><option>Round Robin</option><option>Pack</option></select></div> <div class="mb-6 flex items-center"><input id="agent-mode" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="agent-mode" class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-300">Agent Mode</label> <div class="ml-2 relative group"><svg class="w-4 h-4 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-80 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">When enabled, runners will be installed with the GARM agent via userdata install templates. This allows for enhanced runner management and control. <div class="absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"></div></div></div></div> <div><div class="flex items-center mb-2"><input id="change-webhook-secret" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="change-webhook-secret" class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-300">I want to change the webhook secret</label></div> <!></div> <div class="flex justify-end space-x-3 pt-4"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 cursor-pointer">Cancel</button> <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"> </button></div></form>'),ut=f('<div class="max-w-2xl w-full"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700"><h2 class="text-xl font-semibold text-gray-900 dark:text-white">Update Enterprise</h2> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400"> </p></div> <div class="p-6"><!> <!></div></div>');function $t(le,P){Ce(P,!1);const i=p();let S=pe(P,"enterprise",8);const y=Re();let x=p(!1),l=p(""),v=p([]),s=p({credentials_name:S().credentials_name||"",webhook_secret:"",pool_balancer_type:S().pool_balancing_type||"roundrobin"}),n=p(!1),c=p(!0),k=p(S().agent_mode??!1);async function O(){try{o(x,!0),o(v,await qe.listAllCredentials())}catch($){o(l,we($))}finally{o(x,!1)}}async function ne(){if(!e(s).credentials_name){o(l,"Please select credentials");return}if(e(n)&&!e(c)&&!e(s).webhook_secret?.trim()){o(l,"Please enter a webhook secret or uncheck the change webhook secret option");return}try{o(x,!0),o(l,"");const $={...e(s)};e(n)?e(c)&&($.webhook_secret=""):delete $.webhook_secret,e(k)!==S().agent_mode&&($.agent_mode=e(k)),y("submit",$)}catch($){o(l,we($)),o(x,!1)}}De(()=>{O()}),Me(()=>e(v),()=>{o(i,e(v).filter($=>$.forge_type==="github"))}),Ee(),ze(),je(le,{$$events:{close:()=>y("close")},children:($,C)=>{var Q=ut(),T=t(Q),X=a(t(T),2),Y=t(X,!0);r(X),r(T);var ie=a(T,2),N=t(ie);{var ce=E=>{var b=st(),h=t(b),R=t(h,!0);r(h),r(b),M(()=>A(R,e(l))),m(E,b)};D(N,E=>{e(l)&&E(ce)})}var ke=a(N,2);{var be=E=>{var b=dt();m(E,b)},me=E=>{var b=bt(),h=t(b),R=a(t(h),2);M(()=>{e(s),Se(()=>{e(i)})});var W=t(R);W.value=W.__value="";var Z=a(W);Be(Z,1,()=>e(i),Ge,(d,g)=>{var U=lt(),_=t(U);r(U);var z={};M(()=>{A(_,`${e(g),w(()=>e(g).name)??""} (${e(g),w(()=>e(g).endpoint?.name||"Unknown endpoint")??""})`),z!==(z=(e(g),w(()=>e(g).name)))&&(U.value=(U.__value=(e(g),w(()=>e(g).name)))??"")}),m(d,U)}),r(R),H(2),r(h);var ue=a(h,2),I=a(t(ue),2);M(()=>{e(s),Se(()=>{})});var ee=t(I);ee.value=ee.__value="roundrobin";var L=a(ee);L.value=L.__value="pack",r(I),r(ue);var q=a(ue,2),V=t(q);G(V),H(4),r(q);var te=a(q,2),F=t(te),re=t(F);G(re),H(2),r(F);var ae=a(F,2);{var K=d=>{var g=ct(),U=t(g),_=t(U);G(_),H(2),r(U);var z=a(U,2);{var B=j=>{var oe=nt();G(oe),M(()=>oe.required=e(n)&&!e(c)),Ae(oe,()=>e(s).webhook_secret,Pe=>he(s,e(s).webhook_secret=Pe)),m(j,oe)},xe=j=>{var oe=it();m(j,oe)};D(z,j=>{e(c)?j(xe,!1):j(B)})}r(g),de(_,()=>e(c),j=>o(c,j)),m(d,g)};D(ae,d=>{e(n)&&d(K)})}r(te);var ve=a(te,2),fe=t(ve),ge=a(fe,2),u=t(ge,!0);r(ge),r(ve),r(b),M(d=>{ge.disabled=d,A(u,e(x)?"Updating...":"Update Enterprise")},[()=>(e(x),e(n),e(c),e(s),w(()=>e(x)||e(n)&&!e(c)&&!e(s).webhook_secret?.trim()))]),$e(R,()=>e(s).credentials_name,d=>he(s,e(s).credentials_name=d)),$e(I,()=>e(s).pool_balancer_type,d=>he(s,e(s).pool_balancer_type=d)),de(V,()=>e(k),d=>o(k,d)),de(re,()=>e(n),d=>o(n,d)),_e("click",fe,()=>y("close")),_e("submit",b,We(ne)),m(E,b)};D(ke,E=>{e(x)?E(be):E(me,!1)})}r(ie),r(Q),M(()=>A(Y,(J(S()),w(()=>S().name)))),m($,Q)},$$slots:{default:!0}}),Ue()}export{wt as J,Mt as U,St as a,$t as b};
