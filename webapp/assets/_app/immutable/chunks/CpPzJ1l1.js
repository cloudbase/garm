import"./DsnmJJEf.js";import{i as He}from"./De-I_rkH.js";import{p as Je,E as Qe,o as Ve,f as x,d as a,r,s,g as e,m as u,z as U,t as y,y as ye,u as c,e as v,q as $,k as n,i as xe,b,D as Xe,c as Ye}from"./BIqNNOMq.js";import{p as fe,i as B}from"./CfI2BFUj.js";import{e as Ze,i as et}from"./D8ZtP9JD.js";import{r as ee,b as _e,g as tt}from"./CQh-7xkh.js";import{a as he,b as at}from"./Gs5uNKRr.js";import{p as rt}from"./CdEA5IGF.js";import{e as ke}from"./BZiHL9L3.js";import{M as ot}from"./BFX8vI-4.js";var st=x('<div class="rounded-md bg-red-50 dark:bg-red-900 p-4"><p class="text-sm font-medium text-red-800 dark:text-red-200"> </p></div>'),nt=x('<div><span class="text-gray-500 dark:text-gray-400">Owner:</span> <span class="ml-2 text-gray-900 dark:text-white"> </span></div>'),it=x('<div class="animate-pulse bg-gray-200 dark:bg-gray-700 h-10 rounded"></div>'),dt=x("<option> </option>"),lt=x('<select id="credentials" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>Keep current credentials</option><!></select>'),ct=x('<div><label for="webhookSecret" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">New Webhook Secret <span class="text-red-500">*</span></label> <input id="webhookSecret" type="password" placeholder="Enter new webhook secret" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Leave empty to auto-generate a new secret</p></div>'),vt=x('<div class="flex items-center"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div> Updating...</div>'),pt=x('<div class="max-w-2xl w-full"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700"><h2 class="text-xl font-semibold text-gray-900 dark:text-white"> </h2> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400"> </p></div> <form class="p-6 space-y-6"><!> <div class="bg-gray-50 dark:bg-gray-900 p-4 rounded-lg"><h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"> </h3> <div class="space-y-2 text-sm"><!> <div><span class="text-gray-500 dark:text-gray-400">Name:</span> <span class="ml-2 text-gray-900 dark:text-white"> </span></div> <div><span class="text-gray-500 dark:text-gray-400">Endpoint:</span> <span class="ml-2 text-gray-900 dark:text-white"> </span></div> <div><span class="text-gray-500 dark:text-gray-400">Current Credentials:</span> <span class="ml-2 text-gray-900 dark:text-white"> </span></div> <div><span class="text-gray-500 dark:text-gray-400">Current Pool Balancer:</span> <span class="ml-2 text-gray-900 dark:text-white"> </span></div></div></div> <div class="space-y-4"><div><label for="credentials" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Credentials</label> <!> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Leave unchanged to keep current credentials</p></div> <div><label for="poolBalancer" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Pool Balancer Type</label> <select id="poolBalancer" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>Round Robin</option><option>Pack</option></select> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Round Robin distributes jobs evenly across pools, Pack fills pools in order</p></div> <div class="flex items-center"><input id="agentMode" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="agentMode" class="ml-2 block text-sm font-medium text-gray-700 dark:text-gray-300">Agent Mode</label> <div class="ml-2 relative group"><svg class="w-4 h-4 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-80 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">When enabled, runners will be installed with the GARM agent via userdata install templates. This allows for enhanced runner management and control. <div class="absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"></div></div></div></div> <div class="space-y-3"><div class="flex items-center"><input id="changeWebhookSecret" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="changeWebhookSecret" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">Change webhook secret</label></div> <!></div></div> <div class="flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700"><button type="button" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer">Cancel</button> <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"><!></button></div></form></div>');function wt(we,A){Je(A,!1);let i=fe(A,"entity",8),C=fe(A,"entityType",8);const T=Qe();let M=u(!1),k=u(""),R=u([]),W=u(!1),f=u(""),_=u(""),h=u(""),g=u(!1),E=u(!1);function Ce(){if(C()==="repository"){const l=i();return`${l.owner}/${l.name}`}return i().name||""}function z(){return C().charAt(0).toUpperCase()+C().slice(1)}function Me(){return C()==="repository"&&i().owner||""}async function Ee(){try{n(W,!0),n(R,await tt.listCredentials())}catch(l){n(k,ke(l))}finally{n(W,!1)}}function Se(){n(f,i().credentials_name||""),n(_,i().pool_balancing_type||"roundrobin"),n(h,""),n(g,!1),n(E,i().agent_mode??!1)}async function Pe(){try{n(M,!0),n(k,"");const l={};let w=!1;if(e(f)&&e(f)!==i().credentials_name&&(l.credentials_name=e(f),w=!0),e(_)&&e(_)!==i().pool_balancing_type&&(l.pool_balancer_type=e(_),w=!0),e(E)!==i().agent_mode&&(l.agent_mode=e(E),w=!0),e(g)){if(!e(h).trim()){n(k,"Please enter a webhook secret or uncheck the option to change it");return}l.webhook_secret=e(h),w=!0}if(!w){T("close");return}T("submit",l)}catch(l){n(k,ke(l))}finally{n(M,!1)}}Ve(()=>{Ee(),Se()}),He(),ot(we,{$$events:{close:()=>T("close")},children:(l,w)=>{var D=pt(),j=a(D),N=a(j),Ue=a(N);r(N);var te=s(N,2),Be=a(te,!0);r(te),r(j);var q=s(j,2),ae=a(q);{var Te=t=>{var o=st(),d=a(o),p=a(d,!0);r(d),r(o),y(()=>v(p,e(k))),b(t,o)};B(ae,t=>{e(k)&&t(Te)})}var I=s(ae,2),L=a(I),$e=a(L);r(L);var re=s(L,2),oe=a(re);{var Ae=t=>{var o=nt(),d=s(a(o),2),p=a(d,!0);r(d),r(o),y(S=>v(p,S),[()=>c(Me)]),b(t,o)};B(oe,t=>{C()==="repository"&&t(Ae)})}var O=s(oe,2),se=s(a(O),2),Re=a(se,!0);r(se),r(O);var F=s(O,2),ne=s(a(F),2),We=a(ne,!0);r(ne),r(F);var G=s(F,2),ie=s(a(G),2),ze=a(ie,!0);r(ie),r(G);var de=s(G,2),le=s(a(de),2),De=a(le,!0);r(le),r(de),r(re),r(I);var K=s(I,2),H=a(K),je=s(a(H),2);{var Ne=t=>{var o=it();b(t,o)},qe=t=>{var o=lt();y(()=>{e(f),ye(()=>{e(R)})});var d=a(o);d.value=d.__value="";var p=s(d);Ze(p,1,()=>e(R),et,(S,m)=>{var P=dt(),Ke=a(P);r(P);var me={};y(()=>{v(Ke,`${e(m),c(()=>e(m).name)??""} (${e(m),c(()=>e(m).endpoint?.name||"Unknown")??""})`),me!==(me=(e(m),c(()=>e(m).name)))&&(P.value=(P.__value=(e(m),c(()=>e(m).name)))??"")}),b(S,P)}),r(o),_e(o,()=>e(f),S=>n(f,S)),b(t,o)};B(je,t=>{e(W)?t(Ne):t(qe,!1)})}U(2),r(H);var J=s(H,2),Q=s(a(J),2);y(()=>{e(_),ye(()=>{})});var V=a(Q);V.value=V.__value="roundrobin";var ce=s(V);ce.value=ce.__value="pack",r(Q),U(2),r(J);var X=s(J,2),ve=a(X);ee(ve),U(4),r(X);var pe=s(X,2),Y=a(pe),ue=a(Y);ee(ue),U(2),r(Y);var Ie=s(Y,2);{var Le=t=>{var o=ct(),d=s(a(o),2);ee(d),U(2),r(o),y(()=>d.required=e(g)),at(d,()=>e(h),p=>n(h,p)),b(t,o)};B(Ie,t=>{e(g)&&t(Le)})}r(pe),r(K);var be=s(K,2),ge=a(be),Z=s(ge,2),Oe=a(Z);{var Fe=t=>{var o=vt();b(t,o)},Ge=t=>{var o=Xe();y(d=>v(o,`Update ${d??""}`),[()=>c(z)]),b(t,o)};B(Oe,t=>{e(M)?t(Fe):t(Ge,!1)})}r(Z),r(be),r(q),r(D),y((t,o,d,p)=>{v(Ue,`Update ${t??""}`),v(Be,o),v($e,`${d??""} Information`),v(Re,($(i()),c(()=>i().name))),v(We,($(i()),c(()=>i().endpoint?.name))),v(ze,($(i()),c(()=>i().credentials_name))),v(De,($(i()),c(()=>i().pool_balancing_type||"roundrobin"))),Z.disabled=p},[()=>c(z),()=>c(Ce),()=>c(z),()=>(e(M),e(g),e(h),c(()=>e(M)||e(g)&&!e(h).trim()))]),_e(Q,()=>e(_),t=>n(_,t)),he(ve,()=>e(E),t=>n(E,t)),he(ue,()=>e(g),t=>n(g,t)),xe("click",ge,()=>T("close")),xe("submit",q,rt(Pe)),b(l,D)},$$slots:{default:!0}}),Ye()}export{wt as U};
