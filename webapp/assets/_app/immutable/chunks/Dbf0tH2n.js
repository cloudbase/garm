import"./DsnmJJEf.js";import{i as nr}from"./zNh6Oe5P.js";import{p as lr,E as ur,m as n,o as br,s,l as cr,g as e,a as gr,f as C,j as t,r as d,k as o,n as v,u as m,t as p,x as je,z as vr,v as k,e as Be,c as l,D as T,B as ze,b as Ce,d as mr}from"./sWNKMed7.js";import{p as pr,i as R}from"./Ccl3fNd2.js";import{r as c,s as Le,b as Fe}from"./S1SJhUVd.js";import{b as f,a as fr}from"./CLagxtgo.js";import{p as xr}from"./D4Caz1gY.js";import{M as yr}from"./BmcsR-UU.js";import{e as _r}from"./BZiHL9L3.js";import{J as hr}from"./D7BVkZag.js";var kr=C('<div class="rounded-md bg-red-50 dark:bg-red-900 p-4"><p class="text-sm font-medium text-red-800 dark:text-red-200"> </p></div>'),wr=C('<div class="rounded-md bg-yellow-50 dark:bg-yellow-900 p-4"><p class="text-sm font-medium text-yellow-800 dark:text-yellow-200"> </p></div>'),Sr=C('<div class="flex items-center"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div> Updating...</div>'),Rr=C('<div class="max-w-6xl w-full max-h-[90vh] overflow-y-auto"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700"><h2 class="text-xl font-semibold text-gray-900 dark:text-white"> </h2></div> <form class="p-6 space-y-6"><!> <!> <div class="bg-gray-50 dark:bg-gray-900 p-4 rounded-lg"><h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Scale Set Information</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"><div class="flex"><span class="text-gray-500 dark:text-gray-400 w-20 flex-shrink-0">Provider:</span> <span class="text-gray-900 dark:text-white"> </span></div> <div class="flex"><span class="text-gray-500 dark:text-gray-400 w-16 flex-shrink-0">Entity:</span> <span class="text-gray-900 dark:text-white"><!></span></div></div></div> <div><label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Name</label> <input id="name" type="text" placeholder="e.g., my-scale-set" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Image & OS Configuration</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="image" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Image</label> <input id="image" type="text" placeholder="e.g., ubuntu:22.04" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="flavor" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Flavor</label> <input id="flavor" type="text" placeholder="e.g., default" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="osType" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">OS Type</label> <select id="osType" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>Linux</option><option>Windows</option></select></div> <div><label for="osArch" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Architecture</label> <select id="osArch" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"><option>AMD64</option><option>ARM64</option></select></div></div></div> <div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Runner Limits & Timing</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><label for="minIdleRunners" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Min Idle Runners</label> <input id="minIdleRunners" type="number" min="0" placeholder="0"/></div> <div><label for="maxRunners" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Max Runners</label> <input id="maxRunners" type="number" min="1" placeholder="10"/></div> <div><label for="bootstrapTimeout" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Bootstrap Timeout (min)</label> <input id="bootstrapTimeout" type="number" min="1" placeholder="20" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div></div></div> <div class="space-y-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">Advanced Settings</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="runnerPrefix" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Runner Prefix</label> <input id="runnerPrefix" type="text" placeholder="garm" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div> <div><label for="githubRunnerGroup" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">GitHub Runner Group (optional)</label> <input id="githubRunnerGroup" type="text" placeholder="Default group" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"/></div></div> <div><fieldset><legend class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Extra Specs (JSON)</legend> <!></fieldset></div> <div class="flex items-center"><input id="enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"/> <label for="enabled" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">Scale set enabled</label></div></div> <div class="flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700"><button type="button" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer">Cancel</button> <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"><!></button></div></form></div>');function Dr(He,ge){lr(ge,!1);let a=pr(ge,"scaleSet",8);const L=ur();let A=n(!1),N=n(""),u=n(""),P=n(a().name||""),U=n(a().image||""),D=n(a().flavor||""),x=n(a().max_runners),y=n(a().min_idle_runners),G=n(a().runner_bootstrap_timeout),$=n(a().runner_prefix||""),E=n(a().os_type||"linux"),O=n(a().os_arch||"amd64"),j=n(a()["github-runner-group"]||""),B=n(a().enabled),g=n("{}");br(()=>{if(a().extra_specs)try{if(typeof a().extra_specs=="object")s(g,JSON.stringify(a().extra_specs,null,2));else{const b=JSON.parse(a().extra_specs);s(g,JSON.stringify(b,null,2))}}catch{s(g,a().extra_specs||"{}")}});async function We(){try{if(s(A,!0),s(N,""),e(u))throw new Error(e(u));let b={};if(e(g).trim())try{b=JSON.parse(e(g))}catch{throw new Error("Invalid JSON in extra specs")}const I={name:e(P)!==a().name?e(P):void 0,image:e(U)!==a().image?e(U):void 0,flavor:e(D)!==a().flavor?e(D):void 0,max_runners:e(x)!==a().max_runners?e(x):void 0,min_idle_runners:e(y)!==a().min_idle_runners?e(y):void 0,runner_bootstrap_timeout:e(G)!==a().runner_bootstrap_timeout?e(G):void 0,runner_prefix:e($)!==a().runner_prefix?e($):void 0,os_type:e(E)!==a().os_type?e(E):void 0,os_arch:e(O)!==a().os_arch?e(O):void 0,"github-runner-group":e(j)!==a()["github-runner-group"]&&e(j)||void 0,enabled:e(B)!==a().enabled?e(B):void 0,extra_specs:e(g).trim()!==JSON.stringify(a().extra_specs||{},null,2).trim()?b:void 0};Object.keys(I).forEach(_=>{I[_]===void 0&&delete I[_]}),L("submit",I)}catch(b){s(N,_r(b))}finally{s(A,!1)}}cr(()=>(e(y),e(x)),()=>{e(y)!==null&&e(x)!==null&&e(y)>e(x)?s(u,"Min idle runners cannot be greater than max runners"):s(u,"")}),gr(),nr(),yr(He,{$$events:{close:()=>L("close")},children:(b,I)=>{var _=Rr(),F=t(_),ve=t(F),qe=t(ve);d(ve),d(F);var H=o(F,2),me=t(H);{var Ke=r=>{var i=kr(),h=t(i),J=t(h,!0);d(h),d(i),p(()=>k(J,e(N))),l(r,i)};R(me,r=>{e(N)&&r(Ke)})}var pe=o(me,2);{var Qe=r=>{var i=wr(),h=t(i),J=t(h,!0);d(h),d(i),p(()=>k(J,e(u))),l(r,i)};R(pe,r=>{e(u)&&r(Qe)})}var W=o(pe,2),fe=o(t(W),2),q=t(fe),xe=o(t(q),2),Ve=t(xe,!0);d(xe),d(q);var ye=o(q,2),_e=o(t(ye),2),Xe=t(_e);{var Ye=r=>{var i=T();p(()=>k(i,`Repository: ${v(a()),m(()=>a().repo_name)??""}`)),l(r,i)},Ze=r=>{var i=ze(),h=Ce(i);{var J=w=>{var M=T();p(()=>k(M,`Organization: ${v(a()),m(()=>a().org_name)??""}`)),l(w,M)},dr=w=>{var M=ze(),or=Ce(M);{var sr=S=>{var z=T();p(()=>k(z,`Enterprise: ${v(a()),m(()=>a().enterprise_name)??""}`)),l(S,z)},ir=S=>{var z=T("Unknown Entity");l(S,z)};R(or,S=>{v(a()),m(()=>a().enterprise_name)?S(sr):S(ir,!1)},!0)}l(w,M)};R(h,w=>{v(a()),m(()=>a().org_name)?w(J):w(dr,!1)},!0)}l(r,i)};R(Xe,r=>{v(a()),m(()=>a().repo_name)?r(Ye):r(Ze,!1)})}d(_e),d(ye),d(fe),d(W);var K=o(W,2),he=o(t(K),2);c(he),d(K);var Q=o(K,2),ke=o(t(Q),2),V=t(ke),we=o(t(V),2);c(we),d(V);var X=o(V,2),Se=o(t(X),2);c(Se),d(X);var Y=o(X,2),Z=o(t(Y),2);p(()=>{e(E),je(()=>{})});var ee=t(Z);ee.value=ee.__value="linux";var Re=o(ee);Re.value=Re.__value="windows",d(Z),d(Y);var Ee=o(Y,2),re=o(t(Ee),2);p(()=>{e(O),je(()=>{})});var ae=t(re);ae.value=ae.__value="amd64";var Oe=o(ae);Oe.value=Oe.__value="arm64",d(re),d(Ee),d(ke),d(Q);var te=o(Q,2),Ie=o(t(te),2),de=t(Ie),oe=o(t(de),2);c(oe),d(de);var se=o(de,2),ie=o(t(se),2);c(ie),d(se);var Je=o(se,2),Me=o(t(Je),2);c(Me),d(Je),d(Ie),d(te);var ne=o(te,2),le=o(t(ne),2),ue=t(le),Te=o(t(ue),2);c(Te),d(ue);var Ae=o(ue,2),Ne=o(t(Ae),2);c(Ne),d(Ae),d(le);var be=o(le,2),Pe=t(be),er=o(t(Pe),2);hr(er,{rows:4,placeholder:"{}",get value(){return e(g)},set value(r){s(g,r)},$$legacy:!0}),d(Pe),d(be);var Ue=o(be,2),De=t(Ue);c(De),vr(2),d(Ue),d(ne);var Ge=o(ne,2),$e=t(Ge),ce=o($e,2),rr=t(ce);{var ar=r=>{var i=Sr();l(r,i)},tr=r=>{var i=T("Update Scale Set");l(r,i)};R(rr,r=>{e(A)?r(ar):r(tr,!1)})}d(ce),d(Ge),d(H),d(_),p(()=>{k(qe,`Update Scale Set ${v(a()),m(()=>a().name)??""}`),k(Ve,(v(a()),m(()=>a().provider_name))),Le(oe,1,`w-full px-3 py-2 border ${e(u)?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`),Le(ie,1,`w-full px-3 py-2 border ${e(u)?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`),ce.disabled=e(A)||e(u)!==""}),f(he,()=>e(P),r=>s(P,r)),f(we,()=>e(U),r=>s(U,r)),f(Se,()=>e(D),r=>s(D,r)),Fe(Z,()=>e(E),r=>s(E,r)),Fe(re,()=>e(O),r=>s(O,r)),f(oe,()=>e(y),r=>s(y,r)),f(ie,()=>e(x),r=>s(x,r)),f(Me,()=>e(G),r=>s(G,r)),f(Te,()=>e($),r=>s($,r)),f(Ne,()=>e(j),r=>s(j,r)),fr(De,()=>e(B),r=>s(B,r)),Be("click",$e,()=>L("close")),Be("submit",H,xr(We)),l(b,_)},$$slots:{default:!0}}),mr()}export{Dr as U};
